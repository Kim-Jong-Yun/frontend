{"ast":null,"code":"var _jsxFileName = \"/home/ketgintern/Desktop/FMS-AGV-AMR/frontend/src/pages/Task/TaskPage.js\";\nimport React, { useState, useEffect } from 'react';\nimport axios from 'axios';\nimport Navbar from '../../components/Common/Navbar';\nimport LogoutButton from '../../components/Common/LogoutButton';\nimport UserInfo from '../../components/Common/UserInfo';\nfunction TaskPage() {\n  const [taskName, setTaskName] = useState(''); // 작업 이름 상태\n  const [tasks, setTasks] = useState([]); // 작업 목록 상태\n  const [error, setError] = useState(''); // 오류 상태\n  const [loading, setLoading] = useState(true); // 로딩 상태\n\n  // 초기 작업 목록 불러오기\n  useEffect(() => {\n    const fetchTasks = async () => {\n      try {\n        const token = localStorage.getItem('token'); // 로컬 스토리지에서 인증 토큰을 가져옵니다.\n\n        if (!token) {\n          setError('인증 토큰이 없습니다. 다시 로그인하세요.');\n          setLoading(false);\n          return;\n        }\n        const response = await axios.get('http://172.30.1.15:5557/map/steps', {\n          headers: {\n            'Authorization': `Bearer ${token}` // Bearer 토큰을 헤더에 추가\n          }\n        });\n        setTasks(response.data); // 가져온 작업 목록을 상태에 저장\n        setLoading(false); // 로딩 완료\n      } catch (error) {\n        console.error('작업 목록을 불러오는 중 오류가 발생했습니다:', error);\n        setError('작업 목록을 불러오는 중 오류가 발생했습니다.');\n        setLoading(false); // 로딩 완료\n      }\n    };\n    fetchTasks();\n  }, []); // 컴포넌트가 처음 렌더링될 때 한 번만 실행\n\n  // 작업 추가 함수\n  const addTask = async () => {\n    if (taskName.trim() === '') {\n      setError('작업 이름을 입력하세요.');\n      return;\n    }\n    try {\n      const token = localStorage.getItem('token'); // 또는 적절한 토큰 저장소에서 토큰을 가져옴\n      const response = await axios.post('http://172.30.1.15:5557/map/steps', {\n        name: taskName\n      }, {\n        headers: {\n          'Authorization': `Bearer ${token}` // 인증 토큰 추가\n        }\n      });\n      setTasks([...tasks, response.data.step]); // 새로 추가된 작업을 상태에 추가\n      setTaskName(''); // 입력 필드 초기화\n      setError(''); // 오류 메시지 초기화\n    } catch (error) {\n      setError('작업 추가 중 오류가 발생했습니다.');\n      console.error(error);\n    }\n  };\n  return /*#__PURE__*/React.createElement(\"div\", {\n    style: {\n      fontFamily: 'Arial, sans-serif',\n      margin: '20px'\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 68,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(\"header\", {\n    style: {\n      display: 'flex',\n      justifyContent: 'space-between',\n      marginBottom: '20px'\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 69,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(UserInfo, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 70,\n      columnNumber: 17\n    }\n  }), /*#__PURE__*/React.createElement(LogoutButton, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 71,\n      columnNumber: 17\n    }\n  })), /*#__PURE__*/React.createElement(\"div\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 73,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(Navbar, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 74,\n      columnNumber: 17\n    }\n  }), \" \", /*#__PURE__*/React.createElement(\"div\", {\n    style: {\n      marginTop: '20px'\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 75,\n      columnNumber: 17\n    }\n  }, \" \", /*#__PURE__*/React.createElement(\"h2\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 76,\n      columnNumber: 21\n    }\n  }, \"\\uC791\\uC5C5 \\uCD94\\uAC00\"), /*#__PURE__*/React.createElement(\"input\", {\n    type: \"text\",\n    value: taskName,\n    onChange: e => setTaskName(e.target.value),\n    placeholder: \"\\uC791\\uC5C5 \\uC774\\uB984\\uC744 \\uC785\\uB825\\uD558\\uC138\\uC694\",\n    style: {\n      marginRight: '10px'\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 77,\n      columnNumber: 21\n    }\n  }), /*#__PURE__*/React.createElement(\"button\", {\n    onClick: addTask,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 84,\n      columnNumber: 21\n    }\n  }, \"\\uCD94\\uAC00\"), error && /*#__PURE__*/React.createElement(\"p\", {\n    style: {\n      color: 'red'\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 86,\n      columnNumber: 31\n    }\n  }, error), /*#__PURE__*/React.createElement(\"h3\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 88,\n      columnNumber: 21\n    }\n  }, \"\\uC791\\uC5C5 \\uBAA9\\uB85D\"), loading ? /*#__PURE__*/React.createElement(\"p\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 90,\n      columnNumber: 25\n    }\n  }, \"\\uC791\\uC5C5 \\uBAA9\\uB85D\\uC744 \\uBD88\\uB7EC\\uC624\\uB294 \\uC911\\uC785\\uB2C8\\uB2E4...\") : /*#__PURE__*/React.createElement(\"ul\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 92,\n      columnNumber: 25\n    }\n  }, tasks.map(task => /*#__PURE__*/React.createElement(\"li\", {\n    key: task._id,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 94,\n      columnNumber: 33\n    }\n  }, task.name))))));\n}\nexport default TaskPage;","map":{"version":3,"names":["React","useState","useEffect","axios","Navbar","LogoutButton","UserInfo","TaskPage","taskName","setTaskName","tasks","setTasks","error","setError","loading","setLoading","fetchTasks","token","localStorage","getItem","response","get","headers","data","console","addTask","trim","post","name","step","createElement","style","fontFamily","margin","__self","__source","fileName","_jsxFileName","lineNumber","columnNumber","display","justifyContent","marginBottom","marginTop","type","value","onChange","e","target","placeholder","marginRight","onClick","color","map","task","key","_id"],"sources":["/home/ketgintern/Desktop/FMS-AGV-AMR/frontend/src/pages/Task/TaskPage.js"],"sourcesContent":["import React, { useState, useEffect } from 'react';\nimport axios from 'axios';\nimport Navbar from '../../components/Common/Navbar';\nimport LogoutButton from '../../components/Common/LogoutButton';\nimport UserInfo from '../../components/Common/UserInfo';\n\nfunction TaskPage() {\n    const [taskName, setTaskName] = useState(''); // 작업 이름 상태\n    const [tasks, setTasks] = useState([]); // 작업 목록 상태\n    const [error, setError] = useState(''); // 오류 상태\n    const [loading, setLoading] = useState(true); // 로딩 상태\n\n    // 초기 작업 목록 불러오기\n    useEffect(() => {\n        const fetchTasks = async () => {\n            try {\n                const token = localStorage.getItem('token'); // 로컬 스토리지에서 인증 토큰을 가져옵니다.\n                \n                if (!token) {\n                    setError('인증 토큰이 없습니다. 다시 로그인하세요.');\n                    setLoading(false);\n                    return;\n                }\n    \n                const response = await axios.get('http://172.30.1.15:5557/map/steps', {\n                    headers: {\n                        'Authorization': `Bearer ${token}` // Bearer 토큰을 헤더에 추가\n                    }\n                });\n    \n                setTasks(response.data); // 가져온 작업 목록을 상태에 저장\n                setLoading(false); // 로딩 완료\n            } catch (error) {\n                console.error('작업 목록을 불러오는 중 오류가 발생했습니다:', error);\n                setError('작업 목록을 불러오는 중 오류가 발생했습니다.');\n                setLoading(false); // 로딩 완료\n            }\n        };\n    \n        fetchTasks();\n    }, []); // 컴포넌트가 처음 렌더링될 때 한 번만 실행\n    \n\n    // 작업 추가 함수\n    const addTask = async () => {\n        if (taskName.trim() === '') {\n            setError('작업 이름을 입력하세요.');\n            return;\n        }\n    \n        try {\n            const token = localStorage.getItem('token'); // 또는 적절한 토큰 저장소에서 토큰을 가져옴\n            const response = await axios.post('http://172.30.1.15:5557/map/steps', { name: taskName }, {\n                headers: {\n                    'Authorization': `Bearer ${token}` // 인증 토큰 추가\n                }\n            });\n            setTasks([...tasks, response.data.step]); // 새로 추가된 작업을 상태에 추가\n            setTaskName(''); // 입력 필드 초기화\n            setError(''); // 오류 메시지 초기화\n        } catch (error) {\n            setError('작업 추가 중 오류가 발생했습니다.');\n            console.error(error);\n        }\n    };\n\n    return (\n        <div style={{ fontFamily: 'Arial, sans-serif', margin: '20px' }}>\n            <header style={{ display: 'flex', justifyContent: 'space-between', marginBottom: '20px' }}>\n                <UserInfo />\n                <LogoutButton />\n            </header>\n            <div>\n                <Navbar /> {/* 네비게이션바를 먼저 렌더링 */}\n                <div style={{ marginTop: '20px' }}> {/* 여백 추가 */}\n                    <h2>작업 추가</h2>\n                    <input \n                        type=\"text\" \n                        value={taskName} \n                        onChange={(e) => setTaskName(e.target.value)} \n                        placeholder=\"작업 이름을 입력하세요\" \n                        style={{ marginRight: '10px' }}\n                    />\n                    <button onClick={addTask}>추가</button>\n\n                    {error && <p style={{ color: 'red' }}>{error}</p>}\n\n                    <h3>작업 목록</h3>\n                    {loading ? (\n                        <p>작업 목록을 불러오는 중입니다...</p>\n                    ) : (\n                        <ul>\n                            {tasks.map((task) => (\n                                <li key={task._id}>{task.name}</li>\n                            ))}\n                        </ul>\n                    )}\n                </div>\n            </div>\n        </div>\n    );\n}\n\nexport default TaskPage;\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module"}