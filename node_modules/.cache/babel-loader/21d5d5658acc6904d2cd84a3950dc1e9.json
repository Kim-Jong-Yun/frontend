{"ast":null,"code":"var _jsxFileName = \"/home/ketgintern/Desktop/frontend/src/pages/Map/StepList.js\";\nimport React, { useState, useEffect } from 'react';\nimport axios from 'axios';\nimport './StepList.css';\nfunction StepList() {\n  const [taskName, setTaskName] = useState(''); // 스텝 이름 상태\n  const [tasks, setTasks] = useState([]); // 스텝 목록 상태\n  const [error, setError] = useState(''); // 오류 상태\n  const [loading, setLoading] = useState(true); // 로딩 상태\n\n  // 초기 스텝 목록 불러오기\n  useEffect(() => {\n    const fetchTasks = async () => {\n      try {\n        const token = localStorage.getItem('token'); // 로컬 스토리지에서 인증 토큰을 가져옴\n\n        if (!token) {\n          setError('인증 토큰이 없습니다. 다시 로그인하세요.');\n          setLoading(false);\n          return;\n        }\n        const response = await axios.get('http://172.30.1.33:5557/map/steps', {\n          headers: {\n            'Authorization': `Bearer ${token}` // Bearer 토큰을 헤더에 추가\n          }\n        });\n        setTasks(response.data); // 가져온 스텝 목록을 상태에 저장\n        setLoading(false); // 로딩 완료\n      } catch (error) {\n        console.error('스텝 목록을 불러오는 중 오류가 발생했습니다:', error);\n        setError('스텝 목록을 불러오는 중 오류가 발생했습니다.');\n        setLoading(false); // 로딩 완료\n      }\n    };\n    fetchTasks();\n  }, []); // 컴포넌트가 처음 렌더링될 때 한 번만 실행\n\n  // 스텝 제거 함수\n  const removeStep = async stepId => {\n    const confirmRemove = window.confirm('이 스텝을 제거하시겠습니까?');\n    if (!confirmRemove) return;\n    try {\n      const token = localStorage.getItem('token'); // 인증 토큰 가져오기\n      await axios.put('http://172.30.1.33:5557/map/remove-step', {\n        stepId\n      }, {\n        headers: {\n          'Authorization': `Bearer ${token}`,\n          'Content-Type': 'application/json'\n        }\n      });\n\n      // 성공적으로 제거 후, 목록에서 해당 스텝을 제거\n      setTasks(tasks.filter(task => task._id !== stepId));\n    } catch (error) {\n      console.error('스텝 제거 중 오류가 발생했습니다:', error);\n      setError('스텝 제거 중 오류가 발생했습니다.');\n    }\n  };\n\n  // 스텝 추가 함수\n  const addTask = async () => {\n    if (taskName.trim() === '') {\n      setError('스텝 이름을 입력하세요.');\n      return;\n    }\n    try {\n      const token = localStorage.getItem('token'); // 로컬 스토리지에서 인증 토큰을 가져옴\n      const response = await axios.post('http://172.30.1.33:5557/map/steps', {\n        name: taskName\n      }, {\n        headers: {\n          'Authorization': `Bearer ${token}` // 인증 토큰 추가\n        }\n      });\n      setTasks([...tasks, response.data.step]); // 새로 추가된 스텝을 상태에 추가\n      setTaskName(''); // 입력 필드 초기화\n      setError(''); // 오류 메시지 초기화\n    } catch (error) {\n      setError('스텝 추가 중 오류가 발생했습니다.');\n      console.error(error);\n    }\n  };\n  return /*#__PURE__*/React.createElement(\"div\", {\n    className: \"step-list-popup\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 88,\n      columnNumber: 5\n    }\n  }, /*#__PURE__*/React.createElement(\"h2\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 89,\n      columnNumber: 7\n    }\n  }, \"\\uC2A4\\uD15D \\uB9AC\\uC2A4\\uD2B8 \\uAD00\\uB9AC\"), /*#__PURE__*/React.createElement(\"input\", {\n    type: \"text\",\n    value: taskName,\n    onChange: e => setTaskName(e.target.value),\n    placeholder: \"\\uC2A4\\uD15D \\uC774\\uB984\\uC744 \\uC785\\uB825\\uD558\\uC138\\uC694\",\n    style: {\n      marginRight: '10px'\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 90,\n      columnNumber: 7\n    }\n  }), /*#__PURE__*/React.createElement(\"button\", {\n    onClick: addTask,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 97,\n      columnNumber: 7\n    }\n  }, \"\\uCD94\\uAC00\"), error && /*#__PURE__*/React.createElement(\"p\", {\n    style: {\n      color: 'red'\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 99,\n      columnNumber: 17\n    }\n  }, error), /*#__PURE__*/React.createElement(\"h3\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 101,\n      columnNumber: 7\n    }\n  }, \"\\uC2A4\\uD15D \\uBAA9\\uB85D\"), loading ? /*#__PURE__*/React.createElement(\"p\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 103,\n      columnNumber: 9\n    }\n  }, \"\\uC2A4\\uD15D \\uBAA9\\uB85D\\uC744 \\uBD88\\uB7EC\\uC624\\uB294 \\uC911\\uC785\\uB2C8\\uB2E4...\") : /*#__PURE__*/React.createElement(\"ul\", {\n    className: \"step-list-scrollable\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 105,\n      columnNumber: 9\n    }\n  }, tasks.map(task => /*#__PURE__*/React.createElement(\"li\", {\n    key: task._id,\n    className: \"step-item\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 107,\n      columnNumber: 13\n    }\n  }, task.name, /*#__PURE__*/React.createElement(\"span\", {\n    onClick: () => removeStep(task._id),\n    style: {\n      color: 'red',\n      cursor: 'pointer',\n      marginLeft: '10px',\n      fontWeight: 'bold'\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 109,\n      columnNumber: 15\n    }\n  }, \"X\")))));\n}\nexport default StepList;","map":{"version":3,"names":["React","useState","useEffect","axios","StepList","taskName","setTaskName","tasks","setTasks","error","setError","loading","setLoading","fetchTasks","token","localStorage","getItem","response","get","headers","data","console","removeStep","stepId","confirmRemove","window","confirm","put","filter","task","_id","addTask","trim","post","name","step","createElement","className","__self","__source","fileName","_jsxFileName","lineNumber","columnNumber","type","value","onChange","e","target","placeholder","style","marginRight","onClick","color","map","key","cursor","marginLeft","fontWeight"],"sources":["/home/ketgintern/Desktop/frontend/src/pages/Map/StepList.js"],"sourcesContent":["import React, { useState, useEffect } from 'react';\nimport axios from 'axios';\nimport './StepList.css';\n\nfunction StepList() {\n  const [taskName, setTaskName] = useState(''); // 스텝 이름 상태\n  const [tasks, setTasks] = useState([]); // 스텝 목록 상태\n  const [error, setError] = useState(''); // 오류 상태\n  const [loading, setLoading] = useState(true); // 로딩 상태\n\n  // 초기 스텝 목록 불러오기\n  useEffect(() => {\n    const fetchTasks = async () => {\n      try {\n        const token = localStorage.getItem('token'); // 로컬 스토리지에서 인증 토큰을 가져옴\n        \n        if (!token) {\n          setError('인증 토큰이 없습니다. 다시 로그인하세요.');\n          setLoading(false);\n          return;\n        }\n\n        const response = await axios.get('http://172.30.1.33:5557/map/steps', {\n          headers: {\n            'Authorization': `Bearer ${token}` // Bearer 토큰을 헤더에 추가\n          }\n        });\n\n        setTasks(response.data); // 가져온 스텝 목록을 상태에 저장\n        setLoading(false); // 로딩 완료\n      } catch (error) {\n        console.error('스텝 목록을 불러오는 중 오류가 발생했습니다:', error);\n        setError('스텝 목록을 불러오는 중 오류가 발생했습니다.');\n        setLoading(false); // 로딩 완료\n      }\n    };\n\n    fetchTasks();\n  }, []); // 컴포넌트가 처음 렌더링될 때 한 번만 실행\n\n  // 스텝 제거 함수\n  const removeStep = async (stepId) => {\n    const confirmRemove = window.confirm('이 스텝을 제거하시겠습니까?');\n\n    if (!confirmRemove) return;\n\n    try {\n      const token = localStorage.getItem('token'); // 인증 토큰 가져오기\n      await axios.put('http://172.30.1.33:5557/map/remove-step', { stepId }, {\n        headers: {\n          'Authorization': `Bearer ${token}`,\n          'Content-Type': 'application/json'\n        }\n      });\n\n      // 성공적으로 제거 후, 목록에서 해당 스텝을 제거\n      setTasks(tasks.filter((task) => task._id !== stepId));\n    } catch (error) {\n      console.error('스텝 제거 중 오류가 발생했습니다:', error);\n      setError('스텝 제거 중 오류가 발생했습니다.');\n    }\n  };\n\n  // 스텝 추가 함수\n  const addTask = async () => {\n    if (taskName.trim() === '') {\n      setError('스텝 이름을 입력하세요.');\n      return;\n    }\n\n    try {\n      const token = localStorage.getItem('token'); // 로컬 스토리지에서 인증 토큰을 가져옴\n      const response = await axios.post('http://172.30.1.33:5557/map/steps', { name: taskName }, {\n        headers: {\n          'Authorization': `Bearer ${token}` // 인증 토큰 추가\n        }\n      });\n      setTasks([...tasks, response.data.step]); // 새로 추가된 스텝을 상태에 추가\n      setTaskName(''); // 입력 필드 초기화\n      setError(''); // 오류 메시지 초기화\n    } catch (error) {\n      setError('스텝 추가 중 오류가 발생했습니다.');\n      console.error(error);\n    }\n  };\n\n  return (\n    <div className=\"step-list-popup\">\n      <h2>스텝 리스트 관리</h2>\n      <input \n        type=\"text\" \n        value={taskName} \n        onChange={(e) => setTaskName(e.target.value)} \n        placeholder=\"스텝 이름을 입력하세요\" \n        style={{ marginRight: '10px' }}\n      />\n      <button onClick={addTask}>추가</button>\n\n      {error && <p style={{ color: 'red' }}>{error}</p>}\n\n      <h3>스텝 목록</h3>\n      {loading ? (\n        <p>스텝 목록을 불러오는 중입니다...</p>\n      ) : (\n        <ul className=\"step-list-scrollable\">\n          {tasks.map((task) => (\n            <li key={task._id} className=\"step-item\">\n              {task.name}\n              <span \n                onClick={() => removeStep(task._id)} \n                style={{ color: 'red', cursor: 'pointer', marginLeft: '10px', fontWeight: 'bold' }}>\n                X\n              </span>\n            </li>\n          ))}\n        </ul>\n      )}\n    </div>\n  );\n}\n\nexport default StepList;\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module"}