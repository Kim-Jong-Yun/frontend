{"ast":null,"code":"var _jsxFileName = \"/home/ketgintern/Desktop/FMS-AGV-AMR/frontend/src/pages/Map/Mapmanage.js\";\nimport React, { useState, useEffect } from 'react';\nimport axios from 'axios';\nimport { FontAwesomeIcon } from '@fortawesome/react-fontawesome';\nimport Navbar from '../../components/Common/Navbar';\nimport LogoutButton from '../../components/Common/LogoutButton';\nimport UserInfo from '../../components/Common/UserInfo';\nimport './Mapmanage.css';\nimport { faEdit, faPlus } from '@fortawesome/free-solid-svg-icons';\nimport { worldToMap } from '../../utils/coordinateUtils';\nfunction Mapmanage() {\n  const [maps, setMaps] = useState([]);\n  const [selectedMap, setSelectedMap] = useState(null); // 선택된 맵 상태\n  const [editName, setEditName] = useState('');\n  const [editDescription, setEditDescription] = useState('');\n  const [uploadName, setUploadName] = useState('');\n  const [uploadDescription, setUploadDescription] = useState('');\n  const [mapFile, setMapFile] = useState(null);\n  const [yamlFile, setYamlFile] = useState(null);\n  const [mapImage, setMapImage] = useState(null);\n  const [isUploadPopupOpen, setIsUploadPopupOpen] = useState(false); // 업로드 팝업 상태\n  const [isEditPopupOpen, setIsEditPopupOpen] = useState(false); // 수정 팝업 상태\n  const [isCreatingNode, setIsCreatingNode] = useState(false); // 노드 생성 모드\n  const [nodeX, setNodeX] = useState(null); // X 좌표\n  const [nodeY, setNodeY] = useState(null); // Y 좌표\n  const [nodeName, setNodeName] = useState(''); // 노드 이름\n  const [isNodePopupOpen, setIsNodePopupOpen] = useState(false); // 노드 팝업 상태\n  const mapRef = React.useRef(null); // 지도 영역 참조\n  const [nodes, setNodes] = useState([]); // 노드 목록 저장\n\n  useEffect(() => {\n    fetchMaps();\n  }, []);\n  const fetchMaps = async () => {\n    const token = localStorage.getItem('token');\n    if (!token) {\n      alert('No token found, please log in again.');\n      return;\n    }\n    try {\n      const response = await axios.get('http://172.30.1.15:5557/map/maps', {\n        headers: {\n          'Authorization': `Bearer ${token}`\n        }\n      });\n      setMaps(response.data);\n    } catch (error) {\n      console.error('Error fetching maps:', error);\n    }\n  };\n  const handleSelectMap = async map => {\n    setSelectedMap(map); // 맵 선택 상태 업데이트\n    setEditName(map.name);\n    setEditDescription(map.description);\n    fetchNodes(map._id); // 선택된 맵의 노드 불러오기\n\n    const token = localStorage.getItem('token');\n    try {\n      const response = await axios.get(`http://172.30.1.15:5557/map/file/${map._id}`, {\n        headers: {\n          Authorization: `Bearer ${token}`\n        },\n        responseType: 'blob'\n      });\n      const imageUrl = URL.createObjectURL(response.data);\n      setMapImage(imageUrl);\n    } catch (error) {\n      console.error('Error fetching map image:', error);\n    }\n  };\n  const handleDeleteMap = async mapId => {\n    const token = localStorage.getItem('token');\n    if (!token) {\n      alert('No token found, please log in again.');\n      return;\n    }\n    const confirmDelete = window.confirm('Are you sure you want to delete this map?');\n    if (!confirmDelete) return;\n    try {\n      await axios.put(`http://172.30.1.15:5557/map/delete/${mapId}`, {}, {\n        headers: {\n          'Authorization': `Bearer ${token}`\n        }\n      });\n      alert('Map deleted successfully');\n      fetchMaps();\n      if (selectedMap && selectedMap._id === mapId) {\n        setSelectedMap(null); // 선택된 맵을 삭제한 경우 초기화\n      }\n    } catch (error) {\n      console.error('Error deleting map:', error);\n      alert('Error deleting map');\n    }\n  };\n  const handleFileChange = e => {\n    setMapFile(e.target.files[0]);\n  };\n  const handleYamlFileChange = e => {\n    setYamlFile(e.target.files[0]);\n  };\n  const handleUpdateMap = async e => {\n    e.preventDefault();\n    if (editName.length < 2) {\n      alert('Map name must be at least 2 characters long.');\n      return;\n    }\n    const token = localStorage.getItem('token');\n    if (!token) {\n      alert('No token found, please log in again.');\n      return;\n    }\n    try {\n      await axios.put(`http://172.30.1.15:5557/map/update/${selectedMap._id}`, {\n        name: editName,\n        description: editDescription\n      }, {\n        headers: {\n          'Authorization': `Bearer ${token}`,\n          'Content-Type': 'application/json'\n        }\n      });\n      alert('Map updated successfully');\n      setIsEditPopupOpen(false); // 수정 후 팝업 닫기\n      fetchMaps();\n    } catch (error) {\n      console.error('Error updating map:', error);\n    }\n  };\n  const handleUploadMap = async e => {\n    e.preventDefault();\n    if (uploadName.length < 2) {\n      alert('Map name must be at least 2 characters long.');\n      return;\n    }\n    const formData = new FormData();\n    formData.append('name', uploadName);\n    formData.append('description', uploadDescription);\n    formData.append('file', mapFile);\n    formData.append('yaml', yamlFile);\n    const token = localStorage.getItem('token');\n    if (!token) {\n      alert('No token found, please log in again.');\n      return;\n    }\n    try {\n      await axios.post('http://172.30.1.15:5557/map/upload', formData, {\n        headers: {\n          'Authorization': `Bearer ${token}`,\n          'Content-Type': 'multipart/form-data'\n        }\n      });\n      alert('Map uploaded successfully');\n      setIsUploadPopupOpen(false); // 업로드 후 팝업 닫기\n      fetchMaps();\n    } catch (error) {\n      console.error('Error uploading map:', error);\n    }\n  };\n  const openEditPopup = map => {\n    setSelectedMap(map);\n    setEditName(map.name);\n    setEditDescription(map.description);\n    setIsEditPopupOpen(true); // 수정 팝업 열기\n  };\n  const handleCreateNode = () => {\n    if (!selectedMap) {\n      alert('Please select a map to create a node.');\n      return;\n    }\n    alert(`Creating a new node for map: ${selectedMap.name}`);\n  };\n  // 노드 생성 모드 시작\n  const handleCreateNodeMode = () => {\n    if (!selectedMap) {\n      alert('Please select a map first.');\n      return;\n    }\n    setIsCreatingNode(true);\n    document.body.style.cursor = 'crosshair'; // 마우스 커서 십자가 모양 변경\n  };\n\n  // 지도 클릭 시 좌표를 얻고 팝업 열기\n  const handleMapClick = e => {\n    if (!isCreatingNode || !mapRef.current) return;\n    const img = mapRef.current.querySelector('img'); // 이미지 요소 가져오기\n    const rect = img.getBoundingClientRect(); // 이미지의 위치와 크기 계산\n\n    // 클릭한 좌표가 이미지 영역 내에 있는지 확인\n    const isInsideImage = e.clientX >= rect.left && e.clientX <= rect.right && e.clientY >= rect.top && e.clientY <= rect.bottom;\n    if (!isInsideImage) {\n      alert('노드는 지도 이미지 안에만 생성할 수 있습니다.');\n      return;\n    }\n    const x = e.clientX - rect.left; // 이미지 내 X 좌표 계산\n    const y = e.clientY - rect.top; // 이미지 내 Y 좌표 계산\n\n    setNodeX(x);\n    setNodeY(y);\n    setIsCreatingNode(false);\n    setIsNodePopupOpen(true); // 팝업 열기\n    document.body.style.cursor = 'default'; // 커서 복구\n  };\n  const handleSubmitNode = async () => {\n    const token = localStorage.getItem('token');\n    if (!token) {\n      alert('No token found, please log in again.');\n      return;\n    }\n    try {\n      await axios.post('http://172.30.1.15:5557/map/nodes', {\n        name: nodeName,\n        x: nodeX,\n        y: nodeY,\n        mapId: selectedMap._id\n      }, {\n        headers: {\n          Authorization: `Bearer ${token}`\n        }\n      });\n      alert('Node created successfully.');\n      setIsNodePopupOpen(false);\n      setNodeName(''); // 입력 필드 초기화\n      fetchNodes(selectedMap._id); // 노드 목록 갱신\n    } catch (error) {\n      console.error('Error creating node:', error);\n      alert('Failed to create node.');\n    }\n  };\n  const fetchNodes = async mapId => {\n    try {\n      const response = await axios.get(`http://172.30.1.15:5557/map/nodes/${mapId}`);\n      setNodes(response.data); // 노드 리스트 상태 업데이트\n    } catch (error) {\n      console.error('Error fetching nodes:', error);\n    }\n  };\n  return /*#__PURE__*/React.createElement(\"div\", {\n    className: \"map-management-page\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 270,\n      columnNumber: 3\n    }\n  }, /*#__PURE__*/React.createElement(\"header\", {\n    className: \"map-management-header\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 272,\n      columnNumber: 5\n    }\n  }, /*#__PURE__*/React.createElement(UserInfo, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 273,\n      columnNumber: 7\n    }\n  }), /*#__PURE__*/React.createElement(LogoutButton, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 274,\n      columnNumber: 7\n    }\n  })), /*#__PURE__*/React.createElement(Navbar, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 276,\n      columnNumber: 5\n    }\n  }), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"toolbar\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 279,\n      columnNumber: 5\n    }\n  }, /*#__PURE__*/React.createElement(\"button\", {\n    onClick: handleCreateNodeMode,\n    className: \"create-node-button\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 280,\n      columnNumber: 7\n    }\n  }, /*#__PURE__*/React.createElement(FontAwesomeIcon, {\n    icon: faPlus,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 281,\n      columnNumber: 9\n    }\n  }), \" Create Node\")), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"map-management-content\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 286,\n      columnNumber: 5\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"map-list-container\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 288,\n      columnNumber: 7\n    }\n  }, /*#__PURE__*/React.createElement(\"h2\", {\n    className: \"map-list-header\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 289,\n      columnNumber: 9\n    }\n  }, \"Map List\", /*#__PURE__*/React.createElement(\"button\", {\n    onClick: () => setIsUploadPopupOpen(true),\n    className: \"add-map-button\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 291,\n      columnNumber: 11\n    }\n  }, \"+\")), /*#__PURE__*/React.createElement(\"ul\", {\n    className: \"map-list\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 298,\n      columnNumber: 9\n    }\n  }, maps.map(map => /*#__PURE__*/React.createElement(\"li\", {\n    key: map._id,\n    className: `map-list-item ${selectedMap && selectedMap._id === map._id ? 'selected-map' : ''}`,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 300,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(\"span\", {\n    onClick: () => handleSelectMap(map),\n    className: \"map-list-item-name\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 306,\n      columnNumber: 15\n    }\n  }, map.name), /*#__PURE__*/React.createElement(\"button\", {\n    onClick: () => openEditPopup(map),\n    className: \"edit-map-button\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 312,\n      columnNumber: 15\n    }\n  }, /*#__PURE__*/React.createElement(FontAwesomeIcon, {\n    icon: faEdit,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 316,\n      columnNumber: 17\n    }\n  })), /*#__PURE__*/React.createElement(\"button\", {\n    onClick: () => handleDeleteMap(map._id),\n    className: \"delete-map-button\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 318,\n      columnNumber: 15\n    }\n  }, \"\\xD7\")))), selectedMap && /*#__PURE__*/React.createElement(\"div\", {\n    className: \"map-description\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 329,\n      columnNumber: 11\n    }\n  }, /*#__PURE__*/React.createElement(\"h3\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 330,\n      columnNumber: 13\n    }\n  }, \"Map Description\"), /*#__PURE__*/React.createElement(\"p\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 331,\n      columnNumber: 13\n    }\n  }, selectedMap.description))), /*#__PURE__*/React.createElement(\"div\", {\n    ref: mapRef,\n    className: \"map-image-container\",\n    onClick: handleMapClick,\n    style: {\n      width: '800px',\n      height: '600px',\n      position: 'relative'\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 337,\n      columnNumber: 5\n    }\n  }, mapImage ? /*#__PURE__*/React.createElement(\"img\", {\n    src: mapImage,\n    alt: \"Selected Map\",\n    className: \"map-image\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 344,\n      columnNumber: 11\n    }\n  }) : /*#__PURE__*/React.createElement(\"p\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 346,\n      columnNumber: 11\n    }\n  }, \"Select a map to view its image\"), nodes.map(node => /*#__PURE__*/React.createElement(\"div\", {\n    key: node._id,\n    className: \"node\",\n    style: {\n      position: 'absolute',\n      top: `${node.y}px`,\n      left: `${node.x}px`,\n      width: '10px',\n      height: '10px',\n      backgroundColor: 'red',\n      borderRadius: '50%',\n      transform: 'translate(-50%, -50%)'\n    },\n    title: node.name // 마우스 오버 시 노드 이름 표시\n    ,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 351,\n      columnNumber: 11\n    }\n  })))), isNodePopupOpen && /*#__PURE__*/React.createElement(\"div\", {\n    className: \"popup-container\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 374,\n      columnNumber: 7\n    }\n  }, /*#__PURE__*/React.createElement(\"h3\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 375,\n      columnNumber: 9\n    }\n  }, \"Create Node\"), /*#__PURE__*/React.createElement(\"p\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 376,\n      columnNumber: 9\n    }\n  }, \"X: \", nodeX, \", Y: \", nodeY), /*#__PURE__*/React.createElement(\"input\", {\n    type: \"text\",\n    value: nodeName,\n    onChange: e => setNodeName(e.target.value),\n    placeholder: \"Enter node name\",\n    className: \"popup-input\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 377,\n      columnNumber: 9\n    }\n  }), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"popup-button-container\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 384,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(\"button\", {\n    onClick: handleSubmitNode,\n    className: \"popup-submit-button\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 385,\n      columnNumber: 11\n    }\n  }, \"Create\"), /*#__PURE__*/React.createElement(\"button\", {\n    onClick: () => setIsNodePopupOpen(false),\n    className: \"popup-cancel-button\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 388,\n      columnNumber: 11\n    }\n  }, \"Cancel\"))), isUploadPopupOpen && /*#__PURE__*/React.createElement(\"div\", {\n    className: \"popup-container\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 400,\n      columnNumber: 7\n    }\n  }, /*#__PURE__*/React.createElement(\"h3\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 401,\n      columnNumber: 9\n    }\n  }, \"Upload Map\"), /*#__PURE__*/React.createElement(\"form\", {\n    onSubmit: handleUploadMap,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 402,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(\"input\", {\n    type: \"text\",\n    value: uploadName,\n    onChange: e => setUploadName(e.target.value),\n    placeholder: \"Map Name\",\n    required: true,\n    className: \"popup-input\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 403,\n      columnNumber: 11\n    }\n  }), /*#__PURE__*/React.createElement(\"textarea\", {\n    value: uploadDescription,\n    onChange: e => setUploadDescription(e.target.value),\n    placeholder: \"Map Description\",\n    required: true,\n    className: \"popup-textarea\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 411,\n      columnNumber: 11\n    }\n  }), /*#__PURE__*/React.createElement(\"label\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 418,\n      columnNumber: 11\n    }\n  }, \"Map File (.pgm, .png, .jpg)\"), /*#__PURE__*/React.createElement(\"input\", {\n    type: \"file\",\n    accept: \".pgm,.png,.jpg\",\n    onChange: handleFileChange,\n    required: true,\n    className: \"popup-file-input\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 419,\n      columnNumber: 11\n    }\n  }), /*#__PURE__*/React.createElement(\"label\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 426,\n      columnNumber: 11\n    }\n  }, \"YAML File (.yaml)\"), /*#__PURE__*/React.createElement(\"input\", {\n    type: \"file\",\n    accept: \".yaml\",\n    onChange: handleYamlFileChange,\n    required: true,\n    className: \"popup-file-input\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 427,\n      columnNumber: 11\n    }\n  }), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"popup-button-container\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 434,\n      columnNumber: 11\n    }\n  }, /*#__PURE__*/React.createElement(\"button\", {\n    type: \"submit\",\n    className: \"popup-submit-button\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 435,\n      columnNumber: 13\n    }\n  }, \"Upload\"), /*#__PURE__*/React.createElement(\"button\", {\n    type: \"button\",\n    onClick: () => setIsUploadPopupOpen(false),\n    className: \"popup-cancel-button\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 438,\n      columnNumber: 13\n    }\n  }, \"Cancel\")))), isEditPopupOpen && /*#__PURE__*/React.createElement(\"div\", {\n    className: \"popup-container\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 452,\n      columnNumber: 7\n    }\n  }, /*#__PURE__*/React.createElement(\"h3\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 453,\n      columnNumber: 9\n    }\n  }, \"Edit Map\"), /*#__PURE__*/React.createElement(\"form\", {\n    onSubmit: handleUpdateMap,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 454,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(\"input\", {\n    type: \"text\",\n    value: editName,\n    onChange: e => setEditName(e.target.value),\n    placeholder: \"Map Name\",\n    required: true,\n    className: \"popup-input\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 455,\n      columnNumber: 11\n    }\n  }), /*#__PURE__*/React.createElement(\"textarea\", {\n    value: editDescription,\n    onChange: e => setEditDescription(e.target.value),\n    placeholder: \"Map Description\",\n    required: true,\n    className: \"popup-textarea\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 463,\n      columnNumber: 11\n    }\n  }), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"popup-button-container\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 470,\n      columnNumber: 11\n    }\n  }, /*#__PURE__*/React.createElement(\"button\", {\n    type: \"submit\",\n    className: \"popup-submit-button\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 471,\n      columnNumber: 13\n    }\n  }, \"Update\"), /*#__PURE__*/React.createElement(\"button\", {\n    type: \"button\",\n    onClick: () => setIsEditPopupOpen(false),\n    className: \"popup-cancel-button\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 474,\n      columnNumber: 13\n    }\n  }, \"Cancel\")))));\n}\nexport default Mapmanage;","map":{"version":3,"names":["React","useState","useEffect","axios","FontAwesomeIcon","Navbar","LogoutButton","UserInfo","faEdit","faPlus","worldToMap","Mapmanage","maps","setMaps","selectedMap","setSelectedMap","editName","setEditName","editDescription","setEditDescription","uploadName","setUploadName","uploadDescription","setUploadDescription","mapFile","setMapFile","yamlFile","setYamlFile","mapImage","setMapImage","isUploadPopupOpen","setIsUploadPopupOpen","isEditPopupOpen","setIsEditPopupOpen","isCreatingNode","setIsCreatingNode","nodeX","setNodeX","nodeY","setNodeY","nodeName","setNodeName","isNodePopupOpen","setIsNodePopupOpen","mapRef","useRef","nodes","setNodes","fetchMaps","token","localStorage","getItem","alert","response","get","headers","data","error","console","handleSelectMap","map","name","description","fetchNodes","_id","Authorization","responseType","imageUrl","URL","createObjectURL","handleDeleteMap","mapId","confirmDelete","window","confirm","put","handleFileChange","e","target","files","handleYamlFileChange","handleUpdateMap","preventDefault","length","handleUploadMap","formData","FormData","append","post","openEditPopup","handleCreateNode","handleCreateNodeMode","document","body","style","cursor","handleMapClick","current","img","querySelector","rect","getBoundingClientRect","isInsideImage","clientX","left","right","clientY","top","bottom","x","y","handleSubmitNode","createElement","className","__self","__source","fileName","_jsxFileName","lineNumber","columnNumber","onClick","icon","key","ref","width","height","position","src","alt","node","backgroundColor","borderRadius","transform","title","type","value","onChange","placeholder","onSubmit","required","accept"],"sources":["/home/ketgintern/Desktop/FMS-AGV-AMR/frontend/src/pages/Map/Mapmanage.js"],"sourcesContent":["import React, { useState, useEffect } from 'react';\nimport axios from 'axios';\nimport { FontAwesomeIcon } from '@fortawesome/react-fontawesome';\n\nimport Navbar from '../../components/Common/Navbar';\nimport LogoutButton from '../../components/Common/LogoutButton';\nimport UserInfo from '../../components/Common/UserInfo';\nimport './Mapmanage.css';\nimport { faEdit, faPlus } from '@fortawesome/free-solid-svg-icons';\nimport { worldToMap } from '../../utils/coordinateUtils';\n\nfunction Mapmanage() {\n  const [maps, setMaps] = useState([]);\n  const [selectedMap, setSelectedMap] = useState(null); // 선택된 맵 상태\n  const [editName, setEditName] = useState('');\n  const [editDescription, setEditDescription] = useState('');\n  const [uploadName, setUploadName] = useState('');\n  const [uploadDescription, setUploadDescription] = useState('');\n  const [mapFile, setMapFile] = useState(null);\n  const [yamlFile, setYamlFile] = useState(null);\n  const [mapImage, setMapImage] = useState(null);\n  const [isUploadPopupOpen, setIsUploadPopupOpen] = useState(false); // 업로드 팝업 상태\n  const [isEditPopupOpen, setIsEditPopupOpen] = useState(false); // 수정 팝업 상태\n  const [isCreatingNode, setIsCreatingNode] = useState(false); // 노드 생성 모드\n  const [nodeX, setNodeX] = useState(null); // X 좌표\n  const [nodeY, setNodeY] = useState(null); // Y 좌표\n  const [nodeName, setNodeName] = useState(''); // 노드 이름\n  const [isNodePopupOpen, setIsNodePopupOpen] = useState(false); // 노드 팝업 상태\n  const mapRef = React.useRef(null); // 지도 영역 참조\n  const [nodes, setNodes] = useState([]); // 노드 목록 저장\n  \n\n  useEffect(() => {\n    fetchMaps();\n  }, []);\n\n  const fetchMaps = async () => {\n    const token = localStorage.getItem('token');\n\n    if (!token) {\n      alert('No token found, please log in again.');\n      return;\n    }\n\n    try {\n      const response = await axios.get('http://172.30.1.15:5557/map/maps', {\n        headers: {\n          'Authorization': `Bearer ${token}`\n        }\n      });\n      setMaps(response.data);\n    } catch (error) {\n      console.error('Error fetching maps:', error);\n    }\n  };\n\n  const handleSelectMap = async (map) => {\n    setSelectedMap(map); // 맵 선택 상태 업데이트\n    setEditName(map.name);\n    setEditDescription(map.description);\n    fetchNodes(map._id); // 선택된 맵의 노드 불러오기\n\n\n    const token = localStorage.getItem('token');\n    try {\n      const response = await axios.get(`http://172.30.1.15:5557/map/file/${map._id}`, {\n        headers: { Authorization: `Bearer ${token}` },\n        responseType: 'blob',\n      });\n      const imageUrl = URL.createObjectURL(response.data);\n      setMapImage(imageUrl);\n    } catch (error) {\n      console.error('Error fetching map image:', error);\n    }\n  };\n\n  const handleDeleteMap = async (mapId) => {\n    const token = localStorage.getItem('token');\n\n    if (!token) {\n      alert('No token found, please log in again.');\n      return;\n    }\n\n    const confirmDelete = window.confirm('Are you sure you want to delete this map?');\n    if (!confirmDelete) return;\n\n    try {\n      await axios.put(`http://172.30.1.15:5557/map/delete/${mapId}`, {}, {\n        headers: {\n          'Authorization': `Bearer ${token}`\n        }\n      });\n      alert('Map deleted successfully');\n      fetchMaps();\n      if (selectedMap && selectedMap._id === mapId) {\n        setSelectedMap(null); // 선택된 맵을 삭제한 경우 초기화\n      }\n    } catch (error) {\n      console.error('Error deleting map:', error);\n      alert('Error deleting map');\n    }\n  };\n\n  const handleFileChange = (e) => {\n    setMapFile(e.target.files[0]);\n  };\n\n  const handleYamlFileChange = (e) => {\n    setYamlFile(e.target.files[0]);\n  };\n\n  const handleUpdateMap = async (e) => {\n    e.preventDefault();\n\n    if (editName.length < 2) {\n      alert('Map name must be at least 2 characters long.');\n      return;\n    }\n\n    const token = localStorage.getItem('token');\n\n    if (!token) {\n      alert('No token found, please log in again.');\n      return;\n    }\n\n    try {\n      await axios.put(`http://172.30.1.15:5557/map/update/${selectedMap._id}`, {\n        name: editName,\n        description: editDescription,\n      }, {\n        headers: {\n          'Authorization': `Bearer ${token}`,\n          'Content-Type': 'application/json'\n        }\n      });\n      alert('Map updated successfully');\n      setIsEditPopupOpen(false); // 수정 후 팝업 닫기\n      fetchMaps();\n    } catch (error) {\n      console.error('Error updating map:', error);\n    }\n  };\n\n  const handleUploadMap = async (e) => {\n    e.preventDefault();\n\n    if (uploadName.length < 2) {\n      alert('Map name must be at least 2 characters long.');\n      return;\n    }\n\n    const formData = new FormData();\n    formData.append('name', uploadName);\n    formData.append('description', uploadDescription);\n    formData.append('file', mapFile);\n    formData.append('yaml', yamlFile);\n\n    const token = localStorage.getItem('token');\n\n    if (!token) {\n      alert('No token found, please log in again.');\n      return;\n    }\n\n    try {\n      await axios.post('http://172.30.1.15:5557/map/upload', formData, {\n        headers: {\n          'Authorization': `Bearer ${token}`,\n          'Content-Type': 'multipart/form-data'\n        }\n      });\n      alert('Map uploaded successfully');\n      setIsUploadPopupOpen(false); // 업로드 후 팝업 닫기\n      fetchMaps();\n    } catch (error) {\n      console.error('Error uploading map:', error);\n    }\n  };\n\n  const openEditPopup = (map) => {\n    setSelectedMap(map);\n    setEditName(map.name);\n    setEditDescription(map.description);\n    setIsEditPopupOpen(true); // 수정 팝업 열기\n  };\n  const handleCreateNode = () => {\n    if (!selectedMap) {\n      alert('Please select a map to create a node.');\n      return;\n    }\n    alert(`Creating a new node for map: ${selectedMap.name}`);\n  };\n  // 노드 생성 모드 시작\nconst handleCreateNodeMode = () => {\n  if (!selectedMap) {\n    alert('Please select a map first.');\n    return;\n  }\n  setIsCreatingNode(true);\n  document.body.style.cursor = 'crosshair'; // 마우스 커서 십자가 모양 변경\n};\n\n// 지도 클릭 시 좌표를 얻고 팝업 열기\nconst handleMapClick = (e) => {\n  if (!isCreatingNode || !mapRef.current) return;\n\n  const img = mapRef.current.querySelector('img'); // 이미지 요소 가져오기\n  const rect = img.getBoundingClientRect(); // 이미지의 위치와 크기 계산\n\n  // 클릭한 좌표가 이미지 영역 내에 있는지 확인\n  const isInsideImage = \n    e.clientX >= rect.left &&\n    e.clientX <= rect.right &&\n    e.clientY >= rect.top &&\n    e.clientY <= rect.bottom;\n\n  if (!isInsideImage) {\n    alert('노드는 지도 이미지 안에만 생성할 수 있습니다.');\n    return;\n  }\n\n  const x = e.clientX - rect.left; // 이미지 내 X 좌표 계산\n  const y = e.clientY - rect.top;  // 이미지 내 Y 좌표 계산\n\n  setNodeX(x);\n  setNodeY(y);\n  setIsCreatingNode(false);\n  setIsNodePopupOpen(true); // 팝업 열기\n  document.body.style.cursor = 'default'; // 커서 복구\n};\nconst handleSubmitNode = async () => {\n  const token = localStorage.getItem('token');\n  if (!token) {\n    alert('No token found, please log in again.');\n    return;\n  }\n\n  try {\n    await axios.post('http://172.30.1.15:5557/map/nodes', {\n      name: nodeName,\n      x: nodeX,\n      y: nodeY,\n      mapId: selectedMap._id,\n    }, {\n      headers: { Authorization: `Bearer ${token}` },\n    });\n    alert('Node created successfully.');\n    setIsNodePopupOpen(false);\n    setNodeName(''); // 입력 필드 초기화\n    fetchNodes(selectedMap._id); // 노드 목록 갱신\n  } catch (error) {\n    console.error('Error creating node:', error);\n    alert('Failed to create node.');\n  }\n};\nconst fetchNodes = async (mapId) => {\n  try {\n    const response = await axios.get(`http://172.30.1.15:5557/map/nodes/${mapId}`);\n    setNodes(response.data); // 노드 리스트 상태 업데이트\n  } catch (error) {\n    console.error('Error fetching nodes:', error);\n  }\n};\n\n\n\nreturn (\n  <div className=\"map-management-page\">\n    {/* 상단 네비게이션 바 */}\n    <header className=\"map-management-header\">\n      <UserInfo />\n      <LogoutButton />\n    </header>\n    <Navbar />\n\n    {/* 툴바: 네비게이션 아래에 위치 */}\n    <div className=\"toolbar\">\n      <button onClick={handleCreateNodeMode} className=\"create-node-button\">\n        <FontAwesomeIcon icon={faPlus} /> Create Node\n      </button>\n    </div>\n\n    {/* 맵 리스트와 이미지 컨텐츠 */}\n    <div className=\"map-management-content\">\n      {/* 맵 리스트 컨테이너 */}\n      <div className=\"map-list-container\">\n        <h2 className=\"map-list-header\">\n          Map List\n          <button\n            onClick={() => setIsUploadPopupOpen(true)}\n            className=\"add-map-button\"\n          >\n            +\n          </button>\n        </h2>\n        <ul className=\"map-list\">\n          {maps.map((map) => (\n            <li\n              key={map._id}\n              className={`map-list-item ${\n                selectedMap && selectedMap._id === map._id ? 'selected-map' : ''\n              }`}\n            >\n              <span\n                onClick={() => handleSelectMap(map)}\n                className=\"map-list-item-name\"\n              >\n                {map.name}\n              </span>\n              <button\n                onClick={() => openEditPopup(map)}\n                className=\"edit-map-button\"\n              >\n                <FontAwesomeIcon icon={faEdit} />\n              </button>\n              <button\n                onClick={() => handleDeleteMap(map._id)}\n                className=\"delete-map-button\"\n              >\n                &times;\n              </button>\n            </li>\n          ))}\n        </ul>\n\n        {selectedMap && (\n          <div className=\"map-description\">\n            <h3>Map Description</h3>\n            <p>{selectedMap.description}</p>\n          </div>\n        )}\n      </div>\n\n    {/* 지도 이미지와 노드 렌더링 영역 */}\n    <div\n        ref={mapRef}\n        className=\"map-image-container\"\n        onClick={handleMapClick}\n        style={{ width: '800px', height: '600px', position: 'relative' }}\n      >\n        {mapImage ? (\n          <img src={mapImage} alt=\"Selected Map\" className=\"map-image\" />\n        ) : (\n          <p>Select a map to view its image</p>\n        )}\n\n        {/* 노드 렌더링 */}\n        {nodes.map((node) => (\n          <div\n            key={node._id}\n            className=\"node\"\n            style={{\n              position: 'absolute',\n              top: `${node.y}px`,\n              left: `${node.x}px`,\n              width: '10px',\n              height: '10px',\n              backgroundColor: 'red',\n              borderRadius: '50%',\n              transform: 'translate(-50%, -50%)',\n            }}\n            title={node.name} // 마우스 오버 시 노드 이름 표시\n          />\n        ))}\n        \n      </div>\n      \n    </div>\n\n    {/* Node 생성 팝업 */}\n    {isNodePopupOpen && (\n      <div className=\"popup-container\">\n        <h3>Create Node</h3>\n        <p>X: {nodeX}, Y: {nodeY}</p>\n        <input\n          type=\"text\"\n          value={nodeName}\n          onChange={(e) => setNodeName(e.target.value)}\n          placeholder=\"Enter node name\"\n          className=\"popup-input\"\n        />\n        <div className=\"popup-button-container\">\n          <button onClick={handleSubmitNode} className=\"popup-submit-button\">\n            Create\n          </button>\n          <button\n            onClick={() => setIsNodePopupOpen(false)}\n            className=\"popup-cancel-button\"\n          >\n            Cancel\n          </button>\n        </div>\n      </div>\n    )}\n\n    {/* Map Upload Popup */}\n    {isUploadPopupOpen && (\n      <div className=\"popup-container\">\n        <h3>Upload Map</h3>\n        <form onSubmit={handleUploadMap}>\n          <input\n            type=\"text\"\n            value={uploadName}\n            onChange={(e) => setUploadName(e.target.value)}\n            placeholder=\"Map Name\"\n            required\n            className=\"popup-input\"\n          />\n          <textarea\n            value={uploadDescription}\n            onChange={(e) => setUploadDescription(e.target.value)}\n            placeholder=\"Map Description\"\n            required\n            className=\"popup-textarea\"\n          />\n          <label>Map File (.pgm, .png, .jpg)</label>\n          <input\n            type=\"file\"\n            accept=\".pgm,.png,.jpg\"\n            onChange={handleFileChange}\n            required\n            className=\"popup-file-input\"\n          />\n          <label>YAML File (.yaml)</label>\n          <input\n            type=\"file\"\n            accept=\".yaml\"\n            onChange={handleYamlFileChange}\n            required\n            className=\"popup-file-input\"\n          />\n          <div className=\"popup-button-container\">\n            <button type=\"submit\" className=\"popup-submit-button\">\n              Upload\n            </button>\n            <button\n              type=\"button\"\n              onClick={() => setIsUploadPopupOpen(false)}\n              className=\"popup-cancel-button\"\n            >\n              Cancel\n            </button>\n          </div>\n        </form>\n      </div>\n    )}\n\n    {/* Edit Map Popup */}\n    {isEditPopupOpen && (\n      <div className=\"popup-container\">\n        <h3>Edit Map</h3>\n        <form onSubmit={handleUpdateMap}>\n          <input\n            type=\"text\"\n            value={editName}\n            onChange={(e) => setEditName(e.target.value)}\n            placeholder=\"Map Name\"\n            required\n            className=\"popup-input\"\n          />\n          <textarea\n            value={editDescription}\n            onChange={(e) => setEditDescription(e.target.value)}\n            placeholder=\"Map Description\"\n            required\n            className=\"popup-textarea\"\n          />\n          <div className=\"popup-button-container\">\n            <button type=\"submit\" className=\"popup-submit-button\">\n              Update\n            </button>\n            <button\n              type=\"button\"\n              onClick={() => setIsEditPopupOpen(false)}\n              className=\"popup-cancel-button\"\n            >\n              Cancel\n            </button>\n          </div>\n        </form>\n      </div>\n    )}\n  </div>\n);\n  \n}\n\nexport default Mapmanage;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module"}