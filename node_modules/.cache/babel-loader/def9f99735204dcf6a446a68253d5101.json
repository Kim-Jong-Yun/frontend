{"ast":null,"code":"var _jsxFileName = \"/home/ketgintern/Desktop/FMS-AGV-AMR/frontend/src/pages/Robot/RobotEditPage.js\";\nimport React, { useState, useEffect, useCallback } from 'react';\nimport Navbar from '../../components/Common/Navbar';\nimport LogoutButton from '../../components/Common/LogoutButton';\nimport UserInfo from '../../components/Common/UserInfo';\nimport axios from 'axios';\nimport './RobotEditPage.css';\nimport RobotRegisterPage from './RobotRegisterPage';\n\n// 환경 변수로 API URL 관리 (필요 시 .env 파일에 추가)\nconst API_BASE_URL = process.env.REACT_APP_API_BASE_URL || 'http://172.30.1.33:5559/robot';\nfunction RobotEditPage() {\n  var _selectedRobot$status, _selectedRobot$status2;\n  const [robots, setRobots] = useState([]);\n  const [selectedRobot, setSelectedRobot] = useState(null);\n  const [name, setName] = useState('');\n  const [description, setDescription] = useState('');\n  const [ip, setIp] = useState(''); // IP 주소 상태 추가\n  const [active, setActive] = useState(1);\n  const [showRegisterModal, setShowRegisterModal] = useState(false);\n  const [workflowQueue, setWorkflowQueue] = useState([]); // 작업 큐 상태 추가\n  const [selectedRobotId, setSelectedRobotId] = useState(null); // 선택한 로봇의 _id 상태 추가\n  const [pendingWorkflowDeletions, setPendingWorkflowDeletions] = useState([]); // 워크플로우 삭제 대기 목록\n  const [isSaving, setIsSaving] = useState(false); // Save 버튼 상태 관리\n  const [isStarting, setIsStarting] = useState(false); // \"작동\" 버튼 상태 관리\n  const [loading, setLoading] = useState(false); // 로딩 상태 추가\n\n  // 임시 데이터 추가: ROS 토픽과 맵 이름\n  const [rosTopics, setRosTopics] = useState(['/Carring_AMR01/TaskPoints', '/Carring_AMR01/Act', '/Carring_AMR01/UsingWay', '/Carring_AMR01/warining', '/battery_limit', '/speed_limit', '/amcl_pose', '/robot_status']); // 임시 ROS 토픽 데이터\n  const [mapName, setMapName] = useState('Factory_Map'); // 임시 맵 이름\n\n  const token = localStorage.getItem('token');\n\n  // API 요청 헤더 설정\n  const axiosConfig = {\n    headers: {\n      'Authorization': `Bearer ${token}`,\n      'Content-Type': 'application/json'\n    }\n  };\n\n  // 로봇 데이터 가져오기\n  const fetchRobots = useCallback(async (preserveSelectedRobotId = null) => {\n    if (!token) {\n      alert('토큰이 없습니다. 다시 로그인해주세요.');\n      return;\n    }\n    setLoading(true);\n    try {\n      const response = await axios.get(`${API_BASE_URL}/robots`, {\n        headers: {\n          'Authorization': `Bearer ${token}`\n        }\n      });\n      setRobots(response.data);\n      let robotToSelect;\n      if (preserveSelectedRobotId) {\n        robotToSelect = response.data.find(robot => robot._id === preserveSelectedRobotId);\n      } else if (response.data.length > 0) {\n        robotToSelect = response.data[0];\n      }\n      if (robotToSelect) {\n        handleSelectRobot(robotToSelect);\n      }\n    } catch (error) {\n      console.error('로봇을 가져오는 중 오류 발생:', error);\n      alert('로봇을 가져오는 중 오류가 발생했습니다.');\n    } finally {\n      setLoading(false);\n    }\n  }, [API_BASE_URL, token]);\n\n  // 워크플로우 큐 가져오기\n  const fetchWorkflowQueue = useCallback(async robotId => {\n    if (!token) {\n      alert('토큰이 없습니다. 다시 로그인해주세요.');\n      return;\n    }\n    try {\n      const response = await axios.get(`${API_BASE_URL}/robot/${robotId}`, {\n        headers: {\n          'Authorization': `Bearer ${token}`\n        }\n      });\n\n      // API 응답 구조 확인 (필요 시 수정)\n      console.log('워크플로우 API 응답:', response.data);\n\n      // 예시: response.data.robot.currentWorkflow\n      const robotData = response.data.robot || response.data; // API 응답에 따라 조정\n\n      let workflows = robotData.workflows || [];\n\n      // \"In Progress\" 상태인 워크플로우 찾기 (단일 워크플로우 가정)\n      const inProgressWorkflow = workflows.find(wf => wf.status === 'In Progress');\n      if (inProgressWorkflow) {\n        // \"In Progress\" 워크플로우를 배열에서 제거\n        workflows = workflows.filter(wf => wf._id !== inProgressWorkflow._id);\n        // \"In Progress\" 워크플로우를 첫 번째에 배치\n        setWorkflowQueue([inProgressWorkflow, ...workflows]);\n      } else {\n        // \"In Progress\" 워크플로우가 없을 경우, 첫 번째 칸을 공란으로 설정\n        const placeholder = {\n          isPlaceholder: true\n        };\n        setWorkflowQueue([placeholder, ...workflows]);\n      }\n    } catch (error) {\n      console.error('워크플로우 큐를 가져오는 중 오류 발생:', error);\n      alert('워크플로우 큐를 가져오는 중 오류가 발생했습니다.');\n    }\n  }, [API_BASE_URL, token]);\n  useEffect(() => {\n    fetchRobots();\n  }, [fetchRobots]);\n  const handleSelectRobot = robot => {\n    setSelectedRobot(robot);\n    setSelectedRobotId(robot._id); // 선택한 로봇의 _id 저장\n    setName(robot.name);\n    setDescription(robot.description);\n    setIp(robot.ip); // IP 주소 상태 설정\n    setActive(robot.active);\n    setPendingWorkflowDeletions([]); // 이전 삭제 요청 초기화\n    fetchWorkflowQueue(robot._id); // 작업 큐 불러오기\n\n    // 임시 데이터 업데이트 (실제 데이터가 있을 경우 API 호출로 대체 가능)\n    setMapName(robot.mapName || '설계도면'); // 로봇 데이터에 mapName이 있을 경우 사용\n    setRosTopics(robot.rosTopics || ['/cmd_vel', '/odom', '/scan', '/battery_status', '/map', '/goal_pose', '/amcl_pose', '/robot_status']); // 로봇 데이터에 rosTopics이 있을 경우 사용\n  };\n  const handleToggleActive = async () => {\n    if (!token) {\n      alert('토큰이 없습니다. 다시 로그인해주세요.');\n      return;\n    }\n    try {\n      await axios.put(`${API_BASE_URL}/toggleActive/${selectedRobot._id}`, {}, {\n        headers: {\n          'Authorization': `Bearer ${token}`\n        }\n      });\n      fetchRobots(selectedRobot._id);\n    } catch (error) {\n      console.error('활성 상태를 전환하는 중 오류 발생:', error);\n      alert('활성 상태를 전환하는 중 오류가 발생했습니다.');\n    }\n  };\n  const handleUpdate = async e => {\n    e.preventDefault();\n    if (!token) {\n      alert('토큰이 없습니다. 다시 로그인해주세요.');\n      return;\n    }\n\n    // 이름 유효성 검사: 한글 입력 불가, 영문자, 숫자, 하이픈, 밑줄만 허용\n    const nameRegex = /^[a-zA-Z0-9-_]+$/;\n    if (!nameRegex.test(name)) {\n      alert('Robot name must not contain Korean characters and should only include letters, numbers, hyphens, or underscores.');\n      return;\n    }\n\n    // IP 주소 유효성 검사\n    const ipRegex = /^(25[0-5]|2[0-4]\\d|[0-1]?\\d\\d?)\\.(25[0-5]|2[0-4]\\d|[0-1]?\\d\\d?)\\.(25[0-5]|2[0-4]\\d|[0-1]?\\d\\d?)\\.(25[0-5]|2[0-4]\\d|[0-1]?\\d\\d?)$/;\n    if (!ipRegex.test(ip)) {\n      alert('유효한 IP 주소를 입력해주세요.');\n      return;\n    }\n    setIsSaving(true); // Save 시작\n\n    try {\n      // 로봇 정보 업데이트\n      await axios.put(`${API_BASE_URL}/update/${selectedRobot._id}`, {\n        name,\n        description,\n        ip // IP 주소 포함\n      }, {\n        headers: {\n          'Authorization': `Bearer ${token}`,\n          'Content-Type': 'application/json'\n        }\n      });\n\n      // 워크플로우 삭제 요청\n      if (pendingWorkflowDeletions.length > 0) {\n        const deleteWorkflowPromises = pendingWorkflowDeletions.map(workflowId => axios.delete(`${API_BASE_URL}/workflows/${workflowId}`, {\n          headers: {\n            'Authorization': `Bearer ${token}`\n          }\n        }));\n        await Promise.all(deleteWorkflowPromises);\n      }\n\n      // 성공적으로 업데이트 및 삭제 후 데이터 재조회\n      fetchRobots(selectedRobot._id);\n      alert('로봇이 성공적으로 업데이트되었습니다.');\n      setPendingWorkflowDeletions([]); // 삭제 대기 목록 초기화\n    } catch (error) {\n      var _error$response, _error$response$data;\n      console.error('로봇을 업데이트하는 중 오류 발생:', error);\n      alert(`로봇을 업데이트하는 중 오류가 발생했습니다: ${((_error$response = error.response) === null || _error$response === void 0 ? void 0 : (_error$response$data = _error$response.data) === null || _error$response$data === void 0 ? void 0 : _error$response$data.message) || error.message}`);\n    } finally {\n      setIsSaving(false); // Save 종료\n    }\n  };\n\n  // 플로팅 Delete 버튼 핸들러 (즉시 삭제)\n  const handleDelete = async () => {\n    if (selectedRobot) {\n      const confirmDelete = window.confirm(`\"${selectedRobot.name}\" 로봇을 삭제하시겠습니까? 이 작업은 되돌릴 수 없습니다.`);\n      if (!confirmDelete) return;\n      if (!token) {\n        alert('토큰이 없습니다. 다시 로그인해주세요.');\n        return;\n      }\n      setIsSaving(true); // 삭제 진행 중 표시\n\n      try {\n        // DELETE 요청으로 API 호출\n        await axios.delete(`${API_BASE_URL}/robots/${selectedRobot._id}`, {\n          headers: {\n            'Authorization': `Bearer ${token}`\n          }\n        });\n        alert('로봇이 성공적으로 삭제되었습니다.');\n        // 로봇 목록에서 삭제된 로봇 제거\n        setRobots(prevRobots => prevRobots.filter(robot => robot._id !== selectedRobot._id));\n        // 선택된 로봇 초기화\n        setSelectedRobot(null);\n        setSelectedRobotId(null);\n        setName('');\n        setDescription('');\n        setIp('');\n        setActive(1);\n        setWorkflowQueue([]);\n        setPendingWorkflowDeletions([]); // 삭제 대기 목록 초기화\n      } catch (error) {\n        var _error$response2, _error$response2$data;\n        console.error('로봇을 삭제하는 중 오류 발생:', error);\n        alert(`로봇을 삭제하는 중 오류가 발생했습니다: ${((_error$response2 = error.response) === null || _error$response2 === void 0 ? void 0 : (_error$response2$data = _error$response2.data) === null || _error$response2$data === void 0 ? void 0 : _error$response2$data.message) || error.message}`);\n      } finally {\n        setIsSaving(false); // 삭제 종료\n      }\n    }\n  };\n\n  // 워크플로우 삭제 핸들러 (프론트엔드에서만 삭제하고 임시 저장)\n  const handleDeleteWorkflow = workflowId => {\n    if (window.confirm('임시로 삭제하시겠습니까? 저장 시 최종 반영됩니다.')) {\n      // 워크플로우를 workflowQueue에서 제거\n      setWorkflowQueue(prevQueue => prevQueue.filter(workflow => workflow._id !== workflowId));\n      // 삭제 대기 목록에 워크플로우 ID 추가\n      setPendingWorkflowDeletions(prev => [...prev, workflowId]);\n    }\n  };\n\n  // \"작동\" 버튼 핸들러 함수\n  const handleStartWorkflows = async () => {\n    if (!selectedRobotId) {\n      alert('로봇을 선택해주세요.');\n      return;\n    }\n    if (!token) {\n      alert('토큰이 없습니다. 다시 로그인해주세요.');\n      return;\n    }\n    setIsStarting(true);\n    try {\n      // 1. 워크플로우 할당 API 호출\n      const assignResponse = await axios.post(`${API_BASE_URL}/assignNextWorkflow`, {\n        robotId: selectedRobotId\n      }, {\n        headers: {\n          'Authorization': `Bearer ${token}`,\n          'Content-Type': 'application/json'\n        }\n      });\n      if (assignResponse.status === 200) {\n        alert('워크플로우가 성공적으로 할당되었습니다.');\n        // 워크플로우 큐 재조회\n        fetchWorkflowQueue(selectedRobotId);\n\n        // 2. 로봇을 작업으로 이동시키는 API 호출\n        const moveResponse = await axios.post(`${API_BASE_URL}/move-to-task`, {\n          robotId: selectedRobotId\n        }, {\n          headers: {\n            'Authorization': `Bearer ${token}`,\n            'Content-Type': 'application/json'\n          }\n        });\n        if (moveResponse.status === 200) {\n          alert('로봇이 작업으로 이동되었습니다.');\n          // 필요한 경우 추가적인 상태 업데이트 수행\n          fetchRobots(selectedRobotId);\n        } else {\n          alert('로봇을 작업으로 이동하는 데 실패했습니다.');\n        }\n      } else {\n        alert('할당할 워크플로우가 없습니다.');\n      }\n    } catch (error) {\n      if (error.response && error.response.data && error.response.data.error) {\n        alert(`오류: ${error.response.data.error}`);\n      } else {\n        alert(`오류가 발생했습니다: ${error.message}`);\n      }\n      console.error('작동 중 오류:', error);\n    } finally {\n      setIsStarting(false);\n    }\n  };\n  const totalRobots = robots.length;\n  const activeRobots = robots.filter(robot => robot.active === 1).length;\n\n  // 이름 입력 시 한글 검증 로직 추가\n  const handleNameChange = e => {\n    const inputName = e.target.value;\n    if (!/^[a-zA-Z0-9-_]*$/.test(inputName)) {\n      alert('Robot name must not contain Korean characters and should only include letters, numbers, hyphens, or underscores.');\n      return;\n    }\n    setName(inputName);\n  };\n  return /*#__PURE__*/React.createElement(\"div\", {\n    className: \"robot-edit-page\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 366,\n      columnNumber: 5\n    }\n  }, /*#__PURE__*/React.createElement(\"header\", {\n    className: \"header\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 367,\n      columnNumber: 7\n    }\n  }, /*#__PURE__*/React.createElement(UserInfo, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 368,\n      columnNumber: 9\n    }\n  }), /*#__PURE__*/React.createElement(LogoutButton, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 369,\n      columnNumber: 9\n    }\n  })), /*#__PURE__*/React.createElement(Navbar, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 371,\n      columnNumber: 7\n    }\n  }), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"main-content\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 372,\n      columnNumber: 7\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"robot-list-container\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 373,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"robot-list-header\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 374,\n      columnNumber: 11\n    }\n  }, /*#__PURE__*/React.createElement(\"h3\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 375,\n      columnNumber: 13\n    }\n  }, \"AMR\"), /*#__PURE__*/React.createElement(\"span\", {\n    className: \"robot-count\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 376,\n      columnNumber: 13\n    }\n  }, activeRobots, \"/\", totalRobots, \" Act\"), /*#__PURE__*/React.createElement(\"button\", {\n    onClick: () => setShowRegisterModal(true),\n    className: \"register-button\",\n    \"aria-label\": \"Register New Robot\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 379,\n      columnNumber: 13\n    }\n  }, \"+\")), loading ? /*#__PURE__*/React.createElement(\"p\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 388,\n      columnNumber: 13\n    }\n  }, \"\\uB85C\\uBD07\\uC744 \\uBD88\\uB7EC\\uC624\\uB294 \\uC911...\") : /*#__PURE__*/React.createElement(\"ul\", {\n    className: \"robot-list\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 390,\n      columnNumber: 13\n    }\n  }, robots.map(robot => /*#__PURE__*/React.createElement(\"li\", {\n    key: robot._id,\n    onClick: () => handleSelectRobot(robot),\n    className: selectedRobotId === robot._id ? 'selected' : '',\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 392,\n      columnNumber: 17\n    }\n  }, /*#__PURE__*/React.createElement(\"span\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 397,\n      columnNumber: 19\n    }\n  }, robot.name, \" - \", robot.ip), /*#__PURE__*/React.createElement(\"span\", {\n    className: \"robot-status\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 400,\n      columnNumber: 19\n    }\n  }, robot.active === 1 ? 'Act' : 'Inact'))))), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"robot-details-container\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 408,\n      columnNumber: 9\n    }\n  }, selectedRobot ? /*#__PURE__*/React.createElement(\"form\", {\n    className: \"robot-form\",\n    onSubmit: handleUpdate,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 410,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"robot-field\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 411,\n      columnNumber: 15\n    }\n  }, /*#__PURE__*/React.createElement(\"label\", {\n    htmlFor: \"name\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 412,\n      columnNumber: 17\n    }\n  }, /*#__PURE__*/React.createElement(\"strong\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 412,\n      columnNumber: 39\n    }\n  }, \"Name\")), /*#__PURE__*/React.createElement(\"input\", {\n    id: \"name\",\n    type: \"text\",\n    value: name,\n    onChange: handleNameChange // 이름 변경 검증 로직\n    ,\n    required: true,\n    className: \"input-field\",\n    placeholder: \"Enter robot name\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 413,\n      columnNumber: 17\n    }\n  }), /*#__PURE__*/React.createElement(\"span\", {\n    className: \"battery-status\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 422,\n      columnNumber: 17\n    }\n  }, \"\\uBC30\\uD130\\uB9AC \", ((_selectedRobot$status = selectedRobot.status) === null || _selectedRobot$status === void 0 ? void 0 : _selectedRobot$status.battery) || 0, \"%\")), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"robot-field\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 426,\n      columnNumber: 15\n    }\n  }, /*#__PURE__*/React.createElement(\"label\", {\n    htmlFor: \"description\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 427,\n      columnNumber: 17\n    }\n  }, /*#__PURE__*/React.createElement(\"strong\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 427,\n      columnNumber: 46\n    }\n  }, \"\\uC124\\uBA85\")), /*#__PURE__*/React.createElement(\"textarea\", {\n    id: \"description\",\n    value: description,\n    onChange: e => setDescription(e.target.value),\n    rows: \"4\",\n    className: \"input-field\",\n    placeholder: \"Enter robot description\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 428,\n      columnNumber: 17\n    }\n  })), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"robot-field\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 437,\n      columnNumber: 15\n    }\n  }, /*#__PURE__*/React.createElement(\"label\", {\n    htmlFor: \"ip\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 438,\n      columnNumber: 17\n    }\n  }, /*#__PURE__*/React.createElement(\"strong\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 438,\n      columnNumber: 37\n    }\n  }, \"IP \\uC8FC\\uC18C\")), /*#__PURE__*/React.createElement(\"input\", {\n    id: \"ip\",\n    type: \"text\",\n    value: ip,\n    onChange: e => setIp(e.target.value),\n    required: true,\n    className: \"input-field\",\n    placeholder: \"Enter robot IP address\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 439,\n      columnNumber: 17\n    }\n  })), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"robot-info\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 450,\n      columnNumber: 15\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 451,\n      columnNumber: 17\n    }\n  }, /*#__PURE__*/React.createElement(\"p\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 452,\n      columnNumber: 19\n    }\n  }, /*#__PURE__*/React.createElement(\"strong\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 452,\n      columnNumber: 22\n    }\n  }, \"\\uBAA8\\uB378\")), /*#__PURE__*/React.createElement(\"p\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 453,\n      columnNumber: 19\n    }\n  }, selectedRobot.model)), /*#__PURE__*/React.createElement(\"div\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 455,\n      columnNumber: 17\n    }\n  }, /*#__PURE__*/React.createElement(\"p\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 456,\n      columnNumber: 19\n    }\n  }, /*#__PURE__*/React.createElement(\"strong\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 456,\n      columnNumber: 22\n    }\n  }, \"\\uC0C1\\uD0DC\")), /*#__PURE__*/React.createElement(\"p\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 457,\n      columnNumber: 19\n    }\n  }, ((_selectedRobot$status2 = selectedRobot.status) === null || _selectedRobot$status2 === void 0 ? void 0 : _selectedRobot$status2.state) || 'Unknown')), /*#__PURE__*/React.createElement(\"div\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 459,\n      columnNumber: 17\n    }\n  }, /*#__PURE__*/React.createElement(\"p\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 460,\n      columnNumber: 19\n    }\n  }, /*#__PURE__*/React.createElement(\"strong\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 460,\n      columnNumber: 22\n    }\n  }, \"\\uB4F1\\uB85D\\uC77C\")), /*#__PURE__*/React.createElement(\"p\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 461,\n      columnNumber: 19\n    }\n  }, new Date(selectedRobot.createdAt).toLocaleString()))), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"robot-field\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 465,\n      columnNumber: 15\n    }\n  }, /*#__PURE__*/React.createElement(\"label\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 466,\n      columnNumber: 17\n    }\n  }, /*#__PURE__*/React.createElement(\"strong\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 466,\n      columnNumber: 24\n    }\n  }, \"Active\")), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"toggle-switch\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 467,\n      columnNumber: 17\n    }\n  }, /*#__PURE__*/React.createElement(\"label\", {\n    className: \"switch\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 468,\n      columnNumber: 19\n    }\n  }, /*#__PURE__*/React.createElement(\"input\", {\n    type: \"checkbox\",\n    checked: active === 1,\n    onChange: handleToggleActive,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 469,\n      columnNumber: 21\n    }\n  }), /*#__PURE__*/React.createElement(\"span\", {\n    className: \"slider round\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 474,\n      columnNumber: 21\n    }\n  })))), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"robot-flow-container\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 480,\n      columnNumber: 15\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"robot-flow-background\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 481,\n      columnNumber: 17\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"robot-flow-list\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 482,\n      columnNumber: 19\n    }\n  }, workflowQueue.length > 0 ? workflowQueue.map((workflow, index) => /*#__PURE__*/React.createElement(\"div\", {\n    key: workflow.isPlaceholder ? 'placeholder' : workflow._id,\n    className: `robot-flow-item ${workflow.isPlaceholder ? 'placeholder' : ''}`,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 485,\n      columnNumber: 25\n    }\n  }, index !== 0 && workflow && /*#__PURE__*/React.createElement(\"button\", {\n    onClick: () => handleDeleteWorkflow(workflow._id),\n    className: \"delete-button\",\n    title: \"Delete Workflow\",\n    \"aria-label\": `Delete workflow ${workflow.node} - ${workflow.step}`,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 491,\n      columnNumber: 29\n    }\n  }, \"\\xD7\"), workflow.isPlaceholder ? /*#__PURE__*/React.createElement(\"div\", {\n    className: \"workflow-details placeholder-details\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 502,\n      columnNumber: 29\n    }\n  }, /*#__PURE__*/React.createElement(\"span\", {\n    style: {\n      fontSize: '24px',\n      color: '#ccc'\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 504,\n      columnNumber: 31\n    }\n  }, \" \")) : /*#__PURE__*/React.createElement(\"div\", {\n    className: \"workflow-details\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 507,\n      columnNumber: 29\n    }\n  }, /*#__PURE__*/React.createElement(\"strong\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 508,\n      columnNumber: 31\n    }\n  }, workflow.node), /*#__PURE__*/React.createElement(\"div\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 509,\n      columnNumber: 31\n    }\n  }, workflow.step), /*#__PURE__*/React.createElement(\"div\", {\n    className: `workflow-status-${workflow.status.replace(' ', '-').toLowerCase()}`,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 510,\n      columnNumber: 31\n    }\n  }, workflow.status)))) : /*#__PURE__*/React.createElement(\"p\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 518,\n      columnNumber: 23\n    }\n  }, \"No workflow steps assigned.\")))), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"robot-ros-info\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 525,\n      columnNumber: 15\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"ros-topics-section\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 526,\n      columnNumber: 17\n    }\n  }, /*#__PURE__*/React.createElement(\"h4\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 527,\n      columnNumber: 19\n    }\n  }, \"ROS \\uD1A0\\uD53D\"), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"command-prompt\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 528,\n      columnNumber: 19\n    }\n  }, /*#__PURE__*/React.createElement(\"pre\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 529,\n      columnNumber: 21\n    }\n  }, rosTopics.map((topic, index) => /*#__PURE__*/React.createElement(\"code\", {\n    key: index,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 531,\n      columnNumber: 25\n    }\n  }, topic))))), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"map-name-section\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 536,\n      columnNumber: 17\n    }\n  }, /*#__PURE__*/React.createElement(\"h4\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 537,\n      columnNumber: 19\n    }\n  }, \"\\uC0AC\\uC6A9 \\uB9F5\"), /*#__PURE__*/React.createElement(\"p\", {\n    className: \"map-name\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 538,\n      columnNumber: 19\n    }\n  }, mapName)))) : /*#__PURE__*/React.createElement(\"p\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 544,\n      columnNumber: 13\n    }\n  }, \"\\uC138\\uBD80 \\uC815\\uBCF4\\uB97C \\uBCF4\\uB824\\uBA74 \\uB85C\\uBD07\\uC744 \\uC120\\uD0DD\\uD574\\uC8FC\\uC138\\uC694.\"))), showRegisterModal && /*#__PURE__*/React.createElement(\"div\", {\n    className: \"modal-overlay\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 550,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"modal-content\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 551,\n      columnNumber: 11\n    }\n  }, /*#__PURE__*/React.createElement(\"button\", {\n    onClick: () => setShowRegisterModal(false),\n    className: \"close-modal-button\",\n    \"aria-label\": \"Close Modal\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 552,\n      columnNumber: 13\n    }\n  }, \"\\xD7\"), /*#__PURE__*/React.createElement(RobotRegisterPage, {\n    onClose: () => {\n      setShowRegisterModal(false);\n      fetchRobots();\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 559,\n      columnNumber: 13\n    }\n  }))), selectedRobot ? /*#__PURE__*/React.createElement(\"div\", {\n    className: \"floating-buttons\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 565,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(\"button\", {\n    className: \"floating-delete-button\",\n    onClick: handleDelete,\n    disabled: isSaving,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 566,\n      columnNumber: 11\n    }\n  }, isSaving ? 'Deleting...' : 'DELETE'), /*#__PURE__*/React.createElement(\"button\", {\n    className: \"floating-save-button\",\n    onClick: handleUpdate,\n    disabled: isSaving,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 573,\n      columnNumber: 11\n    }\n  }, isSaving ? 'Saving...' : 'SAVE'), /*#__PURE__*/React.createElement(\"button\", {\n    className: \"floating-start-button\",\n    onClick: handleStartWorkflows,\n    disabled: isSaving || isStarting,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 580,\n      columnNumber: 11\n    }\n  }, isStarting ? '작동 중...' : '작동')) : null);\n}\nexport default RobotEditPage;","map":{"version":3,"names":["React","useState","useEffect","useCallback","Navbar","LogoutButton","UserInfo","axios","RobotRegisterPage","API_BASE_URL","process","env","REACT_APP_API_BASE_URL","RobotEditPage","_selectedRobot$status","_selectedRobot$status2","robots","setRobots","selectedRobot","setSelectedRobot","name","setName","description","setDescription","ip","setIp","active","setActive","showRegisterModal","setShowRegisterModal","workflowQueue","setWorkflowQueue","selectedRobotId","setSelectedRobotId","pendingWorkflowDeletions","setPendingWorkflowDeletions","isSaving","setIsSaving","isStarting","setIsStarting","loading","setLoading","rosTopics","setRosTopics","mapName","setMapName","token","localStorage","getItem","axiosConfig","headers","fetchRobots","preserveSelectedRobotId","alert","response","get","data","robotToSelect","find","robot","_id","length","handleSelectRobot","error","console","fetchWorkflowQueue","robotId","log","robotData","workflows","inProgressWorkflow","wf","status","filter","placeholder","isPlaceholder","handleToggleActive","put","handleUpdate","e","preventDefault","nameRegex","test","ipRegex","deleteWorkflowPromises","map","workflowId","delete","Promise","all","_error$response","_error$response$data","message","handleDelete","confirmDelete","window","confirm","prevRobots","_error$response2","_error$response2$data","handleDeleteWorkflow","prevQueue","workflow","prev","handleStartWorkflows","assignResponse","post","moveResponse","totalRobots","activeRobots","handleNameChange","inputName","target","value","createElement","className","__self","__source","fileName","_jsxFileName","lineNumber","columnNumber","onClick","key","onSubmit","htmlFor","id","type","onChange","required","battery","rows","model","state","Date","createdAt","toLocaleString","checked","index","title","node","step","style","fontSize","color","replace","toLowerCase","topic","onClose","disabled"],"sources":["/home/ketgintern/Desktop/FMS-AGV-AMR/frontend/src/pages/Robot/RobotEditPage.js"],"sourcesContent":["import React, { useState, useEffect, useCallback } from 'react';\nimport Navbar from '../../components/Common/Navbar';\nimport LogoutButton from '../../components/Common/LogoutButton';\nimport UserInfo from '../../components/Common/UserInfo';\nimport axios from 'axios';\nimport './RobotEditPage.css';\nimport RobotRegisterPage from './RobotRegisterPage';\n\n// 환경 변수로 API URL 관리 (필요 시 .env 파일에 추가)\nconst API_BASE_URL = process.env.REACT_APP_API_BASE_URL || 'http://172.30.1.33:5559/robot';\n\nfunction RobotEditPage() {\n  const [robots, setRobots] = useState([]);\n  const [selectedRobot, setSelectedRobot] = useState(null);\n  const [name, setName] = useState('');\n  const [description, setDescription] = useState('');\n  const [ip, setIp] = useState(''); // IP 주소 상태 추가\n  const [active, setActive] = useState(1);\n  const [showRegisterModal, setShowRegisterModal] = useState(false);\n  const [workflowQueue, setWorkflowQueue] = useState([]); // 작업 큐 상태 추가\n  const [selectedRobotId, setSelectedRobotId] = useState(null); // 선택한 로봇의 _id 상태 추가\n  const [pendingWorkflowDeletions, setPendingWorkflowDeletions] = useState([]); // 워크플로우 삭제 대기 목록\n  const [isSaving, setIsSaving] = useState(false); // Save 버튼 상태 관리\n  const [isStarting, setIsStarting] = useState(false); // \"작동\" 버튼 상태 관리\n  const [loading, setLoading] = useState(false); // 로딩 상태 추가\n\n  // 임시 데이터 추가: ROS 토픽과 맵 이름\n  const [rosTopics, setRosTopics] = useState([\n    '/Carring_AMR01/TaskPoints',\n    '/Carring_AMR01/Act',\n    '/Carring_AMR01/UsingWay',\n    '/Carring_AMR01/warining',\n    '/battery_limit',\n    '/speed_limit',\n    '/amcl_pose',\n    '/robot_status',\n  ]); // 임시 ROS 토픽 데이터\n  const [mapName, setMapName] = useState('Factory_Map'); // 임시 맵 이름\n\n  const token = localStorage.getItem('token');\n\n  // API 요청 헤더 설정\n  const axiosConfig = {\n    headers: {\n      'Authorization': `Bearer ${token}`,\n      'Content-Type': 'application/json',\n    },\n  };\n\n  // 로봇 데이터 가져오기\n  const fetchRobots = useCallback(async (preserveSelectedRobotId = null) => {\n    if (!token) {\n      alert('토큰이 없습니다. 다시 로그인해주세요.');\n      return;\n    }\n\n    setLoading(true);\n    try {\n      const response = await axios.get(`${API_BASE_URL}/robots`, {\n        headers: {\n          'Authorization': `Bearer ${token}`\n        }\n      });\n      setRobots(response.data);\n\n      let robotToSelect;\n      if (preserveSelectedRobotId) {\n        robotToSelect = response.data.find(robot => robot._id === preserveSelectedRobotId);\n      } else if (response.data.length > 0) {\n        robotToSelect = response.data[0];\n      }\n\n      if (robotToSelect) {\n        handleSelectRobot(robotToSelect);\n      }\n    } catch (error) {\n      console.error('로봇을 가져오는 중 오류 발생:', error);\n      alert('로봇을 가져오는 중 오류가 발생했습니다.');\n    } finally {\n      setLoading(false);\n    }\n  }, [API_BASE_URL, token]);\n\n  // 워크플로우 큐 가져오기\n  const fetchWorkflowQueue = useCallback(async (robotId) => {\n    if (!token) {\n      alert('토큰이 없습니다. 다시 로그인해주세요.');\n      return;\n    }\n\n    try {\n      const response = await axios.get(`${API_BASE_URL}/robot/${robotId}`, {\n        headers: {\n          'Authorization': `Bearer ${token}`\n        }\n      });\n\n      // API 응답 구조 확인 (필요 시 수정)\n      console.log('워크플로우 API 응답:', response.data);\n\n      // 예시: response.data.robot.currentWorkflow\n      const robotData = response.data.robot || response.data; // API 응답에 따라 조정\n\n      let workflows = robotData.workflows || [];\n\n      // \"In Progress\" 상태인 워크플로우 찾기 (단일 워크플로우 가정)\n      const inProgressWorkflow = workflows.find(wf => wf.status === 'In Progress');\n\n      if (inProgressWorkflow) {\n        // \"In Progress\" 워크플로우를 배열에서 제거\n        workflows = workflows.filter(wf => wf._id !== inProgressWorkflow._id);\n        // \"In Progress\" 워크플로우를 첫 번째에 배치\n        setWorkflowQueue([inProgressWorkflow, ...workflows]);\n      } else {\n        // \"In Progress\" 워크플로우가 없을 경우, 첫 번째 칸을 공란으로 설정\n        const placeholder = { isPlaceholder: true };\n        setWorkflowQueue([placeholder, ...workflows]);\n      }\n    } catch (error) {\n      console.error('워크플로우 큐를 가져오는 중 오류 발생:', error);\n      alert('워크플로우 큐를 가져오는 중 오류가 발생했습니다.');\n    }\n  }, [API_BASE_URL, token]);\n\n  useEffect(() => {\n    fetchRobots();\n  }, [fetchRobots]);\n\n  const handleSelectRobot = (robot) => {\n    setSelectedRobot(robot);\n    setSelectedRobotId(robot._id); // 선택한 로봇의 _id 저장\n    setName(robot.name);\n    setDescription(robot.description);\n    setIp(robot.ip); // IP 주소 상태 설정\n    setActive(robot.active);\n    setPendingWorkflowDeletions([]); // 이전 삭제 요청 초기화\n    fetchWorkflowQueue(robot._id); // 작업 큐 불러오기\n\n    // 임시 데이터 업데이트 (실제 데이터가 있을 경우 API 호출로 대체 가능)\n    setMapName(robot.mapName || '설계도면'); // 로봇 데이터에 mapName이 있을 경우 사용\n    setRosTopics(robot.rosTopics || [\n      '/cmd_vel',\n      '/odom',\n      '/scan',\n      '/battery_status',\n      '/map',\n      '/goal_pose',\n      '/amcl_pose',\n      '/robot_status',\n    ]); // 로봇 데이터에 rosTopics이 있을 경우 사용\n  };\n\n  const handleToggleActive = async () => {\n    if (!token) {\n      alert('토큰이 없습니다. 다시 로그인해주세요.');\n      return;\n    }\n\n    try {\n      await axios.put(\n        `${API_BASE_URL}/toggleActive/${selectedRobot._id}`,\n        {},\n        {\n          headers: {\n            'Authorization': `Bearer ${token}`\n          }\n        }\n      );\n      fetchRobots(selectedRobot._id);\n    } catch (error) {\n      console.error('활성 상태를 전환하는 중 오류 발생:', error);\n      alert('활성 상태를 전환하는 중 오류가 발생했습니다.');\n    }\n  };\n\n  const handleUpdate = async (e) => {\n    e.preventDefault();\n\n    if (!token) {\n      alert('토큰이 없습니다. 다시 로그인해주세요.');\n      return;\n    }\n\n    // 이름 유효성 검사: 한글 입력 불가, 영문자, 숫자, 하이픈, 밑줄만 허용\n    const nameRegex = /^[a-zA-Z0-9-_]+$/;\n    if (!nameRegex.test(name)) {\n      alert('Robot name must not contain Korean characters and should only include letters, numbers, hyphens, or underscores.');\n      return;\n    }\n\n    // IP 주소 유효성 검사\n    const ipRegex = /^(25[0-5]|2[0-4]\\d|[0-1]?\\d\\d?)\\.(25[0-5]|2[0-4]\\d|[0-1]?\\d\\d?)\\.(25[0-5]|2[0-4]\\d|[0-1]?\\d\\d?)\\.(25[0-5]|2[0-4]\\d|[0-1]?\\d\\d?)$/;\n    if (!ipRegex.test(ip)) {\n      alert('유효한 IP 주소를 입력해주세요.');\n      return;\n    }\n\n    setIsSaving(true); // Save 시작\n\n    try {\n      // 로봇 정보 업데이트\n      await axios.put(`${API_BASE_URL}/update/${selectedRobot._id}`, {\n        name,\n        description,\n        ip // IP 주소 포함\n      }, {\n        headers: {\n          'Authorization': `Bearer ${token}`,\n          'Content-Type': 'application/json'\n        }\n      });\n\n      // 워크플로우 삭제 요청\n      if (pendingWorkflowDeletions.length > 0) {\n        const deleteWorkflowPromises = pendingWorkflowDeletions.map(workflowId =>\n          axios.delete(`${API_BASE_URL}/workflows/${workflowId}`, {\n            headers: {\n              'Authorization': `Bearer ${token}`\n            }\n          })\n        );\n\n        await Promise.all(deleteWorkflowPromises);\n      }\n\n      // 성공적으로 업데이트 및 삭제 후 데이터 재조회\n      fetchRobots(selectedRobot._id);\n      alert('로봇이 성공적으로 업데이트되었습니다.');\n      setPendingWorkflowDeletions([]); // 삭제 대기 목록 초기화\n    } catch (error) {\n      console.error('로봇을 업데이트하는 중 오류 발생:', error);\n      alert(`로봇을 업데이트하는 중 오류가 발생했습니다: ${error.response?.data?.message || error.message}`);\n    } finally {\n      setIsSaving(false); // Save 종료\n    }\n  };\n\n  // 플로팅 Delete 버튼 핸들러 (즉시 삭제)\n  const handleDelete = async () => {\n    if (selectedRobot) {\n      const confirmDelete = window.confirm(`\"${selectedRobot.name}\" 로봇을 삭제하시겠습니까? 이 작업은 되돌릴 수 없습니다.`);\n      if (!confirmDelete) return;\n\n      if (!token) {\n        alert('토큰이 없습니다. 다시 로그인해주세요.');\n        return;\n      }\n\n      setIsSaving(true); // 삭제 진행 중 표시\n\n      try {\n        // DELETE 요청으로 API 호출\n        await axios.delete(`${API_BASE_URL}/robots/${selectedRobot._id}`, {\n          headers: {\n            'Authorization': `Bearer ${token}`,\n          },\n        });\n\n        alert('로봇이 성공적으로 삭제되었습니다.');\n        // 로봇 목록에서 삭제된 로봇 제거\n        setRobots((prevRobots) => prevRobots.filter((robot) => robot._id !== selectedRobot._id));\n        // 선택된 로봇 초기화\n        setSelectedRobot(null);\n        setSelectedRobotId(null);\n        setName('');\n        setDescription('');\n        setIp('');\n        setActive(1);\n        setWorkflowQueue([]);\n        setPendingWorkflowDeletions([]); // 삭제 대기 목록 초기화\n      } catch (error) {\n        console.error('로봇을 삭제하는 중 오류 발생:', error);\n        alert(`로봇을 삭제하는 중 오류가 발생했습니다: ${error.response?.data?.message || error.message}`);\n      } finally {\n        setIsSaving(false); // 삭제 종료\n      }\n    }\n  };\n\n  // 워크플로우 삭제 핸들러 (프론트엔드에서만 삭제하고 임시 저장)\n  const handleDeleteWorkflow = (workflowId) => {\n    if (window.confirm('임시로 삭제하시겠습니까? 저장 시 최종 반영됩니다.')) {\n      // 워크플로우를 workflowQueue에서 제거\n      setWorkflowQueue(prevQueue => prevQueue.filter(workflow => workflow._id !== workflowId));\n      // 삭제 대기 목록에 워크플로우 ID 추가\n      setPendingWorkflowDeletions(prev => [...prev, workflowId]);\n    }\n  };\n\n  // \"작동\" 버튼 핸들러 함수\n  const handleStartWorkflows = async () => {\n    if (!selectedRobotId) {\n      alert('로봇을 선택해주세요.');\n      return;\n    }\n\n    if (!token) {\n      alert('토큰이 없습니다. 다시 로그인해주세요.');\n      return;\n    }\n\n    setIsStarting(true);\n\n    try {\n      // 1. 워크플로우 할당 API 호출\n      const assignResponse = await axios.post(`${API_BASE_URL}/assignNextWorkflow`, {\n        robotId: selectedRobotId\n      }, {\n        headers: {\n          'Authorization': `Bearer ${token}`,\n          'Content-Type': 'application/json'\n        }\n      });\n\n      if (assignResponse.status === 200) {\n        alert('워크플로우가 성공적으로 할당되었습니다.');\n        // 워크플로우 큐 재조회\n        fetchWorkflowQueue(selectedRobotId);\n\n        // 2. 로봇을 작업으로 이동시키는 API 호출\n        const moveResponse = await axios.post(`${API_BASE_URL}/move-to-task`, {\n          robotId: selectedRobotId\n        }, {\n          headers: {\n            'Authorization': `Bearer ${token}`,\n            'Content-Type': 'application/json'\n          }\n        });\n\n        if (moveResponse.status === 200) {\n          alert('로봇이 작업으로 이동되었습니다.');\n          // 필요한 경우 추가적인 상태 업데이트 수행\n          fetchRobots(selectedRobotId);\n        } else {\n          alert('로봇을 작업으로 이동하는 데 실패했습니다.');\n        }\n      } else {\n        alert('할당할 워크플로우가 없습니다.');\n      }\n    } catch (error) {\n      if (error.response && error.response.data && error.response.data.error) {\n        alert(`오류: ${error.response.data.error}`);\n      } else {\n        alert(`오류가 발생했습니다: ${error.message}`);\n      }\n      console.error('작동 중 오류:', error);\n    } finally {\n      setIsStarting(false);\n    }\n  };\n\n  const totalRobots = robots.length;\n  const activeRobots = robots.filter(robot => robot.active === 1).length;\n\n  // 이름 입력 시 한글 검증 로직 추가\n  const handleNameChange = (e) => {\n    const inputName = e.target.value;\n    if (!/^[a-zA-Z0-9-_]*$/.test(inputName)) {\n      alert('Robot name must not contain Korean characters and should only include letters, numbers, hyphens, or underscores.');\n      return;\n    }\n    setName(inputName);\n  };\n\n  return (\n    <div className=\"robot-edit-page\">\n      <header className=\"header\">\n        <UserInfo />\n        <LogoutButton />\n      </header>\n      <Navbar />\n      <div className=\"main-content\">\n        <div className=\"robot-list-container\">\n          <div className=\"robot-list-header\">\n            <h3>AMR</h3>\n            <span className=\"robot-count\">\n              {activeRobots}/{totalRobots} Act\n            </span>\n            <button\n              onClick={() => setShowRegisterModal(true)}\n              className=\"register-button\"\n              aria-label=\"Register New Robot\"\n            >\n              +\n            </button>\n          </div>\n          {loading ? (\n            <p>로봇을 불러오는 중...</p>\n          ) : (\n            <ul className=\"robot-list\">\n              {robots.map((robot) => (\n                <li\n                  key={robot._id}\n                  onClick={() => handleSelectRobot(robot)}\n                  className={selectedRobotId === robot._id ? 'selected' : ''}\n                >\n                  <span>\n                    {robot.name} - {robot.ip}\n                  </span>\n                  <span className=\"robot-status\">\n                    {robot.active === 1 ? 'Act' : 'Inact'}\n                  </span>\n                </li>\n              ))}\n            </ul>\n          )}\n        </div>\n        <div className=\"robot-details-container\">\n          {selectedRobot ? (\n            <form className=\"robot-form\" onSubmit={handleUpdate}>\n              <div className=\"robot-field\">\n                <label htmlFor=\"name\"><strong>Name</strong></label>\n                <input\n                  id=\"name\"\n                  type=\"text\"\n                  value={name}\n                  onChange={handleNameChange} // 이름 변경 검증 로직\n                  required\n                  className=\"input-field\"\n                  placeholder=\"Enter robot name\"\n                />\n                <span className=\"battery-status\">\n                  배터리 {selectedRobot.status?.battery || 0}%\n                </span>\n              </div>\n              <div className=\"robot-field\">\n                <label htmlFor=\"description\"><strong>설명</strong></label>\n                <textarea\n                  id=\"description\"\n                  value={description}\n                  onChange={(e) => setDescription(e.target.value)}\n                  rows=\"4\"\n                  className=\"input-field\"\n                  placeholder=\"Enter robot description\"\n                />\n              </div>\n              <div className=\"robot-field\">\n                <label htmlFor=\"ip\"><strong>IP 주소</strong></label>\n                <input\n                  id=\"ip\"\n                  type=\"text\"\n                  value={ip}\n                  onChange={(e) => setIp(e.target.value)}\n                  required\n                  className=\"input-field\"\n                  placeholder=\"Enter robot IP address\"\n                />\n              </div>\n\n              <div className=\"robot-info\">\n                <div>\n                  <p><strong>모델</strong></p>\n                  <p>{selectedRobot.model}</p>\n                </div>\n                <div>\n                  <p><strong>상태</strong></p>\n                  <p>{selectedRobot.status?.state || 'Unknown'}</p>\n                </div>\n                <div>\n                  <p><strong>등록일</strong></p>\n                  <p>{new Date(selectedRobot.createdAt).toLocaleString()}</p>\n                </div>\n              </div>\n\n              <div className=\"robot-field\">\n                <label><strong>Active</strong></label>\n                <div className=\"toggle-switch\">\n                  <label className=\"switch\">\n                    <input\n                      type=\"checkbox\"\n                      checked={active === 1}\n                      onChange={handleToggleActive}\n                    />\n                    <span className=\"slider round\"></span>\n                  </label>\n                </div>\n              </div>\n\n              {/* 작업 플로우 디자인 - 첫번째 플로우는 \"In Progress\"이거나 공란 */}\n              <div className=\"robot-flow-container\">\n                <div className=\"robot-flow-background\">\n                  <div className=\"robot-flow-list\">\n                    {workflowQueue.length > 0 ? (\n                      workflowQueue.map((workflow, index) => (\n                        <div\n                          key={workflow.isPlaceholder ? 'placeholder' : workflow._id}\n                          className={`robot-flow-item ${workflow.isPlaceholder ? 'placeholder' : ''}`}\n                        >\n                          {/* 첫 번째 플로우가 placeholder가 아닐 경우만 삭제 버튼 표시 */}\n                          {index !== 0 && workflow && (\n                            <button\n                              onClick={() => handleDeleteWorkflow(workflow._id)}\n                              className=\"delete-button\"\n                              title=\"Delete Workflow\"\n                              aria-label={`Delete workflow ${workflow.node} - ${workflow.step}`}\n                            >\n                              ×\n                            </button>\n                          )}\n                          {/* 첫 번째 플로우가 placeholder일 경우 공란 유지 */}\n                          {workflow.isPlaceholder ? (\n                            <div className=\"workflow-details placeholder-details\">\n                              {/* 공란에 대한 추가 내용 또는 아이콘 */}\n                              <span style={{ fontSize: '24px', color: '#ccc' }}> </span>\n                            </div>\n                          ) : (\n                            <div className=\"workflow-details\">\n                              <strong>{workflow.node}</strong>\n                              <div>{workflow.step}</div>\n                              <div className={`workflow-status-${workflow.status.replace(' ', '-').toLowerCase()}`}>\n                                {workflow.status}\n                              </div>\n                            </div>\n                          )}\n                        </div>\n                      ))\n                    ) : (\n                      <p>No workflow steps assigned.</p>\n                    )}\n                  </div>\n                </div>\n              </div>\n\n              {/* ROS 토픽 및 맵 이름 섹션 */}\n              <div className=\"robot-ros-info\">\n                <div className=\"ros-topics-section\">\n                  <h4>ROS 토픽</h4>\n                  <div className=\"command-prompt\">\n                    <pre>\n                      {rosTopics.map((topic, index) => (\n                        <code key={index}>{topic}</code>\n                      ))}\n                    </pre>\n                  </div>\n                </div>\n                <div className=\"map-name-section\">\n                  <h4>사용 맵</h4>\n                  <p className=\"map-name\">{mapName}</p>\n                </div>\n              </div>\n              {/* ROS 토픽 및 맵 이름 섹션 종료 */}\n            </form>\n          ) : (\n            <p>세부 정보를 보려면 로봇을 선택해주세요.</p>\n          )}\n        </div>\n      </div>\n\n      {showRegisterModal && (\n        <div className=\"modal-overlay\">\n          <div className=\"modal-content\">\n            <button\n              onClick={() => setShowRegisterModal(false)}\n              className=\"close-modal-button\"\n              aria-label=\"Close Modal\"\n            >\n              &times;\n            </button>\n            <RobotRegisterPage onClose={() => { setShowRegisterModal(false); fetchRobots(); }} />\n          </div>\n        </div>\n      )}\n\n      {selectedRobot ? (\n        <div className=\"floating-buttons\">\n          <button\n            className=\"floating-delete-button\"\n            onClick={handleDelete}\n            disabled={isSaving}\n          >\n            {isSaving ? 'Deleting...' : 'DELETE'}\n          </button>\n          <button\n            className=\"floating-save-button\"\n            onClick={handleUpdate}\n            disabled={isSaving}\n          >\n            {isSaving ? 'Saving...' : 'SAVE'}\n          </button>\n          <button\n            className=\"floating-start-button\"\n            onClick={handleStartWorkflows}\n            disabled={isSaving || isStarting}\n          >\n            {isStarting ? '작동 중...' : '작동'}\n          </button>\n        </div>\n      ) : null}\n    </div>\n  );\n}\n\nexport default RobotEditPage;\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module"}