{"ast":null,"code":"var _jsxFileName = \"/home/ketgintern/Desktop/FMS-AGV-AMR/frontend/src/pages/Map/Mapmanage.js\";\n// src/components/MapManage/Mapmanage.js\n\nimport React, { useState, useEffect, useRef } from 'react';\nimport axios from 'axios';\nimport { FontAwesomeIcon } from '@fortawesome/react-fontawesome';\nimport { faEdit, faPlus } from '@fortawesome/free-solid-svg-icons';\nimport Navbar from '../../components/Common/Navbar';\nimport LogoutButton from '../../components/Common/LogoutButton';\nimport UserInfo from '../../components/Common/UserInfo';\nimport './Mapmanage.css';\nimport { worldToMap, mapToWorld } from '../../utils/coordinateUtils';\nimport NodeList from './NodeList'; // NodeList 컴포넌트 임포트\n\nfunction Mapmanage() {\n  const [maps, setMaps] = useState([]);\n  const [selectedMap, setSelectedMap] = useState(null); // 선택된 맵 상태\n  const [editName, setEditName] = useState('');\n  const [editDescription, setEditDescription] = useState('');\n  const [isMonitored, setIsMonitored] = useState(false); // 모니터링 설정 체크박스 상태\n  const [uploadName, setUploadName] = useState('');\n  const [uploadDescription, setUploadDescription] = useState('');\n  const [mapFile, setMapFile] = useState(null);\n  const [yamlFile, setYamlFile] = useState(null);\n  const [mapImage, setMapImage] = useState(null);\n  const [isUploadPopupOpen, setIsUploadPopupOpen] = useState(false); // 업로드 팝업 상태\n  const [isEditPopupOpen, setIsEditPopupOpen] = useState(false); // 수정 팝업 상태\n  const [isCreatingNode, setIsCreatingNode] = useState(false); // 노드 생성 모드\n  const [nodeX, setNodeX] = useState(null); // X 좌표\n  const [nodeY, setNodeY] = useState(null); // Y 좌표\n  const [nodeName, setNodeName] = useState(''); // 노드 이름\n  const [isNodePopupOpen, setIsNodePopupOpen] = useState(false); // 노드 팝업 상태\n  const canvasRef = useRef(null); // 맵 캔버스 참조\n  const nodeCanvasRef = useRef(null); // 노드 캔버스 참조\n  const mapImageRef = useRef(null); // 지도 이미지 참조\n  const [nodes, setNodes] = useState([]); // 노드 목록 저장\n  const [isDeletingNode, setIsDeletingNode] = useState(false);\n  const [imageNaturalWidth, setImageNaturalWidth] = useState(null);\n  const [imageNaturalHeight, setImageNaturalHeight] = useState(null);\n\n  // Hover 상태 관리\n  const [hoveredNode, setHoveredNode] = useState(null);\n  const [tooltipPosition, setTooltipPosition] = useState({\n    x: 0,\n    y: 0\n  });\n  useEffect(() => {\n    fetchMaps();\n  }, []);\n\n  // 맵 목록을 서버에서 가져오는 함수\n  const fetchMaps = async () => {\n    const token = localStorage.getItem('token');\n    if (!token) {\n      alert('No token found, please log in again.');\n      return;\n    }\n    try {\n      const response = await axios.get('http://172.30.1.15:5557/map/maps', {\n        headers: {\n          'Authorization': `Bearer ${token}`\n        }\n      });\n      setMaps(response.data);\n    } catch (error) {\n      console.error('Error fetching maps:', error);\n      alert('Failed to fetch maps.');\n    }\n  };\n\n  // 맵을 선택했을 때 호출되는 함수\n  const handleSelectMap = async map => {\n    setSelectedMap(map); // 맵 선택 상태 업데이트\n    setEditName(map.name);\n    setEditDescription(map.description);\n    setIsMonitored(map.isMonitored || false); // 모니터링 지도 상태 설정\n\n    // 맵 선택 후에 노드를 비동기로 가져오기\n    await fetchNodes(map._id); // 노드 데이터를 비동기로 가져옴\n\n    const token = localStorage.getItem('token');\n    try {\n      const response = await axios.get(`http://172.30.1.15:5557/map/file/${map._id}`, {\n        headers: {\n          Authorization: `Bearer ${token}`\n        },\n        responseType: 'blob'\n      });\n      const imageUrl = URL.createObjectURL(response.data);\n      setMapImage(imageUrl); // 이미지 설정\n    } catch (error) {\n      console.error('Error fetching map image:', error);\n      alert('Failed to fetch map image.');\n    }\n  };\n  const fetchNodes = async mapId => {\n    try {\n      const response = await axios.get(`http://172.30.1.15:5557/map/nodes/${mapId}`);\n      if (response.status === 200) {\n        setNodes(response.data); // 노드 리스트 상태 업데이트\n      } else {\n        setNodes([]); // 실패 시 빈 배열로 초기화\n      }\n    } catch (error) {\n      console.error('Error fetching nodes:', error);\n      setNodes([]); // 오류 발생 시에도 빈 배열로 초기화\n      alert('Failed to fetch nodes.');\n    }\n  };\n\n  // 이미지 로드 시 호출되는 함수 (지도 이미지를 맵 캔버스에 그리기)\n  const loadMapImage = () => {\n    const canvas = canvasRef.current;\n    if (!canvas) return;\n    const ctx = canvas.getContext('2d');\n    mapImageRef.current = new Image();\n    mapImageRef.current.src = mapImage;\n    mapImageRef.current.onload = () => {\n      const imgWidth = mapImageRef.current.width;\n      const imgHeight = mapImageRef.current.height;\n      setImageNaturalWidth(imgWidth);\n      setImageNaturalHeight(imgHeight);\n\n      // 맵 캔버스 크기 조정\n      canvas.width = imgWidth;\n      canvas.height = imgHeight;\n\n      // 지도 이미지를 맵 캔버스에 그리기\n      ctx.clearRect(0, 0, canvas.width, canvas.height); // 기존 캔버스 내용 지우기\n      ctx.drawImage(mapImageRef.current, 0, 0, imgWidth, imgHeight);\n\n      // 노드를 노드 캔버스에 그리기\n      drawNodes();\n    };\n  };\n\n  // 노드를 노드 캔버스에 그리는 함수\n  const drawNodes = () => {\n    const canvas = nodeCanvasRef.current;\n    const ctx = canvas.getContext('2d');\n    if (!canvas || !imageNaturalWidth || !imageNaturalHeight) return;\n\n    // 노드 캔버스 크기 설정 (맵과 동일하게)\n    canvas.width = imageNaturalWidth;\n    canvas.height = imageNaturalHeight;\n    ctx.clearRect(0, 0, canvas.width, canvas.height); // 기존 노드 지우기\n\n    nodes.forEach(node => {\n      const {\n        x,\n        y\n      } = worldToMap(node.x, node.y, imageNaturalWidth, imageNaturalHeight);\n\n      // 노드를 빨간 정사각형으로 그리기\n      const size = 10; // 정사각형의 크기\n      ctx.fillStyle = 'red';\n      ctx.fillRect(x - size / 2, y - size / 2, size, size); // 중심을 기준으로 그리기\n    });\n  };\n\n  // 이미지 로드 후 캔버스에 지도 그리기\n  useEffect(() => {\n    if (mapImage) {\n      loadMapImage();\n    }\n  }, [mapImage]);\n\n  // 노드 변경 시마다 다시 그리기\n  useEffect(() => {\n    if (nodeCanvasRef.current && imageNaturalWidth && imageNaturalHeight) {\n      drawNodes(); // 노드를 노드 캔버스에 다시 그리기\n    }\n  }, [nodes]);\n  useEffect(() => {\n    if (!isDeletingNode) {\n      document.body.style.cursor = 'default'; // 삭제 모드가 아닐 때 커서를 기본으로 복구\n    }\n  }, [isDeletingNode]);\n\n  // 마우스가 노드 캔버스 위를 움직일 때 노드 호버 상태 업데이트\n  const handleMouseMove = e => {\n    const canvas = nodeCanvasRef.current;\n    if (!canvas) return;\n    const rect = canvas.getBoundingClientRect();\n    const mouseX = e.clientX - rect.left;\n    const mouseY = e.clientY - rect.top;\n    let foundNode = null;\n    for (let node of nodes) {\n      const {\n        x,\n        y\n      } = worldToMap(node.x, node.y, imageNaturalWidth, imageNaturalHeight);\n      const distance = Math.sqrt((mouseX - x) ** 2 + (mouseY - y) ** 2);\n      if (distance < 5) {\n        // 노드 반경 5px 내에 있을 때\n        foundNode = node;\n        break;\n      }\n    }\n    if (foundNode) {\n      setHoveredNode(foundNode);\n      setTooltipPosition({\n        x: e.clientX,\n        y: e.clientY\n      });\n    } else {\n      setHoveredNode(null);\n    }\n  };\n\n  // 마우스가 캔버스를 벗어났을 때 호버 상태 초기화\n  const handleMouseLeave = () => {\n    setHoveredNode(null);\n  };\n\n  // 맵 이미지 클릭 시 노드 생성 또는 삭제\n  const handleMapClick = async e => {\n    if (!selectedMap) return;\n    const canvas = nodeCanvasRef.current;\n    if (!canvas) return;\n    const rect = canvas.getBoundingClientRect();\n    const clickX = e.clientX - rect.left;\n    const clickY = e.clientY - rect.top;\n    const {\n      x,\n      y\n    } = mapToWorld(clickX, clickY, imageNaturalWidth, imageNaturalHeight);\n    if (isCreatingNode) {\n      // 노드 생성 로직\n      setNodeX(x);\n      setNodeY(y);\n      setIsCreatingNode(false);\n      setIsNodePopupOpen(true);\n      document.body.style.cursor = 'default';\n    } else if (isDeletingNode) {\n      // 클릭한 위치 근처에 있는 노드를 찾아 삭제\n      let nodeToDelete = null;\n      for (let node of nodes) {\n        const {\n          x: nodeX,\n          y: nodeY\n        } = worldToMap(node.x, node.y, imageNaturalWidth, imageNaturalHeight);\n        const distance = Math.sqrt((clickX - nodeX) ** 2 + (clickY - nodeY) ** 2);\n        if (distance < 5) {\n          nodeToDelete = node;\n          break;\n        }\n      }\n      if (nodeToDelete) {\n        const confirmDelete = window.confirm(`노드 \"${nodeToDelete.name}\"를 삭제하시겠습니까?`);\n        if (confirmDelete) {\n          try {\n            const token = localStorage.getItem('token');\n            await axios.put(`http://172.30.1.15:5557/map/node/${nodeToDelete._id}`, {}, {\n              headers: {\n                Authorization: `Bearer ${token}`\n              }\n            });\n            alert('노드가 성공적으로 삭제되었습니다.');\n            fetchNodes(selectedMap._id); // 삭제 후 노드 목록 갱신\n            setIsDeletingNode(false); // 삭제 후 삭제 모드 종료\n          } catch (error) {\n            console.error('노드 삭제 중 오류 발생:', error);\n            alert('노드 삭제에 실패했습니다.');\n          }\n        }\n      } else {\n        alert('해당 위치에 노드를 찾을 수 없습니다.');\n      }\n    }\n  };\n\n  // 노드 생성을 제출하는 함수\n  const handleSubmitNode = async () => {\n    const token = localStorage.getItem('token');\n    if (!token) {\n      alert('No token found, please log in again.');\n      return;\n    }\n    if (nodeName.trim().length === 0) {\n      alert('Node name cannot be empty.');\n      return;\n    }\n    try {\n      await axios.post('http://172.30.1.15:5557/map/nodes', {\n        name: nodeName,\n        x: nodeX,\n        y: nodeY,\n        mapId: selectedMap._id\n      }, {\n        headers: {\n          Authorization: `Bearer ${token}`\n        }\n      });\n      alert('Node created successfully.');\n      setIsNodePopupOpen(false);\n      setNodeName(''); // 입력 필드 초기화\n      setNodeX(null);\n      setNodeY(null);\n      fetchNodes(selectedMap._id); // 노드 목록 갱신\n    } catch (error) {\n      console.error('Error creating node:', error);\n      alert('Failed to create node.');\n    }\n  };\n\n  // 맵 삭제하는 함수\n  const handleDeleteMap = async mapId => {\n    const token = localStorage.getItem('token');\n    if (!token) {\n      alert('No token found, please log in again.');\n      return;\n    }\n    const confirmDelete = window.confirm('Are you sure you want to delete this map?');\n    if (!confirmDelete) return;\n    try {\n      await axios.put(`http://172.30.1.15:5557/map/delete/${mapId}`, {}, {\n        headers: {\n          'Authorization': `Bearer ${token}`\n        }\n      });\n      alert('Map deleted successfully');\n      fetchMaps();\n      if (selectedMap && selectedMap._id === mapId) {\n        setSelectedMap(null); // 선택된 맵을 삭제한 경우 초기화\n        setMapImage(null); // 맵 이미지 초기화\n        setNodes([]); // 노드 목록 초기화\n      }\n    } catch (error) {\n      console.error('Error deleting map:', error);\n      alert('Error deleting map');\n    }\n  };\n\n  // 맵 파일 변경 시 호출되는 함수\n  const handleFileChange = e => {\n    setMapFile(e.target.files[0]);\n  };\n\n  // YAML 파일 변경 시 호출되는 함수\n  const handleYamlFileChange = e => {\n    setYamlFile(e.target.files[0]);\n  };\n\n  // 맵 업데이트를 처리하는 함수\n  const handleUpdateMap = async e => {\n    e.preventDefault();\n    if (editName.length < 2) {\n      alert('Map name must be at least 2 characters long.');\n      return;\n    }\n    const token = localStorage.getItem('token');\n    if (!token) {\n      alert('No token found, please log in again.');\n      return;\n    }\n    try {\n      await axios.put(`http://172.30.1.15:5557/map/update/${selectedMap._id}`, {\n        name: editName,\n        description: editDescription,\n        isMonitored // 모니터링 지도 상태 포함\n      }, {\n        headers: {\n          'Authorization': `Bearer ${token}`,\n          'Content-Type': 'application/json'\n        }\n      });\n      alert('Map updated successfully');\n      setIsEditPopupOpen(false); // 수정 후 팝업 닫기\n      fetchMaps();\n    } catch (error) {\n      var _error$response, _error$response$data;\n      console.error('Error updating map:', error);\n      alert(`Error updating map: ${((_error$response = error.response) === null || _error$response === void 0 ? void 0 : (_error$response$data = _error$response.data) === null || _error$response$data === void 0 ? void 0 : _error$response$data.message) || error.message}`);\n    }\n  };\n\n  // 맵 업로드를 처리하는 함수\n  const handleUploadMap = async e => {\n    e.preventDefault();\n    if (uploadName.length < 2) {\n      alert('Map name must be at least 2 characters long.');\n      return;\n    }\n    const formData = new FormData();\n    formData.append('name', uploadName);\n    formData.append('description', uploadDescription);\n    formData.append('file', mapFile);\n    formData.append('yaml', yamlFile);\n    const token = localStorage.getItem('token');\n    if (!token) {\n      alert('No token found, please log in again.');\n      return;\n    }\n    try {\n      await axios.post('http://172.30.1.15:5557/map/upload', formData, {\n        headers: {\n          'Authorization': `Bearer ${token}`,\n          'Content-Type': 'multipart/form-data'\n        }\n      });\n      alert('Map uploaded successfully');\n      setIsUploadPopupOpen(false); // 업로드 후 팝업 닫기\n      fetchMaps();\n    } catch (error) {\n      console.error('Error uploading map:', error);\n      alert('Error uploading map.');\n    }\n  };\n\n  // 맵 수정 팝업을 여는 함수\n  const openEditPopup = map => {\n    setSelectedMap(map);\n    setEditName(map.name);\n    setEditDescription(map.description);\n    setIsMonitored(map.isMonitored || false); // 모니터링 상태 설정\n    setIsEditPopupOpen(true); // 수정 팝업 열기\n  };\n\n  // 노드 생성 모드를 활성화하는 함수\n  const handleCreateNodeMode = () => {\n    if (!selectedMap) {\n      alert('Please select a map first.');\n      return;\n    }\n    setIsCreatingNode(true);\n    document.body.style.cursor = 'crosshair'; // 마우스 커서 십자가 모양 변경\n  };\n\n  // 이미지 로드 시 실제 크기와 렌더링된 크기를 저장하는 함수\n  const handleImageLoad = e => {\n    const img = e.target;\n    setImageNaturalWidth(img.naturalWidth);\n    setImageNaturalHeight(img.naturalHeight);\n    console.log(`Image Loaded: Natural (${img.naturalWidth}, ${img.naturalHeight})`);\n  };\n\n  // URL 객체 해제를 위한 useEffect\n  useEffect(() => {\n    return () => {\n      if (mapImage) {\n        URL.revokeObjectURL(mapImage);\n      }\n    };\n  }, [mapImage]);\n\n  // 노드 삭제 모드를 활성화하는 함수\n  const handleDeleteNodeMode = () => {\n    if (!selectedMap) {\n      alert('먼저 맵을 선택해주세요.');\n      return;\n    }\n    setIsDeletingNode(true);\n    document.body.style.cursor = 'not-allowed'; // 커서를 삭제 모드로 변경\n  };\n  return /*#__PURE__*/React.createElement(\"div\", {\n    className: \"map-management-page\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 465,\n      columnNumber: 5\n    }\n  }, /*#__PURE__*/React.createElement(\"header\", {\n    className: \"map-management-header\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 467,\n      columnNumber: 7\n    }\n  }, /*#__PURE__*/React.createElement(UserInfo, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 468,\n      columnNumber: 9\n    }\n  }), /*#__PURE__*/React.createElement(LogoutButton, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 469,\n      columnNumber: 9\n    }\n  })), /*#__PURE__*/React.createElement(Navbar, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 471,\n      columnNumber: 7\n    }\n  }), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"toolbar\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 474,\n      columnNumber: 7\n    }\n  }, /*#__PURE__*/React.createElement(\"button\", {\n    onClick: handleCreateNodeMode,\n    className: \"create-node-button\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 475,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(FontAwesomeIcon, {\n    icon: faPlus,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 476,\n      columnNumber: 11\n    }\n  }), \" Create Node\"), /*#__PURE__*/React.createElement(\"button\", {\n    onClick: handleDeleteNodeMode,\n    className: \"delete-node-button\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 478,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(FontAwesomeIcon, {\n    icon: faEdit,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 479,\n      columnNumber: 11\n    }\n  }), \" Delete Node\")), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"map-management-content\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 484,\n      columnNumber: 7\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"map-list-container\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 486,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(\"h2\", {\n    className: \"map-list-header\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 487,\n      columnNumber: 11\n    }\n  }, \"Map List\", /*#__PURE__*/React.createElement(\"button\", {\n    onClick: () => setIsUploadPopupOpen(true),\n    className: \"add-map-button\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 489,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(FontAwesomeIcon, {\n    icon: faPlus,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 493,\n      columnNumber: 15\n    }\n  }))), /*#__PURE__*/React.createElement(\"ul\", {\n    className: \"map-list\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 496,\n      columnNumber: 11\n    }\n  }, maps.map(map => /*#__PURE__*/React.createElement(\"li\", {\n    key: map._id,\n    className: `map-list-item ${(selectedMap === null || selectedMap === void 0 ? void 0 : selectedMap._id) === map._id ? 'selected-map' : ''}`,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 498,\n      columnNumber: 15\n    }\n  }, /*#__PURE__*/React.createElement(\"span\", {\n    onClick: () => handleSelectMap(map),\n    className: \"map-list-item-name\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 502,\n      columnNumber: 17\n    }\n  }, map.name), /*#__PURE__*/React.createElement(\"button\", {\n    onClick: () => openEditPopup(map),\n    className: \"edit-map-button\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 508,\n      columnNumber: 17\n    }\n  }, /*#__PURE__*/React.createElement(FontAwesomeIcon, {\n    icon: faEdit,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 512,\n      columnNumber: 19\n    }\n  })), /*#__PURE__*/React.createElement(\"button\", {\n    onClick: () => handleDeleteMap(map._id),\n    className: \"delete-map-button\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 514,\n      columnNumber: 17\n    }\n  }, \"\\xD7\")))), selectedMap && /*#__PURE__*/React.createElement(\"div\", {\n    className: \"map-description\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 525,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(\"h3\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 526,\n      columnNumber: 15\n    }\n  }, \"\\uB9F5 \\uC124\\uBA85\"), /*#__PURE__*/React.createElement(\"p\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 527,\n      columnNumber: 15\n    }\n  }, selectedMap.description))), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"map-image-and-node-list\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 533,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"map-image-container\",\n    style: {\n      position: 'relative'\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 535,\n      columnNumber: 11\n    }\n  }, mapImage ? /*#__PURE__*/React.createElement(React.Fragment, null, /*#__PURE__*/React.createElement(\"canvas\", {\n    ref: canvasRef // 맵 캔버스\n    ,\n    className: \"map-canvas\",\n    style: {\n      position: 'absolute',\n      top: 0,\n      left: 0,\n      cursor: isCreatingNode ? 'crosshair' : 'default',\n      zIndex: 1\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 542,\n      columnNumber: 17\n    }\n  }), /*#__PURE__*/React.createElement(\"canvas\", {\n    ref: nodeCanvasRef // 노드 캔버스\n    ,\n    className: \"node-canvas\",\n    style: {\n      position: 'absolute',\n      top: 0,\n      left: 0,\n      zIndex: 2\n    },\n    onMouseMove: handleMouseMove,\n    onMouseLeave: handleMouseLeave,\n    onClick: handleMapClick,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 554,\n      columnNumber: 17\n    }\n  })) : /*#__PURE__*/React.createElement(\"p\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 569,\n      columnNumber: 15\n    }\n  }, \"Select a map to view its image\")), /*#__PURE__*/React.createElement(NodeList, {\n    nodes: nodes,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 574,\n      columnNumber: 11\n    }\n  }), \" \")), isNodePopupOpen && /*#__PURE__*/React.createElement(\"div\", {\n    className: \"popup-container\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 580,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(\"h3\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 581,\n      columnNumber: 11\n    }\n  }, \"Create Node\"), /*#__PURE__*/React.createElement(\"p\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 582,\n      columnNumber: 11\n    }\n  }, \"X: \", nodeX.toFixed(2), \", Y: \", nodeY.toFixed(2)), /*#__PURE__*/React.createElement(\"input\", {\n    type: \"text\",\n    value: nodeName,\n    onChange: e => setNodeName(e.target.value),\n    placeholder: \"Enter node name\",\n    className: \"popup-input\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 583,\n      columnNumber: 11\n    }\n  }), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"popup-button-container\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 590,\n      columnNumber: 11\n    }\n  }, /*#__PURE__*/React.createElement(\"button\", {\n    onClick: handleSubmitNode,\n    className: \"popup-submit-button\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 591,\n      columnNumber: 13\n    }\n  }, \"Create\"), /*#__PURE__*/React.createElement(\"button\", {\n    onClick: () => setIsNodePopupOpen(false),\n    className: \"popup-cancel-button\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 594,\n      columnNumber: 13\n    }\n  }, \"Cancel\"))), isUploadPopupOpen && /*#__PURE__*/React.createElement(\"div\", {\n    className: \"popup-container\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 606,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(\"h3\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 607,\n      columnNumber: 11\n    }\n  }, \"Upload Map\"), /*#__PURE__*/React.createElement(\"form\", {\n    onSubmit: handleUploadMap,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 608,\n      columnNumber: 11\n    }\n  }, /*#__PURE__*/React.createElement(\"input\", {\n    type: \"text\",\n    value: uploadName,\n    onChange: e => setUploadName(e.target.value),\n    placeholder: \"Map Name\",\n    required: true,\n    className: \"popup-input\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 609,\n      columnNumber: 13\n    }\n  }), /*#__PURE__*/React.createElement(\"textarea\", {\n    value: uploadDescription,\n    onChange: e => setUploadDescription(e.target.value),\n    placeholder: \"Map Description\",\n    required: true,\n    className: \"popup-textarea\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 617,\n      columnNumber: 13\n    }\n  }), /*#__PURE__*/React.createElement(\"label\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 624,\n      columnNumber: 13\n    }\n  }, \"Map File (.pgm, .png, .jpg)\"), /*#__PURE__*/React.createElement(\"input\", {\n    type: \"file\",\n    accept: \".pgm,.png,.jpg\",\n    onChange: handleFileChange,\n    required: true,\n    className: \"popup-file-input\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 625,\n      columnNumber: 13\n    }\n  }), /*#__PURE__*/React.createElement(\"label\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 632,\n      columnNumber: 13\n    }\n  }, \"YAML File (.yaml)\"), /*#__PURE__*/React.createElement(\"input\", {\n    type: \"file\",\n    accept: \".yaml\",\n    onChange: handleYamlFileChange,\n    required: true,\n    className: \"popup-file-input\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 633,\n      columnNumber: 13\n    }\n  }), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"popup-button-container\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 640,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(\"button\", {\n    type: \"submit\",\n    className: \"popup-submit-button\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 641,\n      columnNumber: 15\n    }\n  }, \"Upload\"), /*#__PURE__*/React.createElement(\"button\", {\n    type: \"button\",\n    onClick: () => setIsUploadPopupOpen(false),\n    className: \"popup-cancel-button\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 644,\n      columnNumber: 15\n    }\n  }, \"Cancel\")))), isEditPopupOpen && /*#__PURE__*/React.createElement(\"div\", {\n    className: \"popup-container\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 658,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(\"h3\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 659,\n      columnNumber: 11\n    }\n  }, \"Edit Map\"), /*#__PURE__*/React.createElement(\"form\", {\n    onSubmit: handleUpdateMap,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 660,\n      columnNumber: 11\n    }\n  }, /*#__PURE__*/React.createElement(\"input\", {\n    type: \"text\",\n    value: editName,\n    onChange: e => setEditName(e.target.value),\n    placeholder: \"Map Name\",\n    required: true,\n    className: \"popup-input\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 661,\n      columnNumber: 13\n    }\n  }), /*#__PURE__*/React.createElement(\"textarea\", {\n    value: editDescription,\n    onChange: e => setEditDescription(e.target.value),\n    placeholder: \"Map Description\",\n    required: true,\n    className: \"popup-textarea\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 669,\n      columnNumber: 13\n    }\n  }), /*#__PURE__*/React.createElement(\"label\", {\n    style: {\n      marginTop: '10px',\n      color: '#333'\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 677,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(\"input\", {\n    type: \"checkbox\",\n    checked: isMonitored,\n    onChange: e => setIsMonitored(e.target.checked),\n    style: {\n      marginRight: '10px'\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 678,\n      columnNumber: 15\n    }\n  }), \"\\uBAA8\\uB2C8\\uD130\\uB9C1 \\uB9F5\\uC73C\\uB85C \\uC124\\uC815\"), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"popup-button-container\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 686,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(\"button\", {\n    type: \"submit\",\n    className: \"popup-submit-button\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 687,\n      columnNumber: 15\n    }\n  }, \"Update\"), /*#__PURE__*/React.createElement(\"button\", {\n    type: \"button\",\n    onClick: () => setIsEditPopupOpen(false),\n    className: \"popup-cancel-button\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 690,\n      columnNumber: 15\n    }\n  }, \"Cancel\")))), hoveredNode && /*#__PURE__*/React.createElement(\"div\", {\n    className: \"tooltip\",\n    style: {\n      position: 'fixed',\n      top: `${tooltipPosition.y + 10}px`,\n      left: `${tooltipPosition.x + 10}px`,\n      backgroundColor: 'rgba(0, 0, 0, 0.7)',\n      color: 'white',\n      padding: '5px 10px',\n      borderRadius: '4px',\n      pointerEvents: 'none',\n      zIndex: 1000,\n      fontSize: '12px'\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 704,\n      columnNumber: 9\n    }\n  }, hoveredNode.name));\n}\nexport default Mapmanage;","map":{"version":3,"names":["React","useState","useEffect","useRef","axios","FontAwesomeIcon","faEdit","faPlus","Navbar","LogoutButton","UserInfo","worldToMap","mapToWorld","NodeList","Mapmanage","maps","setMaps","selectedMap","setSelectedMap","editName","setEditName","editDescription","setEditDescription","isMonitored","setIsMonitored","uploadName","setUploadName","uploadDescription","setUploadDescription","mapFile","setMapFile","yamlFile","setYamlFile","mapImage","setMapImage","isUploadPopupOpen","setIsUploadPopupOpen","isEditPopupOpen","setIsEditPopupOpen","isCreatingNode","setIsCreatingNode","nodeX","setNodeX","nodeY","setNodeY","nodeName","setNodeName","isNodePopupOpen","setIsNodePopupOpen","canvasRef","nodeCanvasRef","mapImageRef","nodes","setNodes","isDeletingNode","setIsDeletingNode","imageNaturalWidth","setImageNaturalWidth","imageNaturalHeight","setImageNaturalHeight","hoveredNode","setHoveredNode","tooltipPosition","setTooltipPosition","x","y","fetchMaps","token","localStorage","getItem","alert","response","get","headers","data","error","console","handleSelectMap","map","name","description","fetchNodes","_id","Authorization","responseType","imageUrl","URL","createObjectURL","mapId","status","loadMapImage","canvas","current","ctx","getContext","Image","src","onload","imgWidth","width","imgHeight","height","clearRect","drawImage","drawNodes","forEach","node","size","fillStyle","fillRect","document","body","style","cursor","handleMouseMove","e","rect","getBoundingClientRect","mouseX","clientX","left","mouseY","clientY","top","foundNode","distance","Math","sqrt","handleMouseLeave","handleMapClick","clickX","clickY","nodeToDelete","confirmDelete","window","confirm","put","handleSubmitNode","trim","length","post","handleDeleteMap","handleFileChange","target","files","handleYamlFileChange","handleUpdateMap","preventDefault","_error$response","_error$response$data","message","handleUploadMap","formData","FormData","append","openEditPopup","handleCreateNodeMode","handleImageLoad","img","naturalWidth","naturalHeight","log","revokeObjectURL","handleDeleteNodeMode","createElement","className","__self","__source","fileName","_jsxFileName","lineNumber","columnNumber","onClick","icon","key","position","Fragment","ref","zIndex","onMouseMove","onMouseLeave","toFixed","type","value","onChange","placeholder","onSubmit","required","accept","marginTop","color","checked","marginRight","backgroundColor","padding","borderRadius","pointerEvents","fontSize"],"sources":["/home/ketgintern/Desktop/FMS-AGV-AMR/frontend/src/pages/Map/Mapmanage.js"],"sourcesContent":["// src/components/MapManage/Mapmanage.js\n\nimport React, { useState, useEffect, useRef } from 'react';\nimport axios from 'axios';\nimport { FontAwesomeIcon } from '@fortawesome/react-fontawesome';\nimport { faEdit, faPlus } from '@fortawesome/free-solid-svg-icons';\n\nimport Navbar from '../../components/Common/Navbar';\nimport LogoutButton from '../../components/Common/LogoutButton';\nimport UserInfo from '../../components/Common/UserInfo';\nimport './Mapmanage.css';\nimport { worldToMap, mapToWorld } from '../../utils/coordinateUtils';\nimport NodeList from './NodeList'; // NodeList 컴포넌트 임포트\n\nfunction Mapmanage() {\n  const [maps, setMaps] = useState([]);\n  const [selectedMap, setSelectedMap] = useState(null); // 선택된 맵 상태\n  const [editName, setEditName] = useState('');\n  const [editDescription, setEditDescription] = useState('');\n  const [isMonitored, setIsMonitored] = useState(false); // 모니터링 설정 체크박스 상태\n  const [uploadName, setUploadName] = useState('');\n  const [uploadDescription, setUploadDescription] = useState('');\n  const [mapFile, setMapFile] = useState(null);\n  const [yamlFile, setYamlFile] = useState(null);\n  const [mapImage, setMapImage] = useState(null);\n  const [isUploadPopupOpen, setIsUploadPopupOpen] = useState(false); // 업로드 팝업 상태\n  const [isEditPopupOpen, setIsEditPopupOpen] = useState(false); // 수정 팝업 상태\n  const [isCreatingNode, setIsCreatingNode] = useState(false); // 노드 생성 모드\n  const [nodeX, setNodeX] = useState(null); // X 좌표\n  const [nodeY, setNodeY] = useState(null); // Y 좌표\n  const [nodeName, setNodeName] = useState(''); // 노드 이름\n  const [isNodePopupOpen, setIsNodePopupOpen] = useState(false); // 노드 팝업 상태\n  const canvasRef = useRef(null); // 맵 캔버스 참조\n  const nodeCanvasRef = useRef(null); // 노드 캔버스 참조\n  const mapImageRef = useRef(null); // 지도 이미지 참조\n  const [nodes, setNodes] = useState([]); // 노드 목록 저장\n  const [isDeletingNode, setIsDeletingNode] = useState(false);\n\n  const [imageNaturalWidth, setImageNaturalWidth] = useState(null);\n  const [imageNaturalHeight, setImageNaturalHeight] = useState(null);\n\n  // Hover 상태 관리\n  const [hoveredNode, setHoveredNode] = useState(null);\n  const [tooltipPosition, setTooltipPosition] = useState({ x: 0, y: 0 });\n\n  useEffect(() => {\n    fetchMaps();\n  }, []);\n\n  // 맵 목록을 서버에서 가져오는 함수\n  const fetchMaps = async () => {\n    const token = localStorage.getItem('token');\n\n    if (!token) {\n      alert('No token found, please log in again.');\n      return;\n    }\n\n    try {\n      const response = await axios.get('http://172.30.1.15:5557/map/maps', {\n        headers: {\n          'Authorization': `Bearer ${token}`\n        }\n      });\n      setMaps(response.data);\n    } catch (error) {\n      console.error('Error fetching maps:', error);\n      alert('Failed to fetch maps.');\n    }\n  };\n\n  // 맵을 선택했을 때 호출되는 함수\n  const handleSelectMap = async (map) => {\n    setSelectedMap(map); // 맵 선택 상태 업데이트\n    setEditName(map.name);\n    setEditDescription(map.description);\n    setIsMonitored(map.isMonitored || false); // 모니터링 지도 상태 설정\n  \n    // 맵 선택 후에 노드를 비동기로 가져오기\n    await fetchNodes(map._id); // 노드 데이터를 비동기로 가져옴\n  \n    const token = localStorage.getItem('token');\n    try {\n      const response = await axios.get(`http://172.30.1.15:5557/map/file/${map._id}`, {\n        headers: { Authorization: `Bearer ${token}` },\n        responseType: 'blob',\n      });\n      const imageUrl = URL.createObjectURL(response.data);\n      setMapImage(imageUrl); // 이미지 설정\n    } catch (error) {\n      console.error('Error fetching map image:', error);\n      alert('Failed to fetch map image.');\n    }\n  };\n\n  const fetchNodes = async (mapId) => {\n    try {\n      const response = await axios.get(`http://172.30.1.15:5557/map/nodes/${mapId}`);\n      if (response.status === 200) {\n        setNodes(response.data); // 노드 리스트 상태 업데이트\n      } else {\n        setNodes([]); // 실패 시 빈 배열로 초기화\n      }\n    } catch (error) {\n      console.error('Error fetching nodes:', error);\n      setNodes([]); // 오류 발생 시에도 빈 배열로 초기화\n      alert('Failed to fetch nodes.');\n    }\n  };\n\n  // 이미지 로드 시 호출되는 함수 (지도 이미지를 맵 캔버스에 그리기)\n  const loadMapImage = () => {\n    const canvas = canvasRef.current;\n    if (!canvas) return;\n\n    const ctx = canvas.getContext('2d');\n    mapImageRef.current = new Image();\n    mapImageRef.current.src = mapImage;\n\n    mapImageRef.current.onload = () => {\n      const imgWidth = mapImageRef.current.width;\n      const imgHeight = mapImageRef.current.height;\n      setImageNaturalWidth(imgWidth);\n      setImageNaturalHeight(imgHeight);\n\n      // 맵 캔버스 크기 조정\n      canvas.width = imgWidth;\n      canvas.height = imgHeight;\n\n      // 지도 이미지를 맵 캔버스에 그리기\n      ctx.clearRect(0, 0, canvas.width, canvas.height); // 기존 캔버스 내용 지우기\n      ctx.drawImage(mapImageRef.current, 0, 0, imgWidth, imgHeight);\n\n      // 노드를 노드 캔버스에 그리기\n      drawNodes();\n    };\n  };\n\n  // 노드를 노드 캔버스에 그리는 함수\n  const drawNodes = () => {\n    const canvas = nodeCanvasRef.current;\n    const ctx = canvas.getContext('2d');\n\n    if (!canvas || !imageNaturalWidth || !imageNaturalHeight) return;\n\n    // 노드 캔버스 크기 설정 (맵과 동일하게)\n    canvas.width = imageNaturalWidth;\n    canvas.height = imageNaturalHeight;\n\n    ctx.clearRect(0, 0, canvas.width, canvas.height); // 기존 노드 지우기\n\n    nodes.forEach((node) => {\n      const { x, y } = worldToMap(node.x, node.y, imageNaturalWidth, imageNaturalHeight);\n\n      // 노드를 빨간 정사각형으로 그리기\n      const size = 10; // 정사각형의 크기\n      ctx.fillStyle = 'red';\n      ctx.fillRect(x - size / 2, y - size / 2, size, size); // 중심을 기준으로 그리기\n    });\n  };\n\n  // 이미지 로드 후 캔버스에 지도 그리기\n  useEffect(() => {\n    if (mapImage) {\n      loadMapImage();\n    }\n  }, [mapImage]);\n\n  // 노드 변경 시마다 다시 그리기\n  useEffect(() => {\n    if (nodeCanvasRef.current && imageNaturalWidth && imageNaturalHeight) {\n      drawNodes(); // 노드를 노드 캔버스에 다시 그리기\n    }\n  }, [nodes]);\n\n  useEffect(() => {\n    if (!isDeletingNode) {\n      document.body.style.cursor = 'default'; // 삭제 모드가 아닐 때 커서를 기본으로 복구\n    }\n  }, [isDeletingNode]);\n\n  // 마우스가 노드 캔버스 위를 움직일 때 노드 호버 상태 업데이트\n  const handleMouseMove = (e) => {\n    const canvas = nodeCanvasRef.current;\n    if (!canvas) return;\n\n    const rect = canvas.getBoundingClientRect();\n    const mouseX = e.clientX - rect.left;\n    const mouseY = e.clientY - rect.top;\n\n    let foundNode = null;\n\n    for (let node of nodes) {\n      const { x, y } = worldToMap(node.x, node.y, imageNaturalWidth, imageNaturalHeight);\n      const distance = Math.sqrt((mouseX - x) ** 2 + (mouseY - y) ** 2);\n      if (distance < 5) { // 노드 반경 5px 내에 있을 때\n        foundNode = node;\n        break;\n      }\n    }\n\n    if (foundNode) {\n      setHoveredNode(foundNode);\n      setTooltipPosition({ x: e.clientX, y: e.clientY });\n    } else {\n      setHoveredNode(null);\n    }\n  };\n\n  // 마우스가 캔버스를 벗어났을 때 호버 상태 초기화\n  const handleMouseLeave = () => {\n    setHoveredNode(null);\n  };\n\n  // 맵 이미지 클릭 시 노드 생성 또는 삭제\n  const handleMapClick = async (e) => {\n    if (!selectedMap) return;\n  \n    const canvas = nodeCanvasRef.current;\n    if (!canvas) return;\n  \n    const rect = canvas.getBoundingClientRect();\n    const clickX = e.clientX - rect.left;\n    const clickY = e.clientY - rect.top;\n  \n    const { x, y } = mapToWorld(clickX, clickY, imageNaturalWidth, imageNaturalHeight);\n  \n    if (isCreatingNode) {\n      // 노드 생성 로직\n      setNodeX(x);\n      setNodeY(y);\n      setIsCreatingNode(false);\n      setIsNodePopupOpen(true);\n      document.body.style.cursor = 'default';\n    } else if (isDeletingNode) {\n      // 클릭한 위치 근처에 있는 노드를 찾아 삭제\n      let nodeToDelete = null;\n      for (let node of nodes) {\n        const { x: nodeX, y: nodeY } = worldToMap(node.x, node.y, imageNaturalWidth, imageNaturalHeight);\n        const distance = Math.sqrt((clickX - nodeX) ** 2 + (clickY - nodeY) ** 2);\n        if (distance < 5) {\n          nodeToDelete = node;\n          break;\n        }\n      }\n  \n      if (nodeToDelete) {\n        const confirmDelete = window.confirm(`노드 \"${nodeToDelete.name}\"를 삭제하시겠습니까?`);\n        if (confirmDelete) {\n          try {\n            const token = localStorage.getItem('token');\n            await axios.put(`http://172.30.1.15:5557/map/node/${nodeToDelete._id}`, {}, {\n              headers: { Authorization: `Bearer ${token}` },\n            });\n            alert('노드가 성공적으로 삭제되었습니다.');\n            fetchNodes(selectedMap._id); // 삭제 후 노드 목록 갱신\n            setIsDeletingNode(false); // 삭제 후 삭제 모드 종료\n          } catch (error) {\n            console.error('노드 삭제 중 오류 발생:', error);\n            alert('노드 삭제에 실패했습니다.');\n          }\n        }\n      } else {\n        alert('해당 위치에 노드를 찾을 수 없습니다.');\n      }\n    }\n  };\n\n  // 노드 생성을 제출하는 함수\n  const handleSubmitNode = async () => {\n    const token = localStorage.getItem('token');\n    if (!token) {\n      alert('No token found, please log in again.');\n      return;\n    }\n\n    if (nodeName.trim().length === 0) {\n      alert('Node name cannot be empty.');\n      return;\n    }\n\n    try {\n      await axios.post('http://172.30.1.15:5557/map/nodes', {\n        name: nodeName,\n        x: nodeX,\n        y: nodeY,\n        mapId: selectedMap._id,\n      }, {\n        headers: { Authorization: `Bearer ${token}` },\n      });\n      alert('Node created successfully.');\n      setIsNodePopupOpen(false);\n      setNodeName(''); // 입력 필드 초기화\n      setNodeX(null);\n      setNodeY(null);\n      fetchNodes(selectedMap._id); // 노드 목록 갱신\n    } catch (error) {\n      console.error('Error creating node:', error);\n      alert('Failed to create node.');\n    }\n  };\n\n  // 맵 삭제하는 함수\n  const handleDeleteMap = async (mapId) => {\n    const token = localStorage.getItem('token');\n\n    if (!token) {\n      alert('No token found, please log in again.');\n      return;\n    }\n\n    const confirmDelete = window.confirm('Are you sure you want to delete this map?');\n    if (!confirmDelete) return;\n\n    try {\n      await axios.put(`http://172.30.1.15:5557/map/delete/${mapId}`, {}, {\n        headers: {\n          'Authorization': `Bearer ${token}`\n        }\n      });\n      alert('Map deleted successfully');\n      fetchMaps();\n      if (selectedMap && selectedMap._id === mapId) {\n        setSelectedMap(null); // 선택된 맵을 삭제한 경우 초기화\n        setMapImage(null); // 맵 이미지 초기화\n        setNodes([]); // 노드 목록 초기화\n      }\n    } catch (error) {\n      console.error('Error deleting map:', error);\n      alert('Error deleting map');\n    }\n  };\n\n  // 맵 파일 변경 시 호출되는 함수\n  const handleFileChange = (e) => {\n    setMapFile(e.target.files[0]);\n  };\n\n  // YAML 파일 변경 시 호출되는 함수\n  const handleYamlFileChange = (e) => {\n    setYamlFile(e.target.files[0]);\n  };\n\n  // 맵 업데이트를 처리하는 함수\n  const handleUpdateMap = async (e) => {\n    e.preventDefault();\n\n    if (editName.length < 2) {\n      alert('Map name must be at least 2 characters long.');\n      return;\n    }\n\n    const token = localStorage.getItem('token');\n\n    if (!token) {\n      alert('No token found, please log in again.');\n      return;\n    }\n\n    try {\n      await axios.put(`http://172.30.1.15:5557/map/update/${selectedMap._id}`, {\n        name: editName,\n        description: editDescription,\n        isMonitored // 모니터링 지도 상태 포함\n      }, {\n        headers: {\n          'Authorization': `Bearer ${token}`,\n          'Content-Type': 'application/json'\n        }\n      });\n      alert('Map updated successfully');\n      setIsEditPopupOpen(false); // 수정 후 팝업 닫기\n      fetchMaps();\n    } catch (error) {\n      console.error('Error updating map:', error);\n      alert(`Error updating map: ${error.response?.data?.message || error.message}`);\n    }\n  };\n\n  // 맵 업로드를 처리하는 함수\n  const handleUploadMap = async (e) => {\n    e.preventDefault();\n\n    if (uploadName.length < 2) {\n      alert('Map name must be at least 2 characters long.');\n      return;\n    }\n\n    const formData = new FormData();\n    formData.append('name', uploadName);\n    formData.append('description', uploadDescription);\n    formData.append('file', mapFile);\n    formData.append('yaml', yamlFile);\n\n    const token = localStorage.getItem('token');\n\n    if (!token) {\n      alert('No token found, please log in again.');\n      return;\n    }\n\n    try {\n      await axios.post('http://172.30.1.15:5557/map/upload', formData, {\n        headers: {\n          'Authorization': `Bearer ${token}`,\n          'Content-Type': 'multipart/form-data'\n        }\n      });\n      alert('Map uploaded successfully');\n      setIsUploadPopupOpen(false); // 업로드 후 팝업 닫기\n      fetchMaps();\n    } catch (error) {\n      console.error('Error uploading map:', error);\n      alert('Error uploading map.');\n    }\n  };\n\n  // 맵 수정 팝업을 여는 함수\n  const openEditPopup = (map) => {\n    setSelectedMap(map);\n    setEditName(map.name);\n    setEditDescription(map.description);\n    setIsMonitored(map.isMonitored || false); // 모니터링 상태 설정\n    setIsEditPopupOpen(true); // 수정 팝업 열기\n  };\n\n  // 노드 생성 모드를 활성화하는 함수\n  const handleCreateNodeMode = () => {\n    if (!selectedMap) {\n      alert('Please select a map first.');\n      return;\n    }\n    setIsCreatingNode(true);\n    document.body.style.cursor = 'crosshair'; // 마우스 커서 십자가 모양 변경\n  };\n\n  // 이미지 로드 시 실제 크기와 렌더링된 크기를 저장하는 함수\n  const handleImageLoad = (e) => {\n    const img = e.target;\n    setImageNaturalWidth(img.naturalWidth);\n    setImageNaturalHeight(img.naturalHeight);\n    console.log(`Image Loaded: Natural (${img.naturalWidth}, ${img.naturalHeight})`);\n  };\n\n  // URL 객체 해제를 위한 useEffect\n  useEffect(() => {\n    return () => {\n      if (mapImage) {\n        URL.revokeObjectURL(mapImage);\n      }\n    };\n  }, [mapImage]);\n\n  // 노드 삭제 모드를 활성화하는 함수\n  const handleDeleteNodeMode = () => {\n    if (!selectedMap) {\n      alert('먼저 맵을 선택해주세요.');\n      return;\n    }\n    setIsDeletingNode(true);\n    document.body.style.cursor = 'not-allowed'; // 커서를 삭제 모드로 변경\n  };\n\n  return (\n    <div className=\"map-management-page\">\n      {/* 상단 네비게이션 바 */}\n      <header className=\"map-management-header\">\n        <UserInfo />\n        <LogoutButton />\n      </header>\n      <Navbar />\n\n      {/* 툴바: 네비게이션 아래에 위치 */}\n      <div className=\"toolbar\">\n        <button onClick={handleCreateNodeMode} className=\"create-node-button\">\n          <FontAwesomeIcon icon={faPlus} /> Create Node\n        </button>\n        <button onClick={handleDeleteNodeMode} className=\"delete-node-button\">\n          <FontAwesomeIcon icon={faEdit} /> Delete Node\n        </button>\n      </div>\n\n      {/* 맵 리스트와 이미지 컨텐츠 */}\n      <div className=\"map-management-content\">\n        {/* 맵 리스트 컨테이너 */}\n        <div className=\"map-list-container\">\n          <h2 className=\"map-list-header\">\n            Map List\n            <button\n              onClick={() => setIsUploadPopupOpen(true)}\n              className=\"add-map-button\"\n            >\n              <FontAwesomeIcon icon={faPlus} />\n            </button>\n          </h2>\n          <ul className=\"map-list\">\n            {maps.map((map) => (\n              <li\n                key={map._id}\n                className={`map-list-item ${selectedMap?._id === map._id ? 'selected-map' : ''}`}\n              >\n                <span\n                  onClick={() => handleSelectMap(map)}\n                  className=\"map-list-item-name\"\n                >\n                  {map.name}\n                </span>\n                <button\n                  onClick={() => openEditPopup(map)}\n                  className=\"edit-map-button\"\n                >\n                  <FontAwesomeIcon icon={faEdit} />\n                </button>\n                <button\n                  onClick={() => handleDeleteMap(map._id)}\n                  className=\"delete-map-button\"\n                >\n                  &times;\n                </button>\n              </li>\n            ))}\n          </ul>\n\n          {selectedMap && (\n            <div className=\"map-description\">\n              <h3>맵 설명</h3>\n              <p>{selectedMap.description}</p>\n            </div>\n          )}\n        </div>\n\n        {/* 지도 이미지와 노드 렌더링 및 노드 리스트 영역 */}\n        <div className=\"map-image-and-node-list\">\n          {/* 지도 이미지와 노드 렌더링 영역 */}\n          <div\n            className=\"map-image-container\"\n            style={{ position: 'relative' }}\n          >\n            {mapImage ? (\n              <>\n                {/* 맵 이미지를 그리는 캔버스 */}\n                <canvas\n                  ref={canvasRef} // 맵 캔버스\n                  className=\"map-canvas\"\n                  style={{ \n                    position: 'absolute', \n                    top: 0, \n                    left: 0, \n                    cursor: isCreatingNode ? 'crosshair' : 'default',\n                    zIndex: 1 \n                  }}\n                />\n                {/* 노드를 그리는 캔버스 */}\n                <canvas\n                  ref={nodeCanvasRef} // 노드 캔버스\n                  className=\"node-canvas\"\n                  style={{ \n                    position: 'absolute', \n                    top: 0, \n                    left: 0, \n                    zIndex: 2 \n                  }}\n                  onMouseMove={handleMouseMove}\n                  onMouseLeave={handleMouseLeave}\n                  onClick={handleMapClick}\n                />\n              </>\n            ) : (\n              <p>Select a map to view its image</p>\n            )}\n          </div>\n\n          {/* 오른쪽에 노드 목록 표시 */}\n          <NodeList nodes={nodes} /> {/* NodeList 컴포넌트 사용 */}\n        </div>\n      </div>\n\n      {/* Node 생성 팝업 */}\n      {isNodePopupOpen && (\n        <div className=\"popup-container\">\n          <h3>Create Node</h3>\n          <p>X: {nodeX.toFixed(2)}, Y: {nodeY.toFixed(2)}</p>\n          <input\n            type=\"text\"\n            value={nodeName}\n            onChange={(e) => setNodeName(e.target.value)}\n            placeholder=\"Enter node name\"\n            className=\"popup-input\"\n          />\n          <div className=\"popup-button-container\">\n            <button onClick={handleSubmitNode} className=\"popup-submit-button\">\n              Create\n            </button>\n            <button\n              onClick={() => setIsNodePopupOpen(false)}\n              className=\"popup-cancel-button\"\n            >\n              Cancel\n            </button>\n          </div>\n        </div>\n      )}\n\n      {/* Map Upload Popup */}\n      {isUploadPopupOpen && (\n        <div className=\"popup-container\">\n          <h3>Upload Map</h3>\n          <form onSubmit={handleUploadMap}>\n            <input\n              type=\"text\"\n              value={uploadName}\n              onChange={(e) => setUploadName(e.target.value)}\n              placeholder=\"Map Name\"\n              required\n              className=\"popup-input\"\n            />\n            <textarea\n              value={uploadDescription}\n              onChange={(e) => setUploadDescription(e.target.value)}\n              placeholder=\"Map Description\"\n              required\n              className=\"popup-textarea\"\n            />\n            <label>Map File (.pgm, .png, .jpg)</label>\n            <input\n              type=\"file\"\n              accept=\".pgm,.png,.jpg\"\n              onChange={handleFileChange}\n              required\n              className=\"popup-file-input\"\n            />\n            <label>YAML File (.yaml)</label>\n            <input\n              type=\"file\"\n              accept=\".yaml\"\n              onChange={handleYamlFileChange}\n              required\n              className=\"popup-file-input\"\n            />\n            <div className=\"popup-button-container\">\n              <button type=\"submit\" className=\"popup-submit-button\">\n                Upload\n              </button>\n              <button\n                type=\"button\"\n                onClick={() => setIsUploadPopupOpen(false)}\n                className=\"popup-cancel-button\"\n              >\n                Cancel\n              </button>\n            </div>\n          </form>\n        </div>\n      )}\n\n      {/* Edit Map Popup */}\n      {isEditPopupOpen && (\n        <div className=\"popup-container\">\n          <h3>Edit Map</h3>\n          <form onSubmit={handleUpdateMap}>\n            <input\n              type=\"text\"\n              value={editName}\n              onChange={(e) => setEditName(e.target.value)}\n              placeholder=\"Map Name\"\n              required\n              className=\"popup-input\"\n            />\n            <textarea\n              value={editDescription}\n              onChange={(e) => setEditDescription(e.target.value)}\n              placeholder=\"Map Description\"\n              required\n              className=\"popup-textarea\"\n            />\n            {/* 모니터링 지도 설정 체크박스 추가 */}\n            <label style={{ marginTop: '10px', color: '#333' }}>\n              <input\n                type=\"checkbox\"\n                checked={isMonitored}\n                onChange={(e) => setIsMonitored(e.target.checked)}\n                style={{ marginRight: '10px' }}\n              />\n              모니터링 맵으로 설정\n            </label>\n            <div className=\"popup-button-container\">\n              <button type=\"submit\" className=\"popup-submit-button\">\n                Update\n              </button>\n              <button\n                type=\"button\"\n                onClick={() => setIsEditPopupOpen(false)}\n                className=\"popup-cancel-button\"\n              >\n                Cancel\n              </button>\n            </div>\n          </form>\n        </div>\n      )}\n\n      {/* Hover Tooltip */}\n      {hoveredNode && (\n        <div\n          className=\"tooltip\"\n          style={{\n            position: 'fixed',\n            top: `${tooltipPosition.y + 10}px`,\n            left: `${tooltipPosition.x + 10}px`,\n            backgroundColor: 'rgba(0, 0, 0, 0.7)',\n            color: 'white',\n            padding: '5px 10px',\n            borderRadius: '4px',\n            pointerEvents: 'none',\n            zIndex: 1000,\n            fontSize: '12px',\n          }}\n        >\n          {hoveredNode.name}\n        </div>\n      )}\n    </div>\n  );\n}\n\nexport default Mapmanage;\n"],"mappings":";AAAA;;AAEA,OAAOA,KAAK,IAAIC,QAAQ,EAAEC,SAAS,EAAEC,MAAM,QAAQ,OAAO;AAC1D,OAAOC,KAAK,MAAM,OAAO;AACzB,SAASC,eAAe,QAAQ,gCAAgC;AAChE,SAASC,MAAM,EAAEC,MAAM,QAAQ,mCAAmC;AAElE,OAAOC,MAAM,MAAM,gCAAgC;AACnD,OAAOC,YAAY,MAAM,sCAAsC;AAC/D,OAAOC,QAAQ,MAAM,kCAAkC;AACvD,OAAO,iBAAiB;AACxB,SAASC,UAAU,EAAEC,UAAU,QAAQ,6BAA6B;AACpE,OAAOC,QAAQ,MAAM,YAAY,CAAC,CAAC;;AAEnC,SAASC,SAASA,CAAA,EAAG;EACnB,MAAM,CAACC,IAAI,EAAEC,OAAO,CAAC,GAAGf,QAAQ,CAAC,EAAE,CAAC;EACpC,MAAM,CAACgB,WAAW,EAAEC,cAAc,CAAC,GAAGjB,QAAQ,CAAC,IAAI,CAAC,CAAC,CAAC;EACtD,MAAM,CAACkB,QAAQ,EAAEC,WAAW,CAAC,GAAGnB,QAAQ,CAAC,EAAE,CAAC;EAC5C,MAAM,CAACoB,eAAe,EAAEC,kBAAkB,CAAC,GAAGrB,QAAQ,CAAC,EAAE,CAAC;EAC1D,MAAM,CAACsB,WAAW,EAAEC,cAAc,CAAC,GAAGvB,QAAQ,CAAC,KAAK,CAAC,CAAC,CAAC;EACvD,MAAM,CAACwB,UAAU,EAAEC,aAAa,CAAC,GAAGzB,QAAQ,CAAC,EAAE,CAAC;EAChD,MAAM,CAAC0B,iBAAiB,EAAEC,oBAAoB,CAAC,GAAG3B,QAAQ,CAAC,EAAE,CAAC;EAC9D,MAAM,CAAC4B,OAAO,EAAEC,UAAU,CAAC,GAAG7B,QAAQ,CAAC,IAAI,CAAC;EAC5C,MAAM,CAAC8B,QAAQ,EAAEC,WAAW,CAAC,GAAG/B,QAAQ,CAAC,IAAI,CAAC;EAC9C,MAAM,CAACgC,QAAQ,EAAEC,WAAW,CAAC,GAAGjC,QAAQ,CAAC,IAAI,CAAC;EAC9C,MAAM,CAACkC,iBAAiB,EAAEC,oBAAoB,CAAC,GAAGnC,QAAQ,CAAC,KAAK,CAAC,CAAC,CAAC;EACnE,MAAM,CAACoC,eAAe,EAAEC,kBAAkB,CAAC,GAAGrC,QAAQ,CAAC,KAAK,CAAC,CAAC,CAAC;EAC/D,MAAM,CAACsC,cAAc,EAAEC,iBAAiB,CAAC,GAAGvC,QAAQ,CAAC,KAAK,CAAC,CAAC,CAAC;EAC7D,MAAM,CAACwC,KAAK,EAAEC,QAAQ,CAAC,GAAGzC,QAAQ,CAAC,IAAI,CAAC,CAAC,CAAC;EAC1C,MAAM,CAAC0C,KAAK,EAAEC,QAAQ,CAAC,GAAG3C,QAAQ,CAAC,IAAI,CAAC,CAAC,CAAC;EAC1C,MAAM,CAAC4C,QAAQ,EAAEC,WAAW,CAAC,GAAG7C,QAAQ,CAAC,EAAE,CAAC,CAAC,CAAC;EAC9C,MAAM,CAAC8C,eAAe,EAAEC,kBAAkB,CAAC,GAAG/C,QAAQ,CAAC,KAAK,CAAC,CAAC,CAAC;EAC/D,MAAMgD,SAAS,GAAG9C,MAAM,CAAC,IAAI,CAAC,CAAC,CAAC;EAChC,MAAM+C,aAAa,GAAG/C,MAAM,CAAC,IAAI,CAAC,CAAC,CAAC;EACpC,MAAMgD,WAAW,GAAGhD,MAAM,CAAC,IAAI,CAAC,CAAC,CAAC;EAClC,MAAM,CAACiD,KAAK,EAAEC,QAAQ,CAAC,GAAGpD,QAAQ,CAAC,EAAE,CAAC,CAAC,CAAC;EACxC,MAAM,CAACqD,cAAc,EAAEC,iBAAiB,CAAC,GAAGtD,QAAQ,CAAC,KAAK,CAAC;EAE3D,MAAM,CAACuD,iBAAiB,EAAEC,oBAAoB,CAAC,GAAGxD,QAAQ,CAAC,IAAI,CAAC;EAChE,MAAM,CAACyD,kBAAkB,EAAEC,qBAAqB,CAAC,GAAG1D,QAAQ,CAAC,IAAI,CAAC;;EAElE;EACA,MAAM,CAAC2D,WAAW,EAAEC,cAAc,CAAC,GAAG5D,QAAQ,CAAC,IAAI,CAAC;EACpD,MAAM,CAAC6D,eAAe,EAAEC,kBAAkB,CAAC,GAAG9D,QAAQ,CAAC;IAAE+D,CAAC,EAAE,CAAC;IAAEC,CAAC,EAAE;EAAE,CAAC,CAAC;EAEtE/D,SAAS,CAAC,MAAM;IACdgE,SAAS,CAAC,CAAC;EACb,CAAC,EAAE,EAAE,CAAC;;EAEN;EACA,MAAMA,SAAS,GAAG,MAAAA,CAAA,KAAY;IAC5B,MAAMC,KAAK,GAAGC,YAAY,CAACC,OAAO,CAAC,OAAO,CAAC;IAE3C,IAAI,CAACF,KAAK,EAAE;MACVG,KAAK,CAAC,sCAAsC,CAAC;MAC7C;IACF;IAEA,IAAI;MACF,MAAMC,QAAQ,GAAG,MAAMnE,KAAK,CAACoE,GAAG,CAAC,kCAAkC,EAAE;QACnEC,OAAO,EAAE;UACP,eAAe,EAAE,UAAUN,KAAK;QAClC;MACF,CAAC,CAAC;MACFnD,OAAO,CAACuD,QAAQ,CAACG,IAAI,CAAC;IACxB,CAAC,CAAC,OAAOC,KAAK,EAAE;MACdC,OAAO,CAACD,KAAK,CAAC,sBAAsB,EAAEA,KAAK,CAAC;MAC5CL,KAAK,CAAC,uBAAuB,CAAC;IAChC;EACF,CAAC;;EAED;EACA,MAAMO,eAAe,GAAG,MAAOC,GAAG,IAAK;IACrC5D,cAAc,CAAC4D,GAAG,CAAC,CAAC,CAAC;IACrB1D,WAAW,CAAC0D,GAAG,CAACC,IAAI,CAAC;IACrBzD,kBAAkB,CAACwD,GAAG,CAACE,WAAW,CAAC;IACnCxD,cAAc,CAACsD,GAAG,CAACvD,WAAW,IAAI,KAAK,CAAC,CAAC,CAAC;;IAE1C;IACA,MAAM0D,UAAU,CAACH,GAAG,CAACI,GAAG,CAAC,CAAC,CAAC;;IAE3B,MAAMf,KAAK,GAAGC,YAAY,CAACC,OAAO,CAAC,OAAO,CAAC;IAC3C,IAAI;MACF,MAAME,QAAQ,GAAG,MAAMnE,KAAK,CAACoE,GAAG,CAAC,oCAAoCM,GAAG,CAACI,GAAG,EAAE,EAAE;QAC9ET,OAAO,EAAE;UAAEU,aAAa,EAAE,UAAUhB,KAAK;QAAG,CAAC;QAC7CiB,YAAY,EAAE;MAChB,CAAC,CAAC;MACF,MAAMC,QAAQ,GAAGC,GAAG,CAACC,eAAe,CAAChB,QAAQ,CAACG,IAAI,CAAC;MACnDxC,WAAW,CAACmD,QAAQ,CAAC,CAAC,CAAC;IACzB,CAAC,CAAC,OAAOV,KAAK,EAAE;MACdC,OAAO,CAACD,KAAK,CAAC,2BAA2B,EAAEA,KAAK,CAAC;MACjDL,KAAK,CAAC,4BAA4B,CAAC;IACrC;EACF,CAAC;EAED,MAAMW,UAAU,GAAG,MAAOO,KAAK,IAAK;IAClC,IAAI;MACF,MAAMjB,QAAQ,GAAG,MAAMnE,KAAK,CAACoE,GAAG,CAAC,qCAAqCgB,KAAK,EAAE,CAAC;MAC9E,IAAIjB,QAAQ,CAACkB,MAAM,KAAK,GAAG,EAAE;QAC3BpC,QAAQ,CAACkB,QAAQ,CAACG,IAAI,CAAC,CAAC,CAAC;MAC3B,CAAC,MAAM;QACLrB,QAAQ,CAAC,EAAE,CAAC,CAAC,CAAC;MAChB;IACF,CAAC,CAAC,OAAOsB,KAAK,EAAE;MACdC,OAAO,CAACD,KAAK,CAAC,uBAAuB,EAAEA,KAAK,CAAC;MAC7CtB,QAAQ,CAAC,EAAE,CAAC,CAAC,CAAC;MACdiB,KAAK,CAAC,wBAAwB,CAAC;IACjC;EACF,CAAC;;EAED;EACA,MAAMoB,YAAY,GAAGA,CAAA,KAAM;IACzB,MAAMC,MAAM,GAAG1C,SAAS,CAAC2C,OAAO;IAChC,IAAI,CAACD,MAAM,EAAE;IAEb,MAAME,GAAG,GAAGF,MAAM,CAACG,UAAU,CAAC,IAAI,CAAC;IACnC3C,WAAW,CAACyC,OAAO,GAAG,IAAIG,KAAK,CAAC,CAAC;IACjC5C,WAAW,CAACyC,OAAO,CAACI,GAAG,GAAG/D,QAAQ;IAElCkB,WAAW,CAACyC,OAAO,CAACK,MAAM,GAAG,MAAM;MACjC,MAAMC,QAAQ,GAAG/C,WAAW,CAACyC,OAAO,CAACO,KAAK;MAC1C,MAAMC,SAAS,GAAGjD,WAAW,CAACyC,OAAO,CAACS,MAAM;MAC5C5C,oBAAoB,CAACyC,QAAQ,CAAC;MAC9BvC,qBAAqB,CAACyC,SAAS,CAAC;;MAEhC;MACAT,MAAM,CAACQ,KAAK,GAAGD,QAAQ;MACvBP,MAAM,CAACU,MAAM,GAAGD,SAAS;;MAEzB;MACAP,GAAG,CAACS,SAAS,CAAC,CAAC,EAAE,CAAC,EAAEX,MAAM,CAACQ,KAAK,EAAER,MAAM,CAACU,MAAM,CAAC,CAAC,CAAC;MAClDR,GAAG,CAACU,SAAS,CAACpD,WAAW,CAACyC,OAAO,EAAE,CAAC,EAAE,CAAC,EAAEM,QAAQ,EAAEE,SAAS,CAAC;;MAE7D;MACAI,SAAS,CAAC,CAAC;IACb,CAAC;EACH,CAAC;;EAED;EACA,MAAMA,SAAS,GAAGA,CAAA,KAAM;IACtB,MAAMb,MAAM,GAAGzC,aAAa,CAAC0C,OAAO;IACpC,MAAMC,GAAG,GAAGF,MAAM,CAACG,UAAU,CAAC,IAAI,CAAC;IAEnC,IAAI,CAACH,MAAM,IAAI,CAACnC,iBAAiB,IAAI,CAACE,kBAAkB,EAAE;;IAE1D;IACAiC,MAAM,CAACQ,KAAK,GAAG3C,iBAAiB;IAChCmC,MAAM,CAACU,MAAM,GAAG3C,kBAAkB;IAElCmC,GAAG,CAACS,SAAS,CAAC,CAAC,EAAE,CAAC,EAAEX,MAAM,CAACQ,KAAK,EAAER,MAAM,CAACU,MAAM,CAAC,CAAC,CAAC;;IAElDjD,KAAK,CAACqD,OAAO,CAAEC,IAAI,IAAK;MACtB,MAAM;QAAE1C,CAAC;QAAEC;MAAE,CAAC,GAAGtD,UAAU,CAAC+F,IAAI,CAAC1C,CAAC,EAAE0C,IAAI,CAACzC,CAAC,EAAET,iBAAiB,EAAEE,kBAAkB,CAAC;;MAElF;MACA,MAAMiD,IAAI,GAAG,EAAE,CAAC,CAAC;MACjBd,GAAG,CAACe,SAAS,GAAG,KAAK;MACrBf,GAAG,CAACgB,QAAQ,CAAC7C,CAAC,GAAG2C,IAAI,GAAG,CAAC,EAAE1C,CAAC,GAAG0C,IAAI,GAAG,CAAC,EAAEA,IAAI,EAAEA,IAAI,CAAC,CAAC,CAAC;IACxD,CAAC,CAAC;EACJ,CAAC;;EAED;EACAzG,SAAS,CAAC,MAAM;IACd,IAAI+B,QAAQ,EAAE;MACZyD,YAAY,CAAC,CAAC;IAChB;EACF,CAAC,EAAE,CAACzD,QAAQ,CAAC,CAAC;;EAEd;EACA/B,SAAS,CAAC,MAAM;IACd,IAAIgD,aAAa,CAAC0C,OAAO,IAAIpC,iBAAiB,IAAIE,kBAAkB,EAAE;MACpE8C,SAAS,CAAC,CAAC,CAAC,CAAC;IACf;EACF,CAAC,EAAE,CAACpD,KAAK,CAAC,CAAC;EAEXlD,SAAS,CAAC,MAAM;IACd,IAAI,CAACoD,cAAc,EAAE;MACnBwD,QAAQ,CAACC,IAAI,CAACC,KAAK,CAACC,MAAM,GAAG,SAAS,CAAC,CAAC;IAC1C;EACF,CAAC,EAAE,CAAC3D,cAAc,CAAC,CAAC;;EAEpB;EACA,MAAM4D,eAAe,GAAIC,CAAC,IAAK;IAC7B,MAAMxB,MAAM,GAAGzC,aAAa,CAAC0C,OAAO;IACpC,IAAI,CAACD,MAAM,EAAE;IAEb,MAAMyB,IAAI,GAAGzB,MAAM,CAAC0B,qBAAqB,CAAC,CAAC;IAC3C,MAAMC,MAAM,GAAGH,CAAC,CAACI,OAAO,GAAGH,IAAI,CAACI,IAAI;IACpC,MAAMC,MAAM,GAAGN,CAAC,CAACO,OAAO,GAAGN,IAAI,CAACO,GAAG;IAEnC,IAAIC,SAAS,GAAG,IAAI;IAEpB,KAAK,IAAIlB,IAAI,IAAItD,KAAK,EAAE;MACtB,MAAM;QAAEY,CAAC;QAAEC;MAAE,CAAC,GAAGtD,UAAU,CAAC+F,IAAI,CAAC1C,CAAC,EAAE0C,IAAI,CAACzC,CAAC,EAAET,iBAAiB,EAAEE,kBAAkB,CAAC;MAClF,MAAMmE,QAAQ,GAAGC,IAAI,CAACC,IAAI,CAAC,CAACT,MAAM,GAAGtD,CAAC,KAAK,CAAC,GAAG,CAACyD,MAAM,GAAGxD,CAAC,KAAK,CAAC,CAAC;MACjE,IAAI4D,QAAQ,GAAG,CAAC,EAAE;QAAE;QAClBD,SAAS,GAAGlB,IAAI;QAChB;MACF;IACF;IAEA,IAAIkB,SAAS,EAAE;MACb/D,cAAc,CAAC+D,SAAS,CAAC;MACzB7D,kBAAkB,CAAC;QAAEC,CAAC,EAAEmD,CAAC,CAACI,OAAO;QAAEtD,CAAC,EAAEkD,CAAC,CAACO;MAAQ,CAAC,CAAC;IACpD,CAAC,MAAM;MACL7D,cAAc,CAAC,IAAI,CAAC;IACtB;EACF,CAAC;;EAED;EACA,MAAMmE,gBAAgB,GAAGA,CAAA,KAAM;IAC7BnE,cAAc,CAAC,IAAI,CAAC;EACtB,CAAC;;EAED;EACA,MAAMoE,cAAc,GAAG,MAAOd,CAAC,IAAK;IAClC,IAAI,CAAClG,WAAW,EAAE;IAElB,MAAM0E,MAAM,GAAGzC,aAAa,CAAC0C,OAAO;IACpC,IAAI,CAACD,MAAM,EAAE;IAEb,MAAMyB,IAAI,GAAGzB,MAAM,CAAC0B,qBAAqB,CAAC,CAAC;IAC3C,MAAMa,MAAM,GAAGf,CAAC,CAACI,OAAO,GAAGH,IAAI,CAACI,IAAI;IACpC,MAAMW,MAAM,GAAGhB,CAAC,CAACO,OAAO,GAAGN,IAAI,CAACO,GAAG;IAEnC,MAAM;MAAE3D,CAAC;MAAEC;IAAE,CAAC,GAAGrD,UAAU,CAACsH,MAAM,EAAEC,MAAM,EAAE3E,iBAAiB,EAAEE,kBAAkB,CAAC;IAElF,IAAInB,cAAc,EAAE;MAClB;MACAG,QAAQ,CAACsB,CAAC,CAAC;MACXpB,QAAQ,CAACqB,CAAC,CAAC;MACXzB,iBAAiB,CAAC,KAAK,CAAC;MACxBQ,kBAAkB,CAAC,IAAI,CAAC;MACxB8D,QAAQ,CAACC,IAAI,CAACC,KAAK,CAACC,MAAM,GAAG,SAAS;IACxC,CAAC,MAAM,IAAI3D,cAAc,EAAE;MACzB;MACA,IAAI8E,YAAY,GAAG,IAAI;MACvB,KAAK,IAAI1B,IAAI,IAAItD,KAAK,EAAE;QACtB,MAAM;UAAEY,CAAC,EAAEvB,KAAK;UAAEwB,CAAC,EAAEtB;QAAM,CAAC,GAAGhC,UAAU,CAAC+F,IAAI,CAAC1C,CAAC,EAAE0C,IAAI,CAACzC,CAAC,EAAET,iBAAiB,EAAEE,kBAAkB,CAAC;QAChG,MAAMmE,QAAQ,GAAGC,IAAI,CAACC,IAAI,CAAC,CAACG,MAAM,GAAGzF,KAAK,KAAK,CAAC,GAAG,CAAC0F,MAAM,GAAGxF,KAAK,KAAK,CAAC,CAAC;QACzE,IAAIkF,QAAQ,GAAG,CAAC,EAAE;UAChBO,YAAY,GAAG1B,IAAI;UACnB;QACF;MACF;MAEA,IAAI0B,YAAY,EAAE;QAChB,MAAMC,aAAa,GAAGC,MAAM,CAACC,OAAO,CAAC,OAAOH,YAAY,CAACrD,IAAI,cAAc,CAAC;QAC5E,IAAIsD,aAAa,EAAE;UACjB,IAAI;YACF,MAAMlE,KAAK,GAAGC,YAAY,CAACC,OAAO,CAAC,OAAO,CAAC;YAC3C,MAAMjE,KAAK,CAACoI,GAAG,CAAC,oCAAoCJ,YAAY,CAAClD,GAAG,EAAE,EAAE,CAAC,CAAC,EAAE;cAC1ET,OAAO,EAAE;gBAAEU,aAAa,EAAE,UAAUhB,KAAK;cAAG;YAC9C,CAAC,CAAC;YACFG,KAAK,CAAC,oBAAoB,CAAC;YAC3BW,UAAU,CAAChE,WAAW,CAACiE,GAAG,CAAC,CAAC,CAAC;YAC7B3B,iBAAiB,CAAC,KAAK,CAAC,CAAC,CAAC;UAC5B,CAAC,CAAC,OAAOoB,KAAK,EAAE;YACdC,OAAO,CAACD,KAAK,CAAC,gBAAgB,EAAEA,KAAK,CAAC;YACtCL,KAAK,CAAC,gBAAgB,CAAC;UACzB;QACF;MACF,CAAC,MAAM;QACLA,KAAK,CAAC,uBAAuB,CAAC;MAChC;IACF;EACF,CAAC;;EAED;EACA,MAAMmE,gBAAgB,GAAG,MAAAA,CAAA,KAAY;IACnC,MAAMtE,KAAK,GAAGC,YAAY,CAACC,OAAO,CAAC,OAAO,CAAC;IAC3C,IAAI,CAACF,KAAK,EAAE;MACVG,KAAK,CAAC,sCAAsC,CAAC;MAC7C;IACF;IAEA,IAAIzB,QAAQ,CAAC6F,IAAI,CAAC,CAAC,CAACC,MAAM,KAAK,CAAC,EAAE;MAChCrE,KAAK,CAAC,4BAA4B,CAAC;MACnC;IACF;IAEA,IAAI;MACF,MAAMlE,KAAK,CAACwI,IAAI,CAAC,mCAAmC,EAAE;QACpD7D,IAAI,EAAElC,QAAQ;QACdmB,CAAC,EAAEvB,KAAK;QACRwB,CAAC,EAAEtB,KAAK;QACR6C,KAAK,EAAEvE,WAAW,CAACiE;MACrB,CAAC,EAAE;QACDT,OAAO,EAAE;UAAEU,aAAa,EAAE,UAAUhB,KAAK;QAAG;MAC9C,CAAC,CAAC;MACFG,KAAK,CAAC,4BAA4B,CAAC;MACnCtB,kBAAkB,CAAC,KAAK,CAAC;MACzBF,WAAW,CAAC,EAAE,CAAC,CAAC,CAAC;MACjBJ,QAAQ,CAAC,IAAI,CAAC;MACdE,QAAQ,CAAC,IAAI,CAAC;MACdqC,UAAU,CAAChE,WAAW,CAACiE,GAAG,CAAC,CAAC,CAAC;IAC/B,CAAC,CAAC,OAAOP,KAAK,EAAE;MACdC,OAAO,CAACD,KAAK,CAAC,sBAAsB,EAAEA,KAAK,CAAC;MAC5CL,KAAK,CAAC,wBAAwB,CAAC;IACjC;EACF,CAAC;;EAED;EACA,MAAMuE,eAAe,GAAG,MAAOrD,KAAK,IAAK;IACvC,MAAMrB,KAAK,GAAGC,YAAY,CAACC,OAAO,CAAC,OAAO,CAAC;IAE3C,IAAI,CAACF,KAAK,EAAE;MACVG,KAAK,CAAC,sCAAsC,CAAC;MAC7C;IACF;IAEA,MAAM+D,aAAa,GAAGC,MAAM,CAACC,OAAO,CAAC,2CAA2C,CAAC;IACjF,IAAI,CAACF,aAAa,EAAE;IAEpB,IAAI;MACF,MAAMjI,KAAK,CAACoI,GAAG,CAAC,sCAAsChD,KAAK,EAAE,EAAE,CAAC,CAAC,EAAE;QACjEf,OAAO,EAAE;UACP,eAAe,EAAE,UAAUN,KAAK;QAClC;MACF,CAAC,CAAC;MACFG,KAAK,CAAC,0BAA0B,CAAC;MACjCJ,SAAS,CAAC,CAAC;MACX,IAAIjD,WAAW,IAAIA,WAAW,CAACiE,GAAG,KAAKM,KAAK,EAAE;QAC5CtE,cAAc,CAAC,IAAI,CAAC,CAAC,CAAC;QACtBgB,WAAW,CAAC,IAAI,CAAC,CAAC,CAAC;QACnBmB,QAAQ,CAAC,EAAE,CAAC,CAAC,CAAC;MAChB;IACF,CAAC,CAAC,OAAOsB,KAAK,EAAE;MACdC,OAAO,CAACD,KAAK,CAAC,qBAAqB,EAAEA,KAAK,CAAC;MAC3CL,KAAK,CAAC,oBAAoB,CAAC;IAC7B;EACF,CAAC;;EAED;EACA,MAAMwE,gBAAgB,GAAI3B,CAAC,IAAK;IAC9BrF,UAAU,CAACqF,CAAC,CAAC4B,MAAM,CAACC,KAAK,CAAC,CAAC,CAAC,CAAC;EAC/B,CAAC;;EAED;EACA,MAAMC,oBAAoB,GAAI9B,CAAC,IAAK;IAClCnF,WAAW,CAACmF,CAAC,CAAC4B,MAAM,CAACC,KAAK,CAAC,CAAC,CAAC,CAAC;EAChC,CAAC;;EAED;EACA,MAAME,eAAe,GAAG,MAAO/B,CAAC,IAAK;IACnCA,CAAC,CAACgC,cAAc,CAAC,CAAC;IAElB,IAAIhI,QAAQ,CAACwH,MAAM,GAAG,CAAC,EAAE;MACvBrE,KAAK,CAAC,8CAA8C,CAAC;MACrD;IACF;IAEA,MAAMH,KAAK,GAAGC,YAAY,CAACC,OAAO,CAAC,OAAO,CAAC;IAE3C,IAAI,CAACF,KAAK,EAAE;MACVG,KAAK,CAAC,sCAAsC,CAAC;MAC7C;IACF;IAEA,IAAI;MACF,MAAMlE,KAAK,CAACoI,GAAG,CAAC,sCAAsCvH,WAAW,CAACiE,GAAG,EAAE,EAAE;QACvEH,IAAI,EAAE5D,QAAQ;QACd6D,WAAW,EAAE3D,eAAe;QAC5BE,WAAW,CAAC;MACd,CAAC,EAAE;QACDkD,OAAO,EAAE;UACP,eAAe,EAAE,UAAUN,KAAK,EAAE;UAClC,cAAc,EAAE;QAClB;MACF,CAAC,CAAC;MACFG,KAAK,CAAC,0BAA0B,CAAC;MACjChC,kBAAkB,CAAC,KAAK,CAAC,CAAC,CAAC;MAC3B4B,SAAS,CAAC,CAAC;IACb,CAAC,CAAC,OAAOS,KAAK,EAAE;MAAA,IAAAyE,eAAA,EAAAC,oBAAA;MACdzE,OAAO,CAACD,KAAK,CAAC,qBAAqB,EAAEA,KAAK,CAAC;MAC3CL,KAAK,CAAC,uBAAuB,EAAA8E,eAAA,GAAAzE,KAAK,CAACJ,QAAQ,cAAA6E,eAAA,wBAAAC,oBAAA,GAAdD,eAAA,CAAgB1E,IAAI,cAAA2E,oBAAA,uBAApBA,oBAAA,CAAsBC,OAAO,KAAI3E,KAAK,CAAC2E,OAAO,EAAE,CAAC;IAChF;EACF,CAAC;;EAED;EACA,MAAMC,eAAe,GAAG,MAAOpC,CAAC,IAAK;IACnCA,CAAC,CAACgC,cAAc,CAAC,CAAC;IAElB,IAAI1H,UAAU,CAACkH,MAAM,GAAG,CAAC,EAAE;MACzBrE,KAAK,CAAC,8CAA8C,CAAC;MACrD;IACF;IAEA,MAAMkF,QAAQ,GAAG,IAAIC,QAAQ,CAAC,CAAC;IAC/BD,QAAQ,CAACE,MAAM,CAAC,MAAM,EAAEjI,UAAU,CAAC;IACnC+H,QAAQ,CAACE,MAAM,CAAC,aAAa,EAAE/H,iBAAiB,CAAC;IACjD6H,QAAQ,CAACE,MAAM,CAAC,MAAM,EAAE7H,OAAO,CAAC;IAChC2H,QAAQ,CAACE,MAAM,CAAC,MAAM,EAAE3H,QAAQ,CAAC;IAEjC,MAAMoC,KAAK,GAAGC,YAAY,CAACC,OAAO,CAAC,OAAO,CAAC;IAE3C,IAAI,CAACF,KAAK,EAAE;MACVG,KAAK,CAAC,sCAAsC,CAAC;MAC7C;IACF;IAEA,IAAI;MACF,MAAMlE,KAAK,CAACwI,IAAI,CAAC,oCAAoC,EAAEY,QAAQ,EAAE;QAC/D/E,OAAO,EAAE;UACP,eAAe,EAAE,UAAUN,KAAK,EAAE;UAClC,cAAc,EAAE;QAClB;MACF,CAAC,CAAC;MACFG,KAAK,CAAC,2BAA2B,CAAC;MAClClC,oBAAoB,CAAC,KAAK,CAAC,CAAC,CAAC;MAC7B8B,SAAS,CAAC,CAAC;IACb,CAAC,CAAC,OAAOS,KAAK,EAAE;MACdC,OAAO,CAACD,KAAK,CAAC,sBAAsB,EAAEA,KAAK,CAAC;MAC5CL,KAAK,CAAC,sBAAsB,CAAC;IAC/B;EACF,CAAC;;EAED;EACA,MAAMqF,aAAa,GAAI7E,GAAG,IAAK;IAC7B5D,cAAc,CAAC4D,GAAG,CAAC;IACnB1D,WAAW,CAAC0D,GAAG,CAACC,IAAI,CAAC;IACrBzD,kBAAkB,CAACwD,GAAG,CAACE,WAAW,CAAC;IACnCxD,cAAc,CAACsD,GAAG,CAACvD,WAAW,IAAI,KAAK,CAAC,CAAC,CAAC;IAC1Ce,kBAAkB,CAAC,IAAI,CAAC,CAAC,CAAC;EAC5B,CAAC;;EAED;EACA,MAAMsH,oBAAoB,GAAGA,CAAA,KAAM;IACjC,IAAI,CAAC3I,WAAW,EAAE;MAChBqD,KAAK,CAAC,4BAA4B,CAAC;MACnC;IACF;IACA9B,iBAAiB,CAAC,IAAI,CAAC;IACvBsE,QAAQ,CAACC,IAAI,CAACC,KAAK,CAACC,MAAM,GAAG,WAAW,CAAC,CAAC;EAC5C,CAAC;;EAED;EACA,MAAM4C,eAAe,GAAI1C,CAAC,IAAK;IAC7B,MAAM2C,GAAG,GAAG3C,CAAC,CAAC4B,MAAM;IACpBtF,oBAAoB,CAACqG,GAAG,CAACC,YAAY,CAAC;IACtCpG,qBAAqB,CAACmG,GAAG,CAACE,aAAa,CAAC;IACxCpF,OAAO,CAACqF,GAAG,CAAC,0BAA0BH,GAAG,CAACC,YAAY,KAAKD,GAAG,CAACE,aAAa,GAAG,CAAC;EAClF,CAAC;;EAED;EACA9J,SAAS,CAAC,MAAM;IACd,OAAO,MAAM;MACX,IAAI+B,QAAQ,EAAE;QACZqD,GAAG,CAAC4E,eAAe,CAACjI,QAAQ,CAAC;MAC/B;IACF,CAAC;EACH,CAAC,EAAE,CAACA,QAAQ,CAAC,CAAC;;EAEd;EACA,MAAMkI,oBAAoB,GAAGA,CAAA,KAAM;IACjC,IAAI,CAAClJ,WAAW,EAAE;MAChBqD,KAAK,CAAC,eAAe,CAAC;MACtB;IACF;IACAf,iBAAiB,CAAC,IAAI,CAAC;IACvBuD,QAAQ,CAACC,IAAI,CAACC,KAAK,CAACC,MAAM,GAAG,aAAa,CAAC,CAAC;EAC9C,CAAC;EAED,oBACEjH,KAAA,CAAAoK,aAAA;IAAKC,SAAS,EAAC,qBAAqB;IAAAC,MAAA;IAAAC,QAAA;MAAAC,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA;EAAA,gBAElC3K,KAAA,CAAAoK,aAAA;IAAQC,SAAS,EAAC,uBAAuB;IAAAC,MAAA;IAAAC,QAAA;MAAAC,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA;EAAA,gBACvC3K,KAAA,CAAAoK,aAAA,CAAC1J,QAAQ;IAAA4J,MAAA;IAAAC,QAAA;MAAAC,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA;EAAA,CAAE,CAAC,eACZ3K,KAAA,CAAAoK,aAAA,CAAC3J,YAAY;IAAA6J,MAAA;IAAAC,QAAA;MAAAC,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA;EAAA,CAAE,CACT,CAAC,eACT3K,KAAA,CAAAoK,aAAA,CAAC5J,MAAM;IAAA8J,MAAA;IAAAC,QAAA;MAAAC,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA;EAAA,CAAE,CAAC,eAGV3K,KAAA,CAAAoK,aAAA;IAAKC,SAAS,EAAC,SAAS;IAAAC,MAAA;IAAAC,QAAA;MAAAC,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA;EAAA,gBACtB3K,KAAA,CAAAoK,aAAA;IAAQQ,OAAO,EAAEhB,oBAAqB;IAACS,SAAS,EAAC,oBAAoB;IAAAC,MAAA;IAAAC,QAAA;MAAAC,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA;EAAA,gBACnE3K,KAAA,CAAAoK,aAAA,CAAC/J,eAAe;IAACwK,IAAI,EAAEtK,MAAO;IAAA+J,MAAA;IAAAC,QAAA;MAAAC,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA;EAAA,CAAE,CAAC,gBAC3B,CAAC,eACT3K,KAAA,CAAAoK,aAAA;IAAQQ,OAAO,EAAET,oBAAqB;IAACE,SAAS,EAAC,oBAAoB;IAAAC,MAAA;IAAAC,QAAA;MAAAC,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA;EAAA,gBACnE3K,KAAA,CAAAoK,aAAA,CAAC/J,eAAe;IAACwK,IAAI,EAAEvK,MAAO;IAAAgK,MAAA;IAAAC,QAAA;MAAAC,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA;EAAA,CAAE,CAAC,gBAC3B,CACL,CAAC,eAGN3K,KAAA,CAAAoK,aAAA;IAAKC,SAAS,EAAC,wBAAwB;IAAAC,MAAA;IAAAC,QAAA;MAAAC,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA;EAAA,gBAErC3K,KAAA,CAAAoK,aAAA;IAAKC,SAAS,EAAC,oBAAoB;IAAAC,MAAA;IAAAC,QAAA;MAAAC,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA;EAAA,gBACjC3K,KAAA,CAAAoK,aAAA;IAAIC,SAAS,EAAC,iBAAiB;IAAAC,MAAA;IAAAC,QAAA;MAAAC,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA;EAAA,GAAC,UAE9B,eAAA3K,KAAA,CAAAoK,aAAA;IACEQ,OAAO,EAAEA,CAAA,KAAMxI,oBAAoB,CAAC,IAAI,CAAE;IAC1CiI,SAAS,EAAC,gBAAgB;IAAAC,MAAA;IAAAC,QAAA;MAAAC,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA;EAAA,gBAE1B3K,KAAA,CAAAoK,aAAA,CAAC/J,eAAe;IAACwK,IAAI,EAAEtK,MAAO;IAAA+J,MAAA;IAAAC,QAAA;MAAAC,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA;EAAA,CAAE,CAC1B,CACN,CAAC,eACL3K,KAAA,CAAAoK,aAAA;IAAIC,SAAS,EAAC,UAAU;IAAAC,MAAA;IAAAC,QAAA;MAAAC,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA;EAAA,GACrB5J,IAAI,CAAC+D,GAAG,CAAEA,GAAG,iBACZ9E,KAAA,CAAAoK,aAAA;IACEU,GAAG,EAAEhG,GAAG,CAACI,GAAI;IACbmF,SAAS,EAAE,iBAAiB,CAAApJ,WAAW,aAAXA,WAAW,uBAAXA,WAAW,CAAEiE,GAAG,MAAKJ,GAAG,CAACI,GAAG,GAAG,cAAc,GAAG,EAAE,EAAG;IAAAoF,MAAA;IAAAC,QAAA;MAAAC,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA;EAAA,gBAEjF3K,KAAA,CAAAoK,aAAA;IACEQ,OAAO,EAAEA,CAAA,KAAM/F,eAAe,CAACC,GAAG,CAAE;IACpCuF,SAAS,EAAC,oBAAoB;IAAAC,MAAA;IAAAC,QAAA;MAAAC,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA;EAAA,GAE7B7F,GAAG,CAACC,IACD,CAAC,eACP/E,KAAA,CAAAoK,aAAA;IACEQ,OAAO,EAAEA,CAAA,KAAMjB,aAAa,CAAC7E,GAAG,CAAE;IAClCuF,SAAS,EAAC,iBAAiB;IAAAC,MAAA;IAAAC,QAAA;MAAAC,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA;EAAA,gBAE3B3K,KAAA,CAAAoK,aAAA,CAAC/J,eAAe;IAACwK,IAAI,EAAEvK,MAAO;IAAAgK,MAAA;IAAAC,QAAA;MAAAC,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA;EAAA,CAAE,CAC1B,CAAC,eACT3K,KAAA,CAAAoK,aAAA;IACEQ,OAAO,EAAEA,CAAA,KAAM/B,eAAe,CAAC/D,GAAG,CAACI,GAAG,CAAE;IACxCmF,SAAS,EAAC,mBAAmB;IAAAC,MAAA;IAAAC,QAAA;MAAAC,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA;EAAA,GAC9B,MAEO,CACN,CACL,CACC,CAAC,EAEJ1J,WAAW,iBACVjB,KAAA,CAAAoK,aAAA;IAAKC,SAAS,EAAC,iBAAiB;IAAAC,MAAA;IAAAC,QAAA;MAAAC,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA;EAAA,gBAC9B3K,KAAA,CAAAoK,aAAA;IAAAE,MAAA;IAAAC,QAAA;MAAAC,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA;EAAA,GAAI,qBAAQ,CAAC,eACb3K,KAAA,CAAAoK,aAAA;IAAAE,MAAA;IAAAC,QAAA;MAAAC,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA;EAAA,GAAI1J,WAAW,CAAC+D,WAAe,CAC5B,CAEJ,CAAC,eAGNhF,KAAA,CAAAoK,aAAA;IAAKC,SAAS,EAAC,yBAAyB;IAAAC,MAAA;IAAAC,QAAA;MAAAC,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA;EAAA,gBAEtC3K,KAAA,CAAAoK,aAAA;IACEC,SAAS,EAAC,qBAAqB;IAC/BrD,KAAK,EAAE;MAAE+D,QAAQ,EAAE;IAAW,CAAE;IAAAT,MAAA;IAAAC,QAAA;MAAAC,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA;EAAA,GAE/B1I,QAAQ,gBACPjC,KAAA,CAAAoK,aAAA,CAAApK,KAAA,CAAAgL,QAAA,qBAEEhL,KAAA,CAAAoK,aAAA;IACEa,GAAG,EAAEhI,SAAU,CAAC;IAAA;IAChBoH,SAAS,EAAC,YAAY;IACtBrD,KAAK,EAAE;MACL+D,QAAQ,EAAE,UAAU;MACpBpD,GAAG,EAAE,CAAC;MACNH,IAAI,EAAE,CAAC;MACPP,MAAM,EAAE1E,cAAc,GAAG,WAAW,GAAG,SAAS;MAChD2I,MAAM,EAAE;IACV,CAAE;IAAAZ,MAAA;IAAAC,QAAA;MAAAC,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA;EAAA,CACH,CAAC,eAEF3K,KAAA,CAAAoK,aAAA;IACEa,GAAG,EAAE/H,aAAc,CAAC;IAAA;IACpBmH,SAAS,EAAC,aAAa;IACvBrD,KAAK,EAAE;MACL+D,QAAQ,EAAE,UAAU;MACpBpD,GAAG,EAAE,CAAC;MACNH,IAAI,EAAE,CAAC;MACP0D,MAAM,EAAE;IACV,CAAE;IACFC,WAAW,EAAEjE,eAAgB;IAC7BkE,YAAY,EAAEpD,gBAAiB;IAC/B4C,OAAO,EAAE3C,cAAe;IAAAqC,MAAA;IAAAC,QAAA;MAAAC,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA;EAAA,CACzB,CACD,CAAC,gBAEH3K,KAAA,CAAAoK,aAAA;IAAAE,MAAA;IAAAC,QAAA;MAAAC,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA;EAAA,GAAG,gCAAiC,CAEnC,CAAC,eAGN3K,KAAA,CAAAoK,aAAA,CAACvJ,QAAQ;IAACuC,KAAK,EAAEA,KAAM;IAAAkH,MAAA;IAAAC,QAAA;MAAAC,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA;EAAA,CAAE,CAAC,KACvB,CACF,CAAC,EAGL5H,eAAe,iBACd/C,KAAA,CAAAoK,aAAA;IAAKC,SAAS,EAAC,iBAAiB;IAAAC,MAAA;IAAAC,QAAA;MAAAC,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA;EAAA,gBAC9B3K,KAAA,CAAAoK,aAAA;IAAAE,MAAA;IAAAC,QAAA;MAAAC,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA;EAAA,GAAI,aAAe,CAAC,eACpB3K,KAAA,CAAAoK,aAAA;IAAAE,MAAA;IAAAC,QAAA;MAAAC,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA;EAAA,GAAG,KAAG,EAAClI,KAAK,CAAC4I,OAAO,CAAC,CAAC,CAAC,EAAC,OAAK,EAAC1I,KAAK,CAAC0I,OAAO,CAAC,CAAC,CAAK,CAAC,eACnDrL,KAAA,CAAAoK,aAAA;IACEkB,IAAI,EAAC,MAAM;IACXC,KAAK,EAAE1I,QAAS;IAChB2I,QAAQ,EAAGrE,CAAC,IAAKrE,WAAW,CAACqE,CAAC,CAAC4B,MAAM,CAACwC,KAAK,CAAE;IAC7CE,WAAW,EAAC,iBAAiB;IAC7BpB,SAAS,EAAC,aAAa;IAAAC,MAAA;IAAAC,QAAA;MAAAC,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA;EAAA,CACxB,CAAC,eACF3K,KAAA,CAAAoK,aAAA;IAAKC,SAAS,EAAC,wBAAwB;IAAAC,MAAA;IAAAC,QAAA;MAAAC,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA;EAAA,gBACrC3K,KAAA,CAAAoK,aAAA;IAAQQ,OAAO,EAAEnC,gBAAiB;IAAC4B,SAAS,EAAC,qBAAqB;IAAAC,MAAA;IAAAC,QAAA;MAAAC,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA;EAAA,GAAC,QAE3D,CAAC,eACT3K,KAAA,CAAAoK,aAAA;IACEQ,OAAO,EAAEA,CAAA,KAAM5H,kBAAkB,CAAC,KAAK,CAAE;IACzCqH,SAAS,EAAC,qBAAqB;IAAAC,MAAA;IAAAC,QAAA;MAAAC,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA;EAAA,GAChC,QAEO,CACL,CACF,CACN,EAGAxI,iBAAiB,iBAChBnC,KAAA,CAAAoK,aAAA;IAAKC,SAAS,EAAC,iBAAiB;IAAAC,MAAA;IAAAC,QAAA;MAAAC,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA;EAAA,gBAC9B3K,KAAA,CAAAoK,aAAA;IAAAE,MAAA;IAAAC,QAAA;MAAAC,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA;EAAA,GAAI,YAAc,CAAC,eACnB3K,KAAA,CAAAoK,aAAA;IAAMsB,QAAQ,EAAEnC,eAAgB;IAAAe,MAAA;IAAAC,QAAA;MAAAC,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA;EAAA,gBAC9B3K,KAAA,CAAAoK,aAAA;IACEkB,IAAI,EAAC,MAAM;IACXC,KAAK,EAAE9J,UAAW;IAClB+J,QAAQ,EAAGrE,CAAC,IAAKzF,aAAa,CAACyF,CAAC,CAAC4B,MAAM,CAACwC,KAAK,CAAE;IAC/CE,WAAW,EAAC,UAAU;IACtBE,QAAQ;IACRtB,SAAS,EAAC,aAAa;IAAAC,MAAA;IAAAC,QAAA;MAAAC,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA;EAAA,CACxB,CAAC,eACF3K,KAAA,CAAAoK,aAAA;IACEmB,KAAK,EAAE5J,iBAAkB;IACzB6J,QAAQ,EAAGrE,CAAC,IAAKvF,oBAAoB,CAACuF,CAAC,CAAC4B,MAAM,CAACwC,KAAK,CAAE;IACtDE,WAAW,EAAC,iBAAiB;IAC7BE,QAAQ;IACRtB,SAAS,EAAC,gBAAgB;IAAAC,MAAA;IAAAC,QAAA;MAAAC,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA;EAAA,CAC3B,CAAC,eACF3K,KAAA,CAAAoK,aAAA;IAAAE,MAAA;IAAAC,QAAA;MAAAC,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA;EAAA,GAAO,6BAAkC,CAAC,eAC1C3K,KAAA,CAAAoK,aAAA;IACEkB,IAAI,EAAC,MAAM;IACXM,MAAM,EAAC,gBAAgB;IACvBJ,QAAQ,EAAE1C,gBAAiB;IAC3B6C,QAAQ;IACRtB,SAAS,EAAC,kBAAkB;IAAAC,MAAA;IAAAC,QAAA;MAAAC,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA;EAAA,CAC7B,CAAC,eACF3K,KAAA,CAAAoK,aAAA;IAAAE,MAAA;IAAAC,QAAA;MAAAC,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA;EAAA,GAAO,mBAAwB,CAAC,eAChC3K,KAAA,CAAAoK,aAAA;IACEkB,IAAI,EAAC,MAAM;IACXM,MAAM,EAAC,OAAO;IACdJ,QAAQ,EAAEvC,oBAAqB;IAC/B0C,QAAQ;IACRtB,SAAS,EAAC,kBAAkB;IAAAC,MAAA;IAAAC,QAAA;MAAAC,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA;EAAA,CAC7B,CAAC,eACF3K,KAAA,CAAAoK,aAAA;IAAKC,SAAS,EAAC,wBAAwB;IAAAC,MAAA;IAAAC,QAAA;MAAAC,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA;EAAA,gBACrC3K,KAAA,CAAAoK,aAAA;IAAQkB,IAAI,EAAC,QAAQ;IAACjB,SAAS,EAAC,qBAAqB;IAAAC,MAAA;IAAAC,QAAA;MAAAC,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA;EAAA,GAAC,QAE9C,CAAC,eACT3K,KAAA,CAAAoK,aAAA;IACEkB,IAAI,EAAC,QAAQ;IACbV,OAAO,EAAEA,CAAA,KAAMxI,oBAAoB,CAAC,KAAK,CAAE;IAC3CiI,SAAS,EAAC,qBAAqB;IAAAC,MAAA;IAAAC,QAAA;MAAAC,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA;EAAA,GAChC,QAEO,CACL,CACD,CACH,CACN,EAGAtI,eAAe,iBACdrC,KAAA,CAAAoK,aAAA;IAAKC,SAAS,EAAC,iBAAiB;IAAAC,MAAA;IAAAC,QAAA;MAAAC,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA;EAAA,gBAC9B3K,KAAA,CAAAoK,aAAA;IAAAE,MAAA;IAAAC,QAAA;MAAAC,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA;EAAA,GAAI,UAAY,CAAC,eACjB3K,KAAA,CAAAoK,aAAA;IAAMsB,QAAQ,EAAExC,eAAgB;IAAAoB,MAAA;IAAAC,QAAA;MAAAC,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA;EAAA,gBAC9B3K,KAAA,CAAAoK,aAAA;IACEkB,IAAI,EAAC,MAAM;IACXC,KAAK,EAAEpK,QAAS;IAChBqK,QAAQ,EAAGrE,CAAC,IAAK/F,WAAW,CAAC+F,CAAC,CAAC4B,MAAM,CAACwC,KAAK,CAAE;IAC7CE,WAAW,EAAC,UAAU;IACtBE,QAAQ;IACRtB,SAAS,EAAC,aAAa;IAAAC,MAAA;IAAAC,QAAA;MAAAC,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA;EAAA,CACxB,CAAC,eACF3K,KAAA,CAAAoK,aAAA;IACEmB,KAAK,EAAElK,eAAgB;IACvBmK,QAAQ,EAAGrE,CAAC,IAAK7F,kBAAkB,CAAC6F,CAAC,CAAC4B,MAAM,CAACwC,KAAK,CAAE;IACpDE,WAAW,EAAC,iBAAiB;IAC7BE,QAAQ;IACRtB,SAAS,EAAC,gBAAgB;IAAAC,MAAA;IAAAC,QAAA;MAAAC,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA;EAAA,CAC3B,CAAC,eAEF3K,KAAA,CAAAoK,aAAA;IAAOpD,KAAK,EAAE;MAAE6E,SAAS,EAAE,MAAM;MAAEC,KAAK,EAAE;IAAO,CAAE;IAAAxB,MAAA;IAAAC,QAAA;MAAAC,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA;EAAA,gBACjD3K,KAAA,CAAAoK,aAAA;IACEkB,IAAI,EAAC,UAAU;IACfS,OAAO,EAAExK,WAAY;IACrBiK,QAAQ,EAAGrE,CAAC,IAAK3F,cAAc,CAAC2F,CAAC,CAAC4B,MAAM,CAACgD,OAAO,CAAE;IAClD/E,KAAK,EAAE;MAAEgF,WAAW,EAAE;IAAO,CAAE;IAAA1B,MAAA;IAAAC,QAAA;MAAAC,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA;EAAA,CAChC,CAAC,4DAEG,CAAC,eACR3K,KAAA,CAAAoK,aAAA;IAAKC,SAAS,EAAC,wBAAwB;IAAAC,MAAA;IAAAC,QAAA;MAAAC,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA;EAAA,gBACrC3K,KAAA,CAAAoK,aAAA;IAAQkB,IAAI,EAAC,QAAQ;IAACjB,SAAS,EAAC,qBAAqB;IAAAC,MAAA;IAAAC,QAAA;MAAAC,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA;EAAA,GAAC,QAE9C,CAAC,eACT3K,KAAA,CAAAoK,aAAA;IACEkB,IAAI,EAAC,QAAQ;IACbV,OAAO,EAAEA,CAAA,KAAMtI,kBAAkB,CAAC,KAAK,CAAE;IACzC+H,SAAS,EAAC,qBAAqB;IAAAC,MAAA;IAAAC,QAAA;MAAAC,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA;EAAA,GAChC,QAEO,CACL,CACD,CACH,CACN,EAGA/G,WAAW,iBACV5D,KAAA,CAAAoK,aAAA;IACEC,SAAS,EAAC,SAAS;IACnBrD,KAAK,EAAE;MACL+D,QAAQ,EAAE,OAAO;MACjBpD,GAAG,EAAE,GAAG7D,eAAe,CAACG,CAAC,GAAG,EAAE,IAAI;MAClCuD,IAAI,EAAE,GAAG1D,eAAe,CAACE,CAAC,GAAG,EAAE,IAAI;MACnCiI,eAAe,EAAE,oBAAoB;MACrCH,KAAK,EAAE,OAAO;MACdI,OAAO,EAAE,UAAU;MACnBC,YAAY,EAAE,KAAK;MACnBC,aAAa,EAAE,MAAM;MACrBlB,MAAM,EAAE,IAAI;MACZmB,QAAQ,EAAE;IACZ,CAAE;IAAA/B,MAAA;IAAAC,QAAA;MAAAC,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA;EAAA,GAED/G,WAAW,CAACmB,IACV,CAEJ,CAAC;AAEV;AAEA,eAAejE,SAAS","ignoreList":[]},"metadata":{},"sourceType":"module"}