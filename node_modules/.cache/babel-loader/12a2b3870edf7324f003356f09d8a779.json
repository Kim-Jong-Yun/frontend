{"ast":null,"code":"var _jsxFileName = \"/home/ketgintern/Desktop/FMS-AGV-AMR/frontend/src/pages/Map/MapCreatePage.js\";\nimport React, { useEffect, useRef } from 'react';\nimport Janus from './janus.js'; // janus.js 파일을 적절한 경로에 두어야 합니다.\n\nconst MapCreatePage = () => {\n  const janusRef = useRef(null);\n  const videoRef = useRef(null);\n  useEffect(() => {\n    const server = \"http://172.30.1.40:8088/janus\"; // Janus 서버 주소\n    const iceServers = [{\n      urls: \"stun:stun.l.google.com:19302\"\n    }];\n    let janus = null;\n    let sfutest = null;\n    Janus.init({\n      debug: \"all\",\n      callback: function () {\n        janus = new Janus({\n          server,\n          iceServers,\n          success: function () {\n            janus.attach({\n              plugin: \"janus.plugin.videoroom\",\n              success: function (pluginHandle) {\n                sfutest = pluginHandle;\n                let register = {\n                  \"request\": \"join\",\n                  \"room\": 1234,\n                  \"ptype\": \"publisher\",\n                  \"display\": \"webcam\"\n                };\n                sfutest.send({\n                  \"message\": register\n                });\n              },\n              error: function (error) {\n                console.error(\"Error attaching plugin: \", error);\n              },\n              onmessage: function (msg, jsep) {\n                if (jsep !== undefined && jsep !== null) {\n                  sfutest.handleRemoteJsep({\n                    jsep\n                  });\n                }\n              },\n              onlocalstream: function (stream) {\n                if (videoRef.current) {\n                  videoRef.current.srcObject = stream;\n                }\n              },\n              onremotestream: function (stream) {\n                if (videoRef.current) {\n                  videoRef.current.srcObject = stream;\n                }\n              },\n              oncleanup: function () {\n                console.log(\"Cleaned up\");\n              }\n            });\n          },\n          error: function (error) {\n            console.error(\"Error initializing Janus: \", error);\n          },\n          destroyed: function () {\n            console.log(\"Janus destroyed\");\n          }\n        });\n      }\n    });\n    janusRef.current = janus;\n    return () => {\n      if (janusRef.current) {\n        janusRef.current.destroy();\n      }\n    };\n  }, []);\n  return /*#__PURE__*/React.createElement(\"div\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 71,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(\"h1\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 72,\n      columnNumber: 13\n    }\n  }, \"Webcam Stream\"), /*#__PURE__*/React.createElement(\"video\", {\n    ref: videoRef,\n    autoPlay: true,\n    playsInline: true,\n    style: {\n      width: '100%'\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 73,\n      columnNumber: 13\n    }\n  }));\n};\nexport default MapCreatePage;","map":{"version":3,"names":["React","useEffect","useRef","Janus","MapCreatePage","janusRef","videoRef","server","iceServers","urls","janus","sfutest","init","debug","callback","success","attach","plugin","pluginHandle","register","send","error","console","onmessage","msg","jsep","undefined","handleRemoteJsep","onlocalstream","stream","current","srcObject","onremotestream","oncleanup","log","destroyed","destroy","createElement","__self","__source","fileName","_jsxFileName","lineNumber","columnNumber","ref","autoPlay","playsInline","style","width"],"sources":["/home/ketgintern/Desktop/FMS-AGV-AMR/frontend/src/pages/Map/MapCreatePage.js"],"sourcesContent":["import React, { useEffect, useRef } from 'react';\nimport Janus from './janus.js';  // janus.js 파일을 적절한 경로에 두어야 합니다.\n\nconst MapCreatePage = () => {\n    const janusRef = useRef(null);\n    const videoRef = useRef(null);\n\n    useEffect(() => {\n        const server = \"http://172.30.1.40:8088/janus\";  // Janus 서버 주소\n        const iceServers = [{ urls: \"stun:stun.l.google.com:19302\" }];\n        let janus = null;\n        let sfutest = null;\n\n        Janus.init({\n            debug: \"all\",\n            callback: function() {\n                janus = new Janus({\n                    server,\n                    iceServers,\n                    success: function() {\n                        janus.attach({\n                            plugin: \"janus.plugin.videoroom\",\n                            success: function(pluginHandle) {\n                                sfutest = pluginHandle;\n                                let register = { \"request\": \"join\", \"room\": 1234, \"ptype\": \"publisher\", \"display\": \"webcam\" };\n                                sfutest.send({ \"message\": register });\n                            },\n                            error: function(error) {\n                                console.error(\"Error attaching plugin: \", error);\n                            },\n                            onmessage: function(msg, jsep) {\n                                if (jsep !== undefined && jsep !== null) {\n                                    sfutest.handleRemoteJsep({ jsep });\n                                }\n                            },\n                            onlocalstream: function(stream) {\n                                if (videoRef.current) {\n                                    videoRef.current.srcObject = stream;\n                                }\n                            },\n                            onremotestream: function(stream) {\n                                if (videoRef.current) {\n                                    videoRef.current.srcObject = stream;\n                                }\n                            },\n                            oncleanup: function() {\n                                console.log(\"Cleaned up\");\n                            }\n                        });\n                    },\n                    error: function(error) {\n                        console.error(\"Error initializing Janus: \", error);\n                    },\n                    destroyed: function() {\n                        console.log(\"Janus destroyed\");\n                    }\n                });\n            }\n        });\n\n        janusRef.current = janus;\n\n        return () => {\n            if (janusRef.current) {\n                janusRef.current.destroy();\n            }\n        };\n    }, []);\n\n    return (\n        <div>\n            <h1>Webcam Stream</h1>\n            <video ref={videoRef} autoPlay playsInline style={{ width: '100%' }} />\n        </div>\n    );\n};\n\nexport default MapCreatePage;\n\n\n\n\n\n\n\n\n\n\n\n\n\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module"}