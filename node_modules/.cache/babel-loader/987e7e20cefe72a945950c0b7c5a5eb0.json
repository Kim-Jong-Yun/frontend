{"ast":null,"code":"var _jsxFileName = \"/home/ketgintern/Desktop/FMS-AGV-AMR/frontend/src/pages/Test/TestPage.js\";\nimport React, { useState, useEffect, useRef } from 'react';\nimport Navbar from '../../components/Common/Navbar';\nimport LogoutButton from '../../components/Common/LogoutButton';\nimport UserInfo from '../../components/Common/UserInfo';\nimport axios from 'axios';\nimport './TestPage.css';\nimport '@fortawesome/fontawesome-free/css/all.min.css';\nfunction TestPage() {\n  const [mapUrl, setMapUrl] = useState(null);\n  const [robots, setRobots] = useState([]);\n  const [tasks, setTasks] = useState([]);\n  const [isPopupOpen, setIsPopupOpen] = useState(false);\n  const [selectedRobot, setSelectedRobot] = useState(null);\n  const [selectedTask, setSelectedTask] = useState('');\n  const [availableTasks, setAvailableTasks] = useState(['Task 1', 'Task 2', 'Task 3']);\n  const canvasRef = useRef(null);\n  const [mapImage, setMapImage] = useState(null);\n  const [mapResolution, setMapResolution] = useState(0.05);\n  const [mapDimensions, setMapDimensions] = useState({\n    width: 0,\n    height: 0\n  });\n  const [dragging, setDragging] = useState(false);\n  const [dragOffset, setDragOffset] = useState({\n    x: 0,\n    y: 0\n  });\n  const [lastMousePos, setLastMousePos] = useState({\n    x: 0,\n    y: 0\n  });\n  const [expandedRobotId, setExpandedRobotId] = useState(null);\n  useEffect(() => {\n    const fetchData = async () => {\n      await fetchMapMetadata();\n      await fetchMonitoredMap();\n      fetchRobots();\n      fetchAllTasks();\n    };\n    fetchData();\n    const socket = new WebSocket('ws://your-websocket-url');\n    socket.onopen = () => {\n      console.log('WebSocket 연결 성공');\n    };\n    socket.onmessage = event => {\n      const updatedRobots = JSON.parse(event.data);\n      setRobots(updatedRobots);\n\n      // 새로운 로봇 위치 정보를 받아서 로봇 위치만 다시 그리기\n      if (mapImage) {\n        drawRobots(mapImage, dragOffset.x, dragOffset.y); // 지도는 유지한 채 로봇만 갱신\n      }\n    };\n    socket.onerror = error => {\n      console.error('WebSocket 오류:', error);\n    };\n    socket.onclose = () => {\n      console.log('WebSocket 연결 종료');\n    };\n    return () => {\n      socket.close();\n    };\n  }, [mapImage, dragOffset.x, dragOffset.y]);\n  const getToken = () => {\n    const token = localStorage.getItem('token');\n    if (!token) {\n      alert('토큰이 없습니다. 다시 로그인해주세요.');\n      window.location.href = '/login';\n      return null;\n    }\n    return token;\n  };\n  const fetchMapMetadata = async () => {\n    const token = getToken();\n    if (!token) return;\n    try {\n      const response = await axios.get('http://172.30.1.28:5557/map/monitored/metadata', {\n        headers: {\n          Authorization: `Bearer ${token}`\n        }\n      });\n      const metadata = response.data;\n      const resolution = parseFloat(metadata.match(/resolution:\\s*(\\d+.\\d+)/)[1]);\n      setMapResolution(resolution);\n    } catch (error) {\n      console.error('지도 메타데이터 가져오기 오류:', error);\n    }\n  };\n  const fetchMonitoredMap = async () => {\n    const token = getToken();\n    if (!token) return;\n    try {\n      const response = await axios.get('http://172.30.1.28:5557/map/monitored/file', {\n        headers: {\n          Authorization: `Bearer ${token}`\n        },\n        responseType: 'blob'\n      });\n      const url = URL.createObjectURL(response.data);\n      setMapUrl(url);\n      const img = new Image();\n      img.src = url;\n      img.onload = () => {\n        setMapImage(img);\n        setMapDimensions({\n          width: img.width,\n          height: img.height\n        });\n        drawMapAndRobots(img, 0, 0);\n      };\n      img.onerror = err => {\n        console.error('지도 이미지를 로드하는 중 오류 발생:', err);\n      };\n    } catch (error) {\n      console.error('모니터링 지도 가져오기 오류:', error);\n    }\n  };\n  const fetchAllTasks = async () => {\n    const token = getToken();\n    if (!token) return;\n    try {\n      const response = await axios.get('http://172.30.1.28:8080/task/all', {\n        headers: {\n          Authorization: `Bearer ${token}`\n        }\n      });\n      setTasks(response.data);\n    } catch (error) {\n      console.error('작업 로그 가져오기 오류:', error);\n    }\n  };\n  const fetchRobots = async () => {\n    const token = getToken();\n    if (!token) return;\n    try {\n      const response = await axios.get('http://172.30.1.28:5559/robot/robots', {\n        headers: {\n          Authorization: `Bearer ${token}`\n        }\n      });\n      setRobots(response.data);\n    } catch (error) {\n      console.error('로봇 정보 가져오기 오류:', error);\n    }\n  };\n  const toggleExpand = robotId => {\n    if (expandedRobotId === robotId) {\n      setExpandedRobotId(null);\n    } else {\n      setExpandedRobotId(robotId);\n    }\n  };\n  const openPopup = robot => {\n    setSelectedRobot(robot);\n    setIsPopupOpen(true);\n  };\n  const closePopup = () => {\n    setIsPopupOpen(false);\n  };\n  const handleTaskChange = event => {\n    setSelectedTask(event.target.value);\n  };\n  const formatDate = date => {\n    const parsedDate = new Date(date);\n    return isNaN(parsedDate) ? 'N/A' : parsedDate.toLocaleString();\n  };\n  const drawMapAndRobots = (image, offsetX, offsetY) => {\n    const canvas = canvasRef.current;\n    const ctx = canvas.getContext('2d');\n    ctx.clearRect(0, 0, canvas.width, canvas.height);\n\n    // 지도 이미지를 그린다\n    ctx.drawImage(image, offsetX, offsetY, image.width, image.height);\n\n    // 로봇을 그린다\n    robots.forEach(robot => {\n      var _robot$status, _robot$status2, _robot$status3;\n      const {\n        x,\n        y\n      } = robot.location;\n      const {\n        mapX,\n        mapY\n      } = worldToMap(x, y, canvas.width, canvas.height, offsetX, offsetY, image.width, image.height, mapResolution);\n      let robotColor = 'gray';\n      if (((_robot$status = robot.status) === null || _robot$status === void 0 ? void 0 : _robot$status.state) === 'Tasking') {\n        robotColor = 'blue';\n      } else if (((_robot$status2 = robot.status) === null || _robot$status2 === void 0 ? void 0 : _robot$status2.state) === 'Waiting') {\n        robotColor = 'yellow';\n      } else if (((_robot$status3 = robot.status) === null || _robot$status3 === void 0 ? void 0 : _robot$status3.state) === 'Error') {\n        robotColor = 'red';\n      }\n      ctx.fillStyle = robotColor;\n      ctx.beginPath();\n      ctx.arc(mapX, mapY, 5, 0, 2 * Math.PI);\n      ctx.fill();\n    });\n  };\n  const drawRobots = (image, offsetX, offsetY) => {\n    const canvas = canvasRef.current;\n    const ctx = canvas.getContext('2d');\n\n    // 기존 지도는 그대로 두고 로봇만 다시 그린다\n    ctx.clearRect(0, 0, canvas.width, canvas.height);\n    ctx.drawImage(image, offsetX, offsetY, image.width, image.height);\n    robots.forEach(robot => {\n      var _robot$status4, _robot$status5, _robot$status6;\n      const {\n        x,\n        y\n      } = robot.location;\n      const {\n        mapX,\n        mapY\n      } = worldToMap(x, y, canvas.width, canvas.height, offsetX, offsetY, image.width, image.height, mapResolution);\n      let robotColor = 'gray';\n      if (((_robot$status4 = robot.status) === null || _robot$status4 === void 0 ? void 0 : _robot$status4.state) === 'Tasking') {\n        robotColor = 'blue';\n      } else if (((_robot$status5 = robot.status) === null || _robot$status5 === void 0 ? void 0 : _robot$status5.state) === 'Waiting') {\n        robotColor = 'yellow';\n      } else if (((_robot$status6 = robot.status) === null || _robot$status6 === void 0 ? void 0 : _robot$status6.state) === 'Error') {\n        robotColor = 'red';\n      }\n      ctx.fillStyle = robotColor;\n      ctx.beginPath();\n      ctx.arc(mapX, mapY, 5, 0, 2 * Math.PI);\n      ctx.fill();\n    });\n  };\n  const worldToMap = (x, y, mapWidth, mapHeight, offsetX, offsetY, imgWidth, imgHeight, resolution) => {\n    const mapX = x / resolution + mapWidth / 2 + offsetX;\n    const mapY = mapHeight - (y / resolution + mapHeight / 2) + offsetY;\n    return {\n      mapX,\n      mapY\n    };\n  };\n  const handleMouseDown = e => {\n    setDragging(true);\n    setLastMousePos({\n      x: e.clientX,\n      y: e.clientY\n    });\n  };\n  const handleMouseMove = e => {\n    if (dragging && mapImage) {\n      const deltaX = e.clientX - lastMousePos.x;\n      const deltaY = e.clientY - lastMousePos.y;\n      const newOffsetX = dragOffset.x + deltaX;\n      const newOffsetY = dragOffset.y + deltaY;\n      const limitedX = Math.min(0, Math.max(canvasRef.current.width - mapImage.width, newOffsetX));\n      const limitedY = Math.min(0, Math.max(canvasRef.current.height - mapImage.height, newOffsetY));\n      drawMapAndRobots(mapImage, limitedX, limitedY);\n      setDragOffset({\n        x: limitedX,\n        y: limitedY\n      });\n      setLastMousePos({\n        x: e.clientX,\n        y: e.clientY\n      });\n    }\n  };\n  const handleMouseUp = () => setDragging(false);\n  const handleMouseLeave = () => setDragging(false);\n  useEffect(() => {\n    if (mapUrl && mapDimensions.width && mapDimensions.height) {\n      drawMapAndRobots(mapImage, dragOffset.x, dragOffset.y);\n    }\n  }, [mapUrl, robots, mapDimensions]);\n  return /*#__PURE__*/React.createElement(\"div\", {\n    className: \"test-page-container\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 265,\n      columnNumber: 5\n    }\n  }, /*#__PURE__*/React.createElement(\"header\", {\n    className: \"header\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 266,\n      columnNumber: 7\n    }\n  }, /*#__PURE__*/React.createElement(UserInfo, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 267,\n      columnNumber: 9\n    }\n  }), /*#__PURE__*/React.createElement(LogoutButton, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 268,\n      columnNumber: 9\n    }\n  })), /*#__PURE__*/React.createElement(Navbar, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 270,\n      columnNumber: 7\n    }\n  }), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"main-content\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 271,\n      columnNumber: 7\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"map-container\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 272,\n      columnNumber: 9\n    }\n  }, mapUrl ? /*#__PURE__*/React.createElement(\"canvas\", {\n    ref: canvasRef,\n    width: \"800\",\n    height: \"600\",\n    className: \"map-canvas\",\n    onMouseDown: handleMouseDown,\n    onMouseMove: handleMouseMove,\n    onMouseUp: handleMouseUp,\n    onMouseLeave: handleMouseLeave,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 274,\n      columnNumber: 13\n    }\n  }) : /*#__PURE__*/React.createElement(\"p\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 285,\n      columnNumber: 13\n    }\n  }, \"\\uC9C0\\uB3C4\\uB97C \\uBD88\\uB7EC\\uC624\\uB294 \\uC911...\")), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"robot-list-container\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 289,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(\"h3\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 290,\n      columnNumber: 11\n    }\n  }, \"\\uB85C\\uBD07 \\uB9AC\\uC2A4\\uD2B8\"), /*#__PURE__*/React.createElement(\"ul\", {\n    style: {\n      listStyleType: 'none',\n      padding: 0\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 291,\n      columnNumber: 11\n    }\n  }, robots.length > 0 ? robots.map(robot => {\n    var _robot$status7, _robot$status8, _robot$status9;\n    return /*#__PURE__*/React.createElement(\"li\", {\n      key: robot._id,\n      className: \"robot-list-item\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 294,\n        columnNumber: 17\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      style: {\n        display: 'flex',\n        justifyContent: 'space-between',\n        alignItems: 'center'\n      },\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 295,\n        columnNumber: 19\n      }\n    }, /*#__PURE__*/React.createElement(\"span\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 296,\n        columnNumber: 21\n      }\n    }, /*#__PURE__*/React.createElement(\"strong\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 296,\n        columnNumber: 27\n      }\n    }, \"\\uC774\\uB984:\"), \" \", robot.name), /*#__PURE__*/React.createElement(\"span\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 297,\n        columnNumber: 21\n      }\n    }, /*#__PURE__*/React.createElement(\"strong\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 297,\n        columnNumber: 27\n      }\n    }, \"\\uC0C1\\uD0DC:\"), \" \", ((_robot$status7 = robot.status) === null || _robot$status7 === void 0 ? void 0 : _robot$status7.state) || 'Unknown'), /*#__PURE__*/React.createElement(\"span\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 298,\n        columnNumber: 21\n      }\n    }, /*#__PURE__*/React.createElement(\"strong\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 298,\n        columnNumber: 27\n      }\n    }, \"\\uBC30\\uD130\\uB9AC:\"), \" \", ((_robot$status8 = robot.status) === null || _robot$status8 === void 0 ? void 0 : _robot$status8.battery) || 'N/A', \"%\"), /*#__PURE__*/React.createElement(\"button\", {\n      onClick: () => toggleExpand(robot._id),\n      style: {\n        background: 'none',\n        border: 'none',\n        cursor: 'pointer',\n        fontSize: '16px'\n      },\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 299,\n        columnNumber: 21\n      }\n    }, expandedRobotId === robot._id ? /*#__PURE__*/React.createElement(\"i\", {\n      className: \"fas fa-chevron-up\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 303,\n        columnNumber: 56\n      }\n    }) : /*#__PURE__*/React.createElement(\"i\", {\n      className: \"fas fa-chevron-down\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 303,\n        columnNumber: 96\n      }\n    }))), /*#__PURE__*/React.createElement(\"div\", {\n      className: `robot-details ${expandedRobotId === robot._id ? 'expanded' : ''}`,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 306,\n        columnNumber: 19\n      }\n    }, /*#__PURE__*/React.createElement(\"p\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 307,\n        columnNumber: 21\n      }\n    }, /*#__PURE__*/React.createElement(\"strong\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 307,\n        columnNumber: 24\n      }\n    }, \"IP:\"), \" \", robot.ip), /*#__PURE__*/React.createElement(\"p\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 308,\n        columnNumber: 21\n      }\n    }, /*#__PURE__*/React.createElement(\"strong\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 308,\n        columnNumber: 24\n      }\n    }, \"\\uC704\\uCE58:\"), \" x: \", robot.location.x, \", y: \", robot.location.y), /*#__PURE__*/React.createElement(\"p\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 309,\n        columnNumber: 21\n      }\n    }, /*#__PURE__*/React.createElement(\"strong\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 309,\n        columnNumber: 24\n      }\n    }, \"\\uC18D\\uB3C4:\"), \" \", ((_robot$status9 = robot.status) === null || _robot$status9 === void 0 ? void 0 : _robot$status9.speed) || 'N/A', \" m/s\"), /*#__PURE__*/React.createElement(\"p\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 310,\n        columnNumber: 21\n      }\n    }, /*#__PURE__*/React.createElement(\"strong\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 311,\n        columnNumber: 23\n      }\n    }, \"job\"), /*#__PURE__*/React.createElement(\"button\", {\n      onClick: () => openPopup(robot),\n      style: {\n        background: 'none',\n        border: '1px solid #ccc',\n        cursor: 'pointer',\n        fontSize: '16px'\n      },\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 312,\n        columnNumber: 23\n      }\n    }, \"+\"))));\n  }) : /*#__PURE__*/React.createElement(\"p\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 318,\n      columnNumber: 15\n    }\n  }, \"\\uC5F0\\uACB0\\uB41C \\uB85C\\uBD07\\uC774 \\uC5C6\\uC2B5\\uB2C8\\uB2E4.\")))), isPopupOpen && selectedRobot && /*#__PURE__*/React.createElement(\"div\", {\n    className: \"popup-overlay\",\n    onClick: closePopup,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 325,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"popup-container\",\n    onClick: e => e.stopPropagation(),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 326,\n      columnNumber: 11\n    }\n  }, /*#__PURE__*/React.createElement(\"h2\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 327,\n      columnNumber: 13\n    }\n  }, \"\\uC791\\uC5C5 \\uC120\\uD0DD - \", selectedRobot.name), /*#__PURE__*/React.createElement(\"div\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 328,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(\"label\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 329,\n      columnNumber: 15\n    }\n  }, \"\\uC791\\uC5C5\\uC744 \\uC120\\uD0DD\\uD558\\uC138\\uC694:\", /*#__PURE__*/React.createElement(\"select\", {\n    value: selectedTask,\n    onChange: handleTaskChange,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 331,\n      columnNumber: 17\n    }\n  }, /*#__PURE__*/React.createElement(\"option\", {\n    value: \"\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 332,\n      columnNumber: 19\n    }\n  }, \"\\uC120\\uD0DD\\uD558\\uC138\\uC694\"), availableTasks.map((task, index) => /*#__PURE__*/React.createElement(\"option\", {\n    key: index,\n    value: task,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 334,\n      columnNumber: 21\n    }\n  }, task))))), /*#__PURE__*/React.createElement(\"button\", {\n    className: \"popup-close-button\",\n    onClick: closePopup,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 339,\n      columnNumber: 13\n    }\n  }, \"\\uB2EB\\uAE30\"))), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"task-log-container\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 344,\n      columnNumber: 7\n    }\n  }, /*#__PURE__*/React.createElement(\"h3\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 345,\n      columnNumber: 9\n    }\n  }, \"\\uC791\\uC5C5 \\uB85C\\uADF8\"), /*#__PURE__*/React.createElement(\"div\", {\n    style: {\n      height: '80%',\n      overflowY: 'scroll',\n      border: '1px solid #ccc'\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 346,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(\"table\", {\n    className: \"task-log-table\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 347,\n      columnNumber: 11\n    }\n  }, /*#__PURE__*/React.createElement(\"thead\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 348,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(\"tr\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 349,\n      columnNumber: 15\n    }\n  }, /*#__PURE__*/React.createElement(\"th\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 350,\n      columnNumber: 17\n    }\n  }, \"\\uC791\\uC5C5 \\uC774\\uB984\"), /*#__PURE__*/React.createElement(\"th\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 351,\n      columnNumber: 17\n    }\n  }, \"\\uB85C\\uBD07 IP\"), /*#__PURE__*/React.createElement(\"th\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 352,\n      columnNumber: 17\n    }\n  }, \"\\uC791\\uC5C5 \\uC720\\uD615\"), /*#__PURE__*/React.createElement(\"th\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 353,\n      columnNumber: 17\n    }\n  }, \"\\uC0C1\\uD0DC\"), /*#__PURE__*/React.createElement(\"th\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 354,\n      columnNumber: 17\n    }\n  }, \"\\uC2DC\\uC791 \\uC2DC\\uAC04\"), /*#__PURE__*/React.createElement(\"th\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 355,\n      columnNumber: 17\n    }\n  }, \"\\uC885\\uB8CC \\uC2DC\\uAC04\"))), /*#__PURE__*/React.createElement(\"tbody\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 358,\n      columnNumber: 13\n    }\n  }, tasks.length > 0 ? tasks.map((task, index) => /*#__PURE__*/React.createElement(\"tr\", {\n    key: index,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 361,\n      columnNumber: 19\n    }\n  }, /*#__PURE__*/React.createElement(\"td\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 362,\n      columnNumber: 21\n    }\n  }, task.name), /*#__PURE__*/React.createElement(\"td\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 363,\n      columnNumber: 21\n    }\n  }, task.robotIp), /*#__PURE__*/React.createElement(\"td\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 364,\n      columnNumber: 21\n    }\n  }, task.taskType), /*#__PURE__*/React.createElement(\"td\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 365,\n      columnNumber: 21\n    }\n  }, task.status), /*#__PURE__*/React.createElement(\"td\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 366,\n      columnNumber: 21\n    }\n  }, formatDate(task.startTime)), /*#__PURE__*/React.createElement(\"td\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 367,\n      columnNumber: 21\n    }\n  }, formatDate(task.endTime)))) : /*#__PURE__*/React.createElement(\"tr\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 371,\n      columnNumber: 17\n    }\n  }, /*#__PURE__*/React.createElement(\"td\", {\n    colSpan: \"6\",\n    style: {\n      textAlign: 'center',\n      padding: '10px'\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 372,\n      columnNumber: 19\n    }\n  }, \"\\uC791\\uC5C5 \\uB85C\\uADF8\\uAC00 \\uC5C6\\uC2B5\\uB2C8\\uB2E4.\")))))));\n}\nexport default TestPage;","map":{"version":3,"names":["React","useState","useEffect","useRef","Navbar","LogoutButton","UserInfo","axios","TestPage","mapUrl","setMapUrl","robots","setRobots","tasks","setTasks","isPopupOpen","setIsPopupOpen","selectedRobot","setSelectedRobot","selectedTask","setSelectedTask","availableTasks","setAvailableTasks","canvasRef","mapImage","setMapImage","mapResolution","setMapResolution","mapDimensions","setMapDimensions","width","height","dragging","setDragging","dragOffset","setDragOffset","x","y","lastMousePos","setLastMousePos","expandedRobotId","setExpandedRobotId","fetchData","fetchMapMetadata","fetchMonitoredMap","fetchRobots","fetchAllTasks","socket","WebSocket","onopen","console","log","onmessage","event","updatedRobots","JSON","parse","data","drawRobots","onerror","error","onclose","close","getToken","token","localStorage","getItem","alert","window","location","href","response","get","headers","Authorization","metadata","resolution","parseFloat","match","responseType","url","URL","createObjectURL","img","Image","src","onload","drawMapAndRobots","err","toggleExpand","robotId","openPopup","robot","closePopup","handleTaskChange","target","value","formatDate","date","parsedDate","Date","isNaN","toLocaleString","image","offsetX","offsetY","canvas","current","ctx","getContext","clearRect","drawImage","forEach","_robot$status","_robot$status2","_robot$status3","mapX","mapY","worldToMap","robotColor","status","state","fillStyle","beginPath","arc","Math","PI","fill","_robot$status4","_robot$status5","_robot$status6","mapWidth","mapHeight","imgWidth","imgHeight","handleMouseDown","e","clientX","clientY","handleMouseMove","deltaX","deltaY","newOffsetX","newOffsetY","limitedX","min","max","limitedY","handleMouseUp","handleMouseLeave","createElement","className","__self","__source","fileName","_jsxFileName","lineNumber","columnNumber","ref","onMouseDown","onMouseMove","onMouseUp","onMouseLeave","style","listStyleType","padding","length","map","_robot$status7","_robot$status8","_robot$status9","key","_id","display","justifyContent","alignItems","name","battery","onClick","background","border","cursor","fontSize","ip","speed","stopPropagation","onChange","task","index","overflowY","robotIp","taskType","startTime","endTime","colSpan","textAlign"],"sources":["/home/ketgintern/Desktop/FMS-AGV-AMR/frontend/src/pages/Test/TestPage.js"],"sourcesContent":["import React, { useState, useEffect, useRef } from 'react';\nimport Navbar from '../../components/Common/Navbar';\nimport LogoutButton from '../../components/Common/LogoutButton';\nimport UserInfo from '../../components/Common/UserInfo';\nimport axios from 'axios';\nimport './TestPage.css';\nimport '@fortawesome/fontawesome-free/css/all.min.css';\n\nfunction TestPage() {\n  const [mapUrl, setMapUrl] = useState(null);\n  const [robots, setRobots] = useState([]);\n  const [tasks, setTasks] = useState([]);\n  const [isPopupOpen, setIsPopupOpen] = useState(false);\n  const [selectedRobot, setSelectedRobot] = useState(null);\n  const [selectedTask, setSelectedTask] = useState('');\n  const [availableTasks, setAvailableTasks] = useState(['Task 1', 'Task 2', 'Task 3']);\n  const canvasRef = useRef(null);\n  const [mapImage, setMapImage] = useState(null);\n  const [mapResolution, setMapResolution] = useState(0.05);\n  const [mapDimensions, setMapDimensions] = useState({ width: 0, height: 0 });\n  const [dragging, setDragging] = useState(false);\n  const [dragOffset, setDragOffset] = useState({ x: 0, y: 0 });\n  const [lastMousePos, setLastMousePos] = useState({ x: 0, y: 0 });\n  const [expandedRobotId, setExpandedRobotId] = useState(null);\n\n  useEffect(() => {\n    const fetchData = async () => {\n      await fetchMapMetadata();\n      await fetchMonitoredMap();\n      fetchRobots();\n      fetchAllTasks();\n    };\n    fetchData();\n\n    const socket = new WebSocket('ws://your-websocket-url');\n\n    socket.onopen = () => {\n      console.log('WebSocket 연결 성공');\n    };\n\n    socket.onmessage = (event) => {\n      const updatedRobots = JSON.parse(event.data);\n      setRobots(updatedRobots);\n\n      // 새로운 로봇 위치 정보를 받아서 로봇 위치만 다시 그리기\n      if (mapImage) {\n        drawRobots(mapImage, dragOffset.x, dragOffset.y); // 지도는 유지한 채 로봇만 갱신\n      }\n    };\n\n    socket.onerror = (error) => {\n      console.error('WebSocket 오류:', error);\n    };\n\n    socket.onclose = () => {\n      console.log('WebSocket 연결 종료');\n    };\n\n    return () => {\n      socket.close();\n    };\n  }, [mapImage, dragOffset.x, dragOffset.y]);\n\n  const getToken = () => {\n    const token = localStorage.getItem('token');\n    if (!token) {\n      alert('토큰이 없습니다. 다시 로그인해주세요.');\n      window.location.href = '/login';\n      return null;\n    }\n    return token;\n  };\n\n  const fetchMapMetadata = async () => {\n    const token = getToken();\n    if (!token) return;\n\n    try {\n      const response = await axios.get('http://172.30.1.28:5557/map/monitored/metadata', {\n        headers: { Authorization: `Bearer ${token}` },\n      });\n      const metadata = response.data;\n      const resolution = parseFloat(metadata.match(/resolution:\\s*(\\d+.\\d+)/)[1]);\n      setMapResolution(resolution);\n    } catch (error) {\n      console.error('지도 메타데이터 가져오기 오류:', error);\n    }\n  };\n\n  const fetchMonitoredMap = async () => {\n    const token = getToken();\n    if (!token) return;\n\n    try {\n      const response = await axios.get('http://172.30.1.28:5557/map/monitored/file', {\n        headers: { Authorization: `Bearer ${token}` },\n        responseType: 'blob',\n      });\n      const url = URL.createObjectURL(response.data);\n      setMapUrl(url);\n\n      const img = new Image();\n      img.src = url;\n      img.onload = () => {\n        setMapImage(img);\n        setMapDimensions({ width: img.width, height: img.height });\n        drawMapAndRobots(img, 0, 0);\n      };\n      img.onerror = (err) => {\n        console.error('지도 이미지를 로드하는 중 오류 발생:', err);\n      };\n    } catch (error) {\n      console.error('모니터링 지도 가져오기 오류:', error);\n    }\n  };\n\n  const fetchAllTasks = async () => {\n    const token = getToken();\n    if (!token) return;\n\n    try {\n      const response = await axios.get('http://172.30.1.28:8080/task/all', {\n        headers: { Authorization: `Bearer ${token}` },\n      });\n      setTasks(response.data);\n    } catch (error) {\n      console.error('작업 로그 가져오기 오류:', error);\n    }\n  };\n\n  const fetchRobots = async () => {\n    const token = getToken();\n    if (!token) return;\n\n    try {\n      const response = await axios.get('http://172.30.1.28:5559/robot/robots', {\n        headers: { Authorization: `Bearer ${token}` },\n      });\n      setRobots(response.data);\n    } catch (error) {\n      console.error('로봇 정보 가져오기 오류:', error);\n    }\n  };\n\n  const toggleExpand = (robotId) => {\n    if (expandedRobotId === robotId) {\n      setExpandedRobotId(null);\n    } else {\n      setExpandedRobotId(robotId);\n    }\n  };\n\n  const openPopup = (robot) => {\n    setSelectedRobot(robot);\n    setIsPopupOpen(true);\n  };\n\n  const closePopup = () => {\n    setIsPopupOpen(false);\n  };\n\n  const handleTaskChange = (event) => {\n    setSelectedTask(event.target.value);\n  };\n\n  const formatDate = (date) => {\n    const parsedDate = new Date(date);\n    return isNaN(parsedDate) ? 'N/A' : parsedDate.toLocaleString();\n  };\n\n  const drawMapAndRobots = (image, offsetX, offsetY) => {\n    const canvas = canvasRef.current;\n    const ctx = canvas.getContext('2d');\n    ctx.clearRect(0, 0, canvas.width, canvas.height);\n\n    // 지도 이미지를 그린다\n    ctx.drawImage(image, offsetX, offsetY, image.width, image.height);\n\n    // 로봇을 그린다\n    robots.forEach((robot) => {\n      const { x, y } = robot.location;\n      const { mapX, mapY } = worldToMap(x, y, canvas.width, canvas.height, offsetX, offsetY, image.width, image.height, mapResolution);\n\n      let robotColor = 'gray';\n      if (robot.status?.state === 'Tasking') {\n        robotColor = 'blue';\n      } else if (robot.status?.state === 'Waiting') {\n        robotColor = 'yellow';\n      } else if (robot.status?.state === 'Error') {\n        robotColor = 'red';\n      }\n\n      ctx.fillStyle = robotColor;\n      ctx.beginPath();\n      ctx.arc(mapX, mapY, 5, 0, 2 * Math.PI);\n      ctx.fill();\n    });\n  };\n\n  const drawRobots = (image, offsetX, offsetY) => {\n    const canvas = canvasRef.current;\n    const ctx = canvas.getContext('2d');\n    \n    // 기존 지도는 그대로 두고 로봇만 다시 그린다\n    ctx.clearRect(0, 0, canvas.width, canvas.height);\n    ctx.drawImage(image, offsetX, offsetY, image.width, image.height);\n\n    robots.forEach((robot) => {\n      const { x, y } = robot.location;\n      const { mapX, mapY } = worldToMap(x, y, canvas.width, canvas.height, offsetX, offsetY, image.width, image.height, mapResolution);\n\n      let robotColor = 'gray';\n      if (robot.status?.state === 'Tasking') {\n        robotColor = 'blue';\n      } else if (robot.status?.state === 'Waiting') {\n        robotColor = 'yellow';\n      } else if (robot.status?.state === 'Error') {\n        robotColor = 'red';\n      }\n\n      ctx.fillStyle = robotColor;\n      ctx.beginPath();\n      ctx.arc(mapX, mapY, 5, 0, 2 * Math.PI);\n      ctx.fill();\n    });\n  };\n\n  const worldToMap = (x, y, mapWidth, mapHeight, offsetX, offsetY, imgWidth, imgHeight, resolution) => {\n    const mapX = ((x / resolution) + mapWidth / 2) + offsetX;\n    const mapY = mapHeight - ((y / resolution) + mapHeight / 2) + offsetY;\n    return { mapX, mapY };\n  };\n\n  const handleMouseDown = (e) => {\n    setDragging(true);\n    setLastMousePos({ x: e.clientX, y: e.clientY });\n  };\n\n  const handleMouseMove = (e) => {\n    if (dragging && mapImage) {\n      const deltaX = e.clientX - lastMousePos.x;\n      const deltaY = e.clientY - lastMousePos.y;\n      const newOffsetX = dragOffset.x + deltaX;\n      const newOffsetY = dragOffset.y + deltaY;\n\n      const limitedX = Math.min(0, Math.max(canvasRef.current.width - mapImage.width, newOffsetX));\n      const limitedY = Math.min(0, Math.max(canvasRef.current.height - mapImage.height, newOffsetY));\n\n      drawMapAndRobots(mapImage, limitedX, limitedY);\n      setDragOffset({ x: limitedX, y: limitedY });\n      setLastMousePos({ x: e.clientX, y: e.clientY });\n    }\n  };\n\n  const handleMouseUp = () => setDragging(false);\n  const handleMouseLeave = () => setDragging(false);\n\n  useEffect(() => {\n    if (mapUrl && mapDimensions.width && mapDimensions.height) {\n      drawMapAndRobots(mapImage, dragOffset.x, dragOffset.y);\n    }\n  }, [mapUrl, robots, mapDimensions]);\n\n  return (\n    <div className=\"test-page-container\">\n      <header className=\"header\">\n        <UserInfo />\n        <LogoutButton />\n      </header>\n      <Navbar />\n      <div className=\"main-content\">\n        <div className=\"map-container\">\n          {mapUrl ? (\n            <canvas\n              ref={canvasRef}\n              width=\"800\"\n              height=\"600\"\n              className=\"map-canvas\"\n              onMouseDown={handleMouseDown}\n              onMouseMove={handleMouseMove}\n              onMouseUp={handleMouseUp}\n              onMouseLeave={handleMouseLeave}\n            ></canvas>\n          ) : (\n            <p>지도를 불러오는 중...</p>\n          )}\n        </div>\n\n        <div className=\"robot-list-container\">\n          <h3>로봇 리스트</h3>\n          <ul style={{ listStyleType: 'none', padding: 0 }}>\n            {robots.length > 0 ? (\n              robots.map((robot) => (\n                <li key={robot._id} className=\"robot-list-item\">\n                  <div style={{ display: 'flex', justifyContent: 'space-between', alignItems: 'center' }}>\n                    <span><strong>이름:</strong> {robot.name}</span>\n                    <span><strong>상태:</strong> {robot.status?.state || 'Unknown'}</span>\n                    <span><strong>배터리:</strong> {robot.status?.battery || 'N/A'}%</span>\n                    <button\n                      onClick={() => toggleExpand(robot._id)}\n                      style={{ background: 'none', border: 'none', cursor: 'pointer', fontSize: '16px' }}\n                    >\n                      {expandedRobotId === robot._id ? <i className=\"fas fa-chevron-up\"></i> : <i className=\"fas fa-chevron-down\"></i>}\n                    </button>\n                  </div>\n                  <div className={`robot-details ${expandedRobotId === robot._id ? 'expanded' : ''}`}>\n                    <p><strong>IP:</strong> {robot.ip}</p>\n                    <p><strong>위치:</strong> x: {robot.location.x}, y: {robot.location.y}</p>\n                    <p><strong>속도:</strong> {robot.status?.speed || 'N/A'} m/s</p>\n                    <p>\n                      <strong>job</strong>\n                      <button onClick={() => openPopup(robot)} style={{ background: 'none', border: '1px solid #ccc', cursor: 'pointer', fontSize: '16px' }}>+</button>\n                    </p>\n                  </div>\n                </li>\n              ))\n            ) : (\n              <p>연결된 로봇이 없습니다.</p>\n            )}\n          </ul>\n        </div>\n      </div>\n\n      {isPopupOpen && selectedRobot && (\n        <div className=\"popup-overlay\" onClick={closePopup}>\n          <div className=\"popup-container\" onClick={(e) => e.stopPropagation()}>\n            <h2>작업 선택 - {selectedRobot.name}</h2>\n            <div>\n              <label>\n                작업을 선택하세요:\n                <select value={selectedTask} onChange={handleTaskChange}>\n                  <option value=\"\">선택하세요</option>\n                  {availableTasks.map((task, index) => (\n                    <option key={index} value={task}>{task}</option>\n                  ))}\n                </select>\n              </label>\n            </div>\n            <button className=\"popup-close-button\" onClick={closePopup}>닫기</button>\n          </div>\n        </div>\n      )}\n\n      <div className=\"task-log-container\">\n        <h3>작업 로그</h3>\n        <div style={{ height: '80%', overflowY: 'scroll', border: '1px solid #ccc' }}>\n          <table className=\"task-log-table\">\n            <thead>\n              <tr>\n                <th>작업 이름</th>\n                <th>로봇 IP</th>\n                <th>작업 유형</th>\n                <th>상태</th>\n                <th>시작 시간</th>\n                <th>종료 시간</th>\n              </tr>\n            </thead>\n            <tbody>\n              {tasks.length > 0 ? (\n                tasks.map((task, index) => (\n                  <tr key={index}>\n                    <td>{task.name}</td>\n                    <td>{task.robotIp}</td>\n                    <td>{task.taskType}</td>\n                    <td>{task.status}</td>\n                    <td>{formatDate(task.startTime)}</td>\n                    <td>{formatDate(task.endTime)}</td>\n                  </tr>\n                ))\n              ) : (\n                <tr>\n                  <td colSpan=\"6\" style={{ textAlign: 'center', padding: '10px' }}>작업 로그가 없습니다.</td>\n                </tr>\n              )}\n            </tbody>\n          </table>\n        </div>\n      </div>\n    </div>\n  );\n}\n\nexport default TestPage;\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module"}